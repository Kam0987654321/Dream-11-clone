"use strict";function golfclub_init_reviews(e){function i(e,i){var r=void 0!=arguments[2]?arguments[2]:-1,s=void 0!=arguments[3]?arguments[3]:!0,a=0,n=parseInt(e.data("max-level"));e.find(".reviews_value").html(i),e.find('input[type="hidden"]').val(i).trigger("change"),e.find(".reviews_stars_hover").css("width",Math.round(e.find(".reviews_stars_bg").width()*i/(n-a))+"px"),r>=0&&e.find(".reviews_slider").css("left",r+"px"),GOLFCLUB_STORAGE.admin_mode||GOLFCLUB_STORAGE.reviews_user_accepted||!s||(GOLFCLUB_STORAGE.reviews_user_accepted=!0,e.siblings(".reviews_item").each(function(){jQuery(this).find(".reviews_stars_hover").css("width",0),jQuery(this).find(".reviews_value").html("0"),jQuery(this).find(".reviews_slider").css("left",0),jQuery(this).find('input[type="hidden"]').val("0")}),e.parent().next().fadeIn()),t(e.parents(".reviews_editor"))}function t(e){var i=0,t=0,r=0,s=parseInt(e.find(".reviews_item").eq(0).data("max-level")),a=parseFloat(e.find(".reviews_item").eq(0).data("step")),n=Math.pow(10,a.toString().indexOf(".")<0?0:a.toString().length-a.toString().indexOf(".")-1);e.find('input[type="hidden"]').each(function(){i+=parseFloat(jQuery(this).val()),t++}),i=t>0?i/t:0,i=Math.min(s,Math.max(r,Math.round(i*n)/n+r));var d=e.siblings(".reviews_summary");d.find(".reviews_value").html(i),d.find('input[type="hidden"]').val(i).trigger("change"),d.find(".reviews_stars_hover").css("width",Math.round(d.find(".reviews_stars_bg").width()*i/(s-r))+"px")}e.find(".reviews_editable .reviews_slider:not(.inited)").each(function(){if("undefined"!=typeof GOLFCLUB_STORAGE.reviews_allow_user_marks&&GOLFCLUB_STORAGE.reviews_allow_user_marks&&!(jQuery(this).parents("div:hidden,article:hidden").length>0)){jQuery(this).addClass("inited");var e=jQuery(this).parents(".reviews_item"),t=jQuery(this).parents(".reviews_stars_wrap"),r=0,s=parseInt(e.data("max-level")),a=parseFloat(e.data("step")),n=Math.pow(10,a.toString().indexOf(".")<0?0:a.toString().length-a.toString().indexOf(".")-1),d=Math.max(1,(t.width()-jQuery(this).width())/(s-r)/n),h=parseFloat(e.find('input[type="hidden"]').val()),_=Math.round((h-r)*(t.width()-jQuery(this).width())/(s-r));i(e,h,_,!1),jQuery(this).draggable({axis:"x",grid:[d,d],containment:".reviews_stars_wrap",scroll:!1,drag:function(a,d){var h=d.position.left>=0?d.position.left:d.originalPosition.left+d.offset.left,_=Math.min(s,Math.max(r,Math.round(h*n*(s-r)/(t.width()-jQuery(this).width()))/n+r));i(e,_)}})}}),e.find(".reviews_editor .reviews_editable .reviews_stars_wrap:not(.inited),.reviews_editor .reviews_max_level_100 .reviews_criteria:not(.inited)").each(function(){jQuery(this).parents("div:hidden,article:hidden").length>0||jQuery(this).addClass("inited").on("click",function(e){if("undefined"!=typeof GOLFCLUB_STORAGE.reviews_allow_user_marks&&GOLFCLUB_STORAGE.reviews_allow_user_marks&&(!jQuery(this).hasClass("reviews_criteria")||jQuery(this).next().hasClass("reviews_editable"))){var t=jQuery(this).hasClass("reviews_criteria")?jQuery(this).next():jQuery(this),r=t.parents(".reviews_item"),s=t.width()-t.find(".reviews_slider").width(),a=0,n=parseInt(r.data("max-level")),d=parseFloat(r.data("step")),h=Math.pow(10,d.toString().indexOf(".")<0?0:d.toString().length-d.toString().indexOf(".")-1),_=e.pageX-t.offset().left;1>=_&&(_=0),_>s&&(_=s);var l=Math.min(n,Math.max(a,Math.round(_*h*(n-a)/s)/h+a));i(r,l,_)}})})}jQuery(document).ready(function(){GOLFCLUB_STORAGE.reviews_user_accepted=!1,golfclub_add_hidden_elements_handler("init_reviews",golfclub_init_reviews),golfclub_init_reviews(jQuery("body"))});