var TB=TB||{};!function(){function e(){return{restrict:"E",scope:{},controller:["$scope","TB",t],templateUrl:"/views/partials/components/subfooter-seo.html"}}function t(e,t){var o=function(){return{anchorTag:"",link:""}},n=function(){return{title:"",links:[]}},s=function(){return{id:"",URL:"",type:"",name:"",sections:[],SEO:{title:"",description:"",keywords:[],URL:"",rel:[]}}},r="absent",i=window.location.host+window.location.pathname,a="ls_seo",c={};e.isSubFooterPresent=!1,e.subFooterSections=[];var l=function(e){for(var t=[],s=0;s<e.length;s++){var r=n();r.title=e[s].title||"";for(var i=0;i<e[s].links.length;i++){var a=o();a.link=e[s].links[i].link||"",a.anchorTag=e[s].links[i].anchorTag||"",r.links.push(a)}t.push(r)}return t},u=function(){var o=function(t){if(t.data.hasOwnProperty("id")&&""!==t.data.id){t=t.data;var o=s();o.id=t.id,o.URL=t.URL||"",o.type=t.pageType||"",o.name=t.name||"",o.sections=l(t.sections||[]),e.subFooterSections=o.sections,e.subFooterSections.length&&(e.isSubFooterPresent=!0),c[i]=o,setLocalStorage(a,JSON.stringify(c),.5)}},n=function(e){e&&e.message&&e.message.indexOf("SEO does not exists")!==-1&&(c[i]=r,setLocalStorage(a,JSON.stringify(c),.5))};if(c=JSON.parse(getLocalStorage(a)||"{}"),c.hasOwnProperty(i))c.PAGE_URL!==r?(e.subFooterSections=c[i].sections||[],e.subFooterSections.length&&(e.isSubFooterPresent=!0)):c.PAGE_URL===r&&(e.isSubFooterPresent=!1);else{var u={url:i,fields:"URL,name,pageType,sections"};t.getPageSEO(u,o,n)}};u()}var o=angular.module("SEO",["Testbook"]);o.directive("subFooter",e)}();