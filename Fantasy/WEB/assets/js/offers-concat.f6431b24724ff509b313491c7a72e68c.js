(function(){var t,i;t=this.jQuery||window.jQuery,i=t(window),t.fn.stick_in_parent=function(o){var e,s,r,n,l,a,c,p,d,u,f,h,g;for(null==o&&(o={}),g=o.sticky_class,a=o.inner_scrolling,h=o.recalc_every,f=o.parent,d=o.offset_top,p=o.spacer,r=o.bottoming,null==d&&(d=0),null==f&&(f=void 0),null==a&&(a=!0),null==g&&(g="is_stuck"),e=t(document),null==r&&(r=!0),u=function(t){var i,o,e;return window.getComputedStyle?(i=t[0],o=window.getComputedStyle(t[0]),e=parseFloat(o.getPropertyValue("width"))+parseFloat(o.getPropertyValue("margin-left"))+parseFloat(o.getPropertyValue("margin-right")),"border-box"!==o.getPropertyValue("box-sizing")&&(e+=parseFloat(o.getPropertyValue("border-left-width"))+parseFloat(o.getPropertyValue("border-right-width"))+parseFloat(o.getPropertyValue("padding-left"))+parseFloat(o.getPropertyValue("padding-right"))),e):t.outerWidth(!0)},n=function(o,s,n,l,c,y,k,m){var v,b,w,_,x,P,V,F,C,z,I,A;if(!o.data("sticky_kit")){if(o.data("sticky_kit",!0),x=e.height(),V=o.parent(),null!=f&&(V=V.closest(f)),!V.length)throw"failed to find stick parent";if(w=!1,v=!1,I=null!=p?p&&o.closest(p):t("<div />"),I&&I.css("position",o.css("position")),F=function(){var t,i,r;if(!m)return x=e.height(),t=parseInt(V.css("border-top-width"),10),i=parseInt(V.css("padding-top"),10),s=parseInt(V.css("padding-bottom"),10),n=V.offset().top+t+i,l=V.height(),w&&(w=!1,v=!1,null==p&&(o.insertAfter(I),I.detach()),o.css({position:"",top:"",width:"",bottom:""}).removeClass(g),r=!0),c=o.offset().top-(parseInt(o.css("margin-top"),10)||0)-d,y=o.outerHeight(!0),k=o.css("float"),I&&I.css({width:u(o),height:y,display:o.css("display"),"vertical-align":o.css("vertical-align"),"float":k}),r?A():void 0},F(),y!==l)return _=void 0,P=d,z=h,A=function(){var t,u,f,b,C,A;if(!m)return f=!1,null!=z&&(z-=1,z<=0&&(z=h,F(),f=!0)),f||e.height()===x||(F(),f=!0),b=i.scrollTop(),null!=_&&(u=b-_),_=b,w?(r&&(C=b+y+P>l+n,v&&!C&&(v=!1,o.css({position:"fixed",bottom:"",top:P}).trigger("sticky_kit:unbottom"))),b<c&&(w=!1,P=d,null==p&&("left"!==k&&"right"!==k||o.insertAfter(I),I.detach()),t={position:"",width:"",top:""},o.css(t).removeClass(g).trigger("sticky_kit:unstick")),a&&(A=i.height(),y+d>A&&(v||(P-=u,P=Math.max(A-y,P),P=Math.min(d,P),w&&o.css({top:P+"px"}))))):b>c&&(w=!0,t={position:"fixed",top:P},t.width="border-box"===o.css("box-sizing")?o.outerWidth()+"px":o.width()+"px",o.css(t).addClass(g),null==p&&(o.after(I),"left"!==k&&"right"!==k||I.append(o)),o.trigger("sticky_kit:stick")),w&&r&&(null==C&&(C=b+y+P>l+n),!v&&C)?(v=!0,"static"===V.css("position")&&V.css({position:"relative"}),o.css({position:"absolute",bottom:s,top:"auto"}).trigger("sticky_kit:bottom")):void 0},C=function(){return F(),A()},b=function(){if(m=!0,i.off("touchmove",A),i.off("scroll",A),i.off("resize",C),t(document.body).off("sticky_kit:recalc",C),o.off("sticky_kit:detach",b),o.removeData("sticky_kit"),o.css({position:"",bottom:"",top:"",width:""}),V.position("position",""),w)return null==p&&("left"!==k&&"right"!==k||o.insertAfter(I),I.remove()),o.removeClass(g)},i.on("touchmove",A),i.on("scroll",A),i.on("resize",C),t(document.body).on("sticky_kit:recalc",C),o.on("sticky_kit:detach",b),setTimeout(A,0)}},l=0,c=this.length;l<c;l++)s=this[l],n(t(s));return this}}).call(this);
"use strict";(function(){var r;r=angular.module("ui.bootstrap.showErrors",[]),r.directive("showErrors",["$timeout","showErrorsConfig","$interpolate",function(r,t,i){var n,u,e;return u=function(r){var i;return i=t.trigger,r&&null!=r.trigger&&(i=r.trigger),i},n=function(r){var i;return i=t.showSuccess,r&&null!=r.showSuccess&&(i=r.showSuccess),i},e=function(t,e,s,F){var o,h,a,l,c,g,f,D;if(o=!1,c=t.$eval(s.showErrors),g=n(c),D=u(c),h=e[0].querySelector(".form-control[name]"),l=angular.element(h),a=i(l.attr("name")||"")(t),!a)throw"show-errors element has no child input elements with a 'name' attribute and a 'form-control' class";return l.bind(D,function(){return o=!0,f(F[a].$invalid)}),t.$watch(function(){return F[a]&&F[a].$invalid},function(r){if(o)return f(r)}),t.$on("show-errors-check-validity",function(){return f(F[a].$invalid)}),t.$on("show-errors-reset",function(){return r(function(){return e.removeClass("has-error"),e.removeClass("has-success"),o=!1},0,!1)}),f=function(r){if(e.toggleClass("has-error",r),g)return e.toggleClass("has-success",!r)}},{restrict:"A",require:"^form",compile:function(r,t){if(t.showErrors.indexOf("skipFormGroupCheck")===-1&&!r.hasClass("form-group")&&!r.hasClass("input-group"))throw"show-errors element does not have the 'form-group' or 'input-group' class";return e}}}]),r.provider("showErrorsConfig",function(){var r,t;r=!1,t="blur",this.showSuccess=function(t){return r=t},this.trigger=function(r){return t=r},this.$get=function(){return{showSuccess:r,trigger:t}}})}).call(this);var validateForms=angular.module("formValidations",[]);validateForms.service("userDetailValidations",function(){this.error={},this.propsWithLimitOnLength={},this.propsWithLimitOnMinLength={},this.isValidEmail=function(r){var t=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return t.test(r)},this.isValidDate=function(r){return"Invalid Date"!==new Date(r)&&!isNaN(new Date(r))},this.limitOnMinLength=function(r,t,i){return this.propsWithLimitOnMinLength[t]?null:this.propsWithLimitOnMinLength[t]=i,!(!r[t]||!r[t].length)&&i<r[t].length},this.limitOnLength=function(r,t,i){return this.propsWithLimitOnLength[t]?null:this.propsWithLimitOnLength[t]=i,!!(r[t]&&r[t].length&&r[t].length>i)&&(r[t]=r[t].slice(0,i),i==r[t].length)},this.acceptOnlyNumber=function(r,t){if(!(r&&r[t]&&r[t].length>0))return!0;var i=r[t][r[t].length-1];isNaN(i)&&(r[t]=r[t].slice(0,r[t].length-1))},this.isValid=function(r,t,i){var n="undefined"!=typeof t[i]&&""!=t[i]&&!r[i].$error.required&&!r[i].$error[i];return n&="email"!=i||this.isValidEmail(t[i]),n&="dob"!=i||this.isValidDate(t[i]),n&=!this.propsWithLimitOnLength[i]||t[i].length==this.propsWithLimitOnLength[i],n&=!this.propsWithLimitOnMinLength[i]||t[i].length>=this.propsWithLimitOnMinLength[i]},this.setError=function(r,t){this.error[r]=t},this.hasError=function(r){return!!this.error[r]}});
!function(){function e(){return{restrict:"E",scope:{isOTPSent:"=otpSent",template:"@",mobile:"@",title:"@"},controller:["$scope","TB","$interval","$rootScope",t],templateUrl:"/views/partials/components/mobile-verification-template.html"}}function t(e,t,i,o){var n,a=30,r="call",l="SMS",s="",c=a;e.student={mobile:""},e.otp="",e.timeLeftString=a.toString(),e.otpSentVia=l,e.otpResent=!1,e.otpResentCount=0,e.maxOTPResendAllowed=6,e.activateResendOTPBtns=!1,e.activeLoader="",e.loader={resentOTP:"resendOTPLoader",OTPViaCall:"OTPViaCallLoader",verifyOTP:"verifyOTPLoader"};var d=function(t,o,r){n&&(i.cancel(n),e.activateResendOTPBtns=!1,e.timeLeftString=a.toString()),n=i(function(){c-=1,e.timeLeftString=c>9?""+c:"0"+c,0===c&&r()},t,o)},m=function(){e.activateResendOTPBtns=!0,e.timeLeftString=a.toString()};e.toggleCurrentState=function(){e.isOTPSent=!e.isOTPSent,e.otpResentCount=0,e.isOTPSent&&s&&(e.student.mobile=s)},e.sendOTP=function(i,o){var n=function(){e.activeLoader="",e.isOTPSent=!0,i||o?(e.otpResent=!0,e.otpResentCount=e.otpResentCount+1):(forceSessionRefresh(),e.otpResentCount=0,e.otpResent=!1),c=a,d(1e3,a,m)},s=function(t){e.activeLoader="",showAlert(t&&t.message||"There was a problem sending OTP. Please retry.","error","small",5e3)};o?(e.activeLoader=e.loader.OTPViaCall,e.otpSentVia=r):(e.activeLoader=e.loader.resentOTP,e.otpSentVia=l);var f={mobile:"91"+e.student.mobile,onCall:!!o};t.updateMobile(f,n,s)},e.verifyOTP=function(i){var n=function(t){e.activeLoader="",o.$broadcast(MOBILE_SUCCESSFULLY_VERIFIED,{mobile:e.student.mobile}),forceSessionRefresh()},a=function(t){e.activeLoader="",showAlert(t&&t.message||"Failed to verify otp. Please retry!","error","small",5e3)};e.activeLoader=e.loader.verifyOTP;var r={otp:i};t.verifyOtp(r,n,a)};var f=function(t){t&&t.data&&(t.data.mobileVerified?(e.student.mobile=t.data.mobileVerified.slice(2),s=t.data.mobileVerified.slice(2)):e.student.mobile=t.data.mobile?t.data.mobile.slice(2):"")},u=function(){e.student.mobile=e.mobile?12===e.mobile.length?e.mobile.slice(2):e.mobile:"",e.isOTPSent&&e.mobile?d(1e3,a,m):e.mobile||(e.isOTPSent=!1,TB.GetStudentFromStorage(f))};u()}angular.module("mobileVerification",["Testbook"]).directive("verifyMobile",e)}();
var app=app||{},TB=TB||{};app.controller("paymentCtrl",["$scope","TB",function(t,e){t.compName="Testbook";var a=$("#stuname")&&$("#stuname").val()||"TB_Anon",o=$("#email")&&$("#email").val()||"tb_anon@testbook.com",n=$("#mobile")&&$("#mobile").val().slice(2)||"9876543210",r="razorpay_payment_id",s="razorpay_order_id",i="razorpay_signature",l="",p="";t.paytmObj={otp:"",data:{mobile:""},description:""},t.isOpenPaytmErrorBox=!1;var c=function(){t.isEnterOtpView=!1,t.isFailedAttempt=!1,t.isLoading=!1,t.statusText="Sending OTP to "+n},m=function(t,a){var o={courses:t},n=function(){forceSessionRefresh(),setCookie("tb_txnid",a),window.location.href="/tests"},r=function(t){t&&t.message&&""!==t.message?(showAlert(t.message,"error","small",3e3),setCookie("tb_txnid",a),window.location.href="/tests"):showAlert("Please check your internet connection or contact at support@testbook.com","error","large",5e3)};e.enrollInCourse(o,n,r)},d=function(t){for(var e=p.split(","),a=0;a<t.length;a++)t[a].course&&e.indexOf(t[a].course.id)!==-1&&e.splice(e.indexOf(t[a].course.id),1);p=e.join(",")},u=function(t){if(t.hasOwnProperty("message"))showAlert(t.message||"Something went wrong please contact at support@testbook.com","error","small",5e3);else{var e=t.data||{};d(e.enrollments||[])}};t.$on("openRazorpayPrompt",function(t,e){e.data.hasOwnProperty("url")?window?window.location.href=e.data.url:showAlert("Please refresh the page to see your tests","error","small",5e3):(p=e.csCourseIds||"",TB.GetStudentFromStorage(u),O(e))});var y=function(t){m(p,t)},g=function(t){t.isMobile=!1;var a=function(t){t&&t.data?y(t.data.transaction||""):showAlert(t&&t.message||"Something went wrong.","danger","large",5e3)},o=function(t){showAlert("Something went wrong!","danger","small",2e3)};e.razorPayCaptureCheckout(t,a,o)},f=function(){t.statusText="Waiting for payment confirmation.";var a=function(e){e&&e.data?y(e.data.transaction):(t.closePayTMModal(),showAlert(e&&e.message||"Something went wrong.","danger","large",5e3))},o=function(e){t.closePayTMModal(),showAlert(e&&e.message||"Something went wrong.","danger","large",5e3)};w.pg=2,e.manageTransactions(w,a,o)};t.verifyOtpForPaytm=function(){t.isLoading=!0,t.statusText="Verifying OTP",t.isEnterOtpView=!1;var a=function(e){if(e&&e.success&&e.data){var a=e.data.balance||0;a>=t.paytmObj.data.amount/100?f():(t.statusText="Balance : "+a,t.isFailedAttempt=!0)}},o=function(e){t.statusText="Entered OTP was incorrect. Re-enter to proceed.",t.paytmObj.otp="",t.isLoading=!1,t.isEnterOtpView=!0},n={otp:t.paytmObj.otp};e.verifyOtpForPaytm(n,a,o)},t.hidePaytmShowRazorpay=function(){$(".razorpay-container").css("display","block"),$("#seamlessPaytm").modal("hide")},t.otpInputFocused=!1,t.otpInputFilled=!1,t.validateOtpLength=function(){t.paytmObj.otp?0==t.paytmObj.otp.length?t.otpInputFilled=!1:t.paytmObj.otp.length>0?t.otpInputFilled=!0:6==t.paytmObj.otp.length&&$(".otp").blur():t.otpInputFilled=!1},t.closePayTMModal=function(){$("#seamlessPaytm").addClass("fade").modal("hide").on("hidden.bs.modal",function(){$(this).removeClass("fade")}),$(".razorpay-container").css("display","none"),h()},t.genOtpForPaytm=function(){t.paytmObj.otp="",t.isEnterOtpView=!1,t.isLoading=!0,t.statusText="Sending OTP to "+t.paytmObj.data.mobile,t.isOpenPaytmErrorBox=!1;var a=function(e){e&&e.data&&(t.isLoading=!1,t.isEnterOtpView=!0,t.statusText="An OTP has been sent on "+t.paytmObj.data.mobile)},o=function(e){t.isOpenPaytmErrorBox=!0,e||showAlert("Please check your internet connection.","error","small",2e3)};e.genOtpForPaytm({mobile:t.paytmObj.data.mobile},a,o)};var h=function(){var t={};t[s]=l,t[r]="",t[i]="";var a=function(t){t&&t.data},o=function(t){t?t.hasOwnProperty("message")?showAlert(t.message,"error","small",2e3):showAlert("Something went wrong!","error","small",2e3):showAlert("Please check your internet connection.","error","small",2e3)};e.razorPayCaptureCheckout(t,a,o)},w={},O=function(e){w=e.pack||{},w.txnId=e.data.transaction||"";var r=e.data.razorpayClientParams||{};l=r.order_id||"",t.paytmObj.description=r.description;var s={key:r.key||"",amount:r.amount||0,name:r.name||"",description:r.description||"",image:"/assets/img/brand/logo-small.png",handler:function(t){g(t||{})},order_id:r.order_id||"",prefill:{name:a,email:o,contact:n},theme:{color:"#16d4d9"},external:{wallets:["paytm"],handler:function(e){t.paytmObj.data=e||{},t.paytmObj.data.mobile=e.contact||"9876543210",$("#seamlessPaytm").modal("show"),$(".razorpay-container").css("display","none"),c(),t.genOtpForPaytm()}},modal:{ondismiss:function(){h()},escape:!1}},i=new Razorpay(s);i.open()}}]);
var app=app||{};app.controller("releasePlanCtrl",["$scope","$rootScope","TB","subscriptionService",function(t,e,a,s){t.statusClass="",t.notificationTextArr=s.notificationArr,t.featuresArr=[],e.$on("TOGGLE_RELEASE_PLAN_MODAL",function(e,a){o(a.toOpen,a.toMature),t.extraFeatures=a.data||[]}),e.$on("TOGGLE_RELEASE_PLAN_MATURITY",function(t,e){i(e.toMature)});var i=function(e){t.statusClass=e?"in mature":"in"},o=function(e){t.statusClass=e?"in":"",e||s.handleMaturityOfModal(!0),s.handleBodyScroll()};t.hideReleasePlan=function(){o(!1)},t.testPackBtnClicked=function(t,e){t=validateArr(t);for(var a=[],i=0;i<t.length;i++)a.push(t[i].pid||"");s.testPackBtnClicked(a.join(","),e)};var r=function(t){return parseInt(t)!=t&&!isNaN(new Date(t).getTime())};t.isValidDate=function(t){return r(t)},t.getDateObj=function(t){return new Date(t)},t.sortFunction=function(t,e){for(var a=0;a<t.length;a++)for(var s=t[a].children||[],i=0;i<s.length;i++)"datetime"==s[i].type.toLowerCase()&&(t[a].sortValue=new Date(s[i].title).getTime()||(new Date).getTime());return sortFunction(t,"sortValue","number","asc")}}]),app.controller("calculateSavingsCtrl",["$scope","$rootScope","TB","subscriptionService",function(t,e,a,s){t.statusClass=!1,t.isShowCalc=!1,t.subsObj={},e.$on("TOGGLE_CALCULATE_SAVINGS_MODAL",function(e,a){t.subsObj=a.subsObj,t.subscriptionTotal={cost:0,baseCost:0,testCount:0,baseTestCount:0,eachTestCost:0,tidsObj:{},commonTids:{}},t.calcTotal={cost:0,baseCost:0,testCount:0,baseTestCount:0,eachTestCost:0,tidsObj:{},commonTids:{}},t.isCalcBtnDisabled=!0,t.toggleModal(a.toOpen),t.calcData=o(a.data[0]||[]),t.chooseCourseUIDS=i(a.data[1]||[])}),t.toggleModal=function(e){t.statusClass=e?t.statusClass?"in mature":"in":"",e||s.handleMaturityOfModal(!0),s.handleBodyScroll()},t.subscribeNowBtnClicked=function(){s.purchaseSubscriptionEventFire(t.subsObj)};var i=function(t){for(var e=[],a={},s=0,i=0,o=0;o<t.length;o++){i=0,s=Math.ceil(t[o].exams.length/3),a={},a.course=t[o].course,a.isChecked=!1,a.examsUI=[];for(var r=0;r<s;r++)a.examsUI.push([t[o].exams[i]&&{title:t[o].exams[i].title,isChecked:!1}||{},t[o].exams[i+1]&&{title:t[o].exams[i+1].title,isChecked:!1}||{},t[o].exams[i+2]&&{title:t[o].exams[i+2].title,isChecked:!1}||{}]),i+=3;e.push(a)}return e};t.isPreferred=!0;var o=function(e){for(var a=[],s={},i=0;i<e.length;i++)s={},s.title=e[i].title,s.cost=e[i].cost,s.testCount=e[i].testCount,s.isChecked=e[i].isChecked||!1,s.testArrObj=e[i].testArrObj||[],a.push(s),c(t.subscriptionTotal,s.testArrObj,!0),t.subscriptionTotal.testCount=Object.keys(t.subscriptionTotal.tidsObj).length;return t.subscriptionTotal.cost=t.subsObj.hasOwnProperty("newCost")?t.subsObj.newCost:t.subsObj.cost,t.subscriptionTotal.testCount=t.subscriptionTotal.baseTestCount-n(t.subscriptionTotal.commonTids||{}),t.subscriptionTotal.eachTestCost=Math.round(t.subscriptionTotal.cost/t.subscriptionTotal.testCount)||0,a},r=function(t){var e=0;for(var a in t)e+=t[a].cost*t[a].count;return e},n=function(t){var e=0;for(var a in t)e+=t[a].count;return e},c=function(t,e,a){for(var s=0;s<e.length;s++)a?(t.tidsObj.hasOwnProperty(e[s].tid)?t.commonTids[e[s].tid]?t.commonTids[e[s].tid].count+=1:(t.commonTids[e[s].tid]={},t.commonTids[e[s].tid].cost=e[s].cost,t.commonTids[e[s].tid].count=1):t.tidsObj[e[s].tid]=e[s].cost,t.baseCost+=e[s].cost,t.baseTestCount+=1):t.tidsObj.hasOwnProperty(e[s].tid)&&(t.commonTids[e[s].tid]?t.commonTids[e[s].tid].count>1?t.commonTids[e[s].tid].count-=1:delete t.commonTids[e[s].tid]:delete t.tidsObj[e[s].tid],t.baseCost-=e[s].cost,t.baseTestCount-=1)};t.calculateTotal=function(e){t.isCalcBtnDisabled=!u(),e.isChecked?(c(t.calcTotal,e.testArrObj,e.isChecked),t.calcTotal.cost=t.calcTotal.baseCost-r(t.calcTotal.commonTids||{}),t.calcTotal.testCount=t.calcTotal.baseTestCount-n(t.calcTotal.commonTids||{})):(c(t.calcTotal,e.testArrObj,e.isChecked),t.calcTotal.cost=t.calcTotal.baseCost-r(t.calcTotal.commonTids||{}),t.calcTotal.testCount=t.calcTotal.baseTestCount-n(t.calcTotal.commonTids||{})),t.calcTotal.eachTestCost=Math.round(t.calcTotal.cost/t.calcTotal.testCount)||0,t.isPreferred=!t.calcTotal.cost||!(t.calcTotal.cost<t.subscriptionTotal.cost)};var l=function(t,e){for(var a=0;a<t.length;a++)t[a][0].isChecked=e,t[a][1].isChecked=e,t[a][2].isChecked=e};t.isCalcBtnDisabled=!0;var u=function(){for(var e=0;e<t.calcData.length;e++)if(t.calcData[e].isChecked)return!0;return!1},d=function(){for(var e=0;e<t.chooseCourseUIDS.length;e++)for(var a=0;a<t.chooseCourseUIDS[e].examsUI.length;a++)for(var s=0;s<t.chooseCourseUIDS[e].examsUI[a].length;s++)if(t.chooseCourseUIDS[e].examsUI[a][s].hasOwnProperty("isChecked")&&t.chooseCourseUIDS[e].examsUI[a][s].isChecked)return!1;return!0};t.checkSelectedExam=function(e){t.isCalcBtnDisabled=d();for(var a=0;a<e.examsUI.length;a++)for(var s=0;s<e.examsUI[a].length;s++)if(e.examsUI[a][s].hasOwnProperty("isChecked")&&!e.examsUI[a][s].isChecked)return void(e.isChecked=!1);e.isChecked=!0},t.checkSelectedCourse=function(e){e.isChecked?l(e.examsUI,!0):l(e.examsUI,!1),t.isCalcBtnDisabled=d()},t.hideCalcSavings=function(){t.toggleModal(!1),s.handleMaturityOfModal(),t.isShowCalc=!1},t.calculateSavingBtnClicked=function(){for(var e=0;e<t.calcData.length;e++){for(var a=0;a<t.chooseCourseUIDS.length;a++)for(var s=0;s<t.chooseCourseUIDS[a].examsUI.length;s++)t.chooseCourseUIDS[a].examsUI[s][0].title==t.calcData[e].title&&(t.calcData[e].isChecked=t.chooseCourseUIDS[a].examsUI[s][0].isChecked),t.chooseCourseUIDS[a].examsUI[s][1].title==t.calcData[e].title&&(t.calcData[e].isChecked=t.chooseCourseUIDS[a].examsUI[s][1].isChecked),t.chooseCourseUIDS[a].examsUI[s][2].title==t.calcData[e].title&&(t.calcData[e].isChecked=t.chooseCourseUIDS[a].examsUI[s][2].isChecked);t.calcData[e].isChecked&&t.calculateTotal(t.calcData[e])}t.isShowCalc=!0,scrollToTop(".modal-hero-content",400)}}]),app.controller("testPackCtrl",["$scope","$rootScope","TB","subscriptionService",function(t,e,a,s){t.notificationTextArr=s.notificationArr,t.statusClass="",t.ReleasePackDetails=[],e.$on("TOGGLE_TEST_PACK_MODAL",function(e,a){o(a.toOpen,a.toMature),t.getReleasePackDetails(a.productIds,a.status||"released")}),e.$on("TOGGLE_TEST_PACK_MATURITY",function(t,e){i(e.toMature)}),t.getReleasePackDetails=function(e,s){var i=function(t){t=validateArr(t);for(var e=0,a=0;a<t.length;a++)e+=t[a].qCount||0;return e||0},o=function(t){return{title:t.title||"",questionsCount:i(t.pattern&&t.pattern.sections)||[],releaseDate:new Date(t.availFrom),availTillDate:new Date(t.availTill)}},r=function(t){for(var e={},a=t.items||[],s={packName:t.title,productMap:{}},i=0;i<a.length;i++){var r=a[i].pattern||{};e[r.title]||(e[r.title]={value:[],patternName:r.title}),e[r.title].value.push(o(a[i]))}return s.productMap=e,s},n=function(t){for(var e={},a=0;a<t.length;a++){t[a].items||[];e[t[a]._id]=r(t[a])}return e},c=function(e){t.testDetailsLoading=!1,t.releasePackDetails=n(e.data&&e.data.products)},l=function(e){t.testDetailsLoading=!1,t.releasePackDetails={},showAlert(e.message||"Something went wrong, Please try again.","error","sm",5e3)};t.testDetailsLoading=!0,a.getReleasePackProductDetails({pids:e,status:s},c,l)};var i=function(e){t.statusClass=e?"in mature":"in"},o=function(e){t.statusClass=e?"in":"",e||s.handleMaturityOfModal(!0),s.handleBodyScroll()};t.hideTestPack=function(){o(!1)}}]),app.controller("renewPlanCtrl",["$scope","$rootScope","TB","subscriptionService",function(t,e,a,s){t.statusClass="",t.notificationTextArr=s.notificationArr,e.$on("TOGGLE_RENEW_SUBSCRIPTION_PLAN_MODAL",function(t,e){o(e.toOpen)}),e.$on("TOGGLE_RENEW_SUBSCRIPTION_PLAN_MATURITY",function(t,e){i(e.toMature)});var i=function(e){t.statusClass=e?"in mature":"in"},o=function(e){t.statusClass=e?"in":"",e||s.handleMaturityOfModal(!0),s.handleBodyScroll()};t.showCalculationPlan=function(t){s.calcSavingsBtnClicked(t,t.calcData,t.courseSelectionDS)},t.hideRenewPlanModal=function(){o(!1)}}]),app.controller("SubscriptionHIW",["$scope",function(t){t.$on("$includeContentLoaded",function(){function t(){n=new YT.Player("subscriptionVideoPlayer",{height:"505",width:"900",videoId:"DyOMTC8g3lg",enablejsapi:1,events:{onReady:e,onStateChange:a},origin:window.location.origin,playerVars:{color:"white",loop:1,rel:0,showinfo:0}})}function e(t){t.target.playVideo()}function a(t){}function s(){n.pauseVideo()}function i(){n.playVideo()}var o=document.createElement("script");o.src="https://www.youtube.com/iframe_api";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(o,r);var n,c="#subscriptionVideoPlayer",l="#subscription-helper";$(l).on("shown.bs.modal",function(){void 0===$(c).attr("src")?(t(),makeVideosResponsive()):i()}),$(l).on("hide.bs.modal",function(){s()})})}]),app.service("subscriptionService",["$rootScope","$timeout",function(t,e){this.callDataLayerFunction=function(){e(function(){"undefined"!=typeof dataLayer?(dataLayer.push({event:"api.cb"}),console.log("data-layer called with argument {'event': 'api.cb'}")):console.log("data-layer does not exist")},2e3)},this.notificationArr=["Check the test release and expiry date by clicking on the Test Release Plan link for all exams."],this.modalHeroPathStack=[],this.calcSavingsBtnClicked=function(e,a,s){this.modalHeroPathStack.push("calculator"),t.$broadcast("TOGGLE_CALCULATE_SAVINGS_MODAL",{toOpen:!0,data:[a,s],subsObj:e}),this.handleMaturityOfModal(!1)},this.releasePlanBtnClicked=function(e){this.modalHeroPathStack.push("release-plan"),t.$broadcast("TOGGLE_RELEASE_PLAN_MODAL",{toOpen:!0,data:e}),this.handleMaturityOfModal(!1)},this.testPackBtnClicked=function(e,a){this.modalHeroPathStack.push("test-pack"),t.$broadcast("TOGGLE_TEST_PACK_MODAL",{toOpen:!0,productIds:e,status:0==a?"released":"upcoming"}),this.handleMaturityOfModal(!1)},this.renewSubscriptionBtnClicked=function(){this.modalHeroPathStack.push("renew-subscription"),t.$broadcast("TOGGLE_RENEW_SUBSCRIPTION_PLAN_MODAL",{toOpen:!0}),this.handleMaturityOfModal(!1)},this.toggleCalcMaturity=function(e){t.$broadcast("",{toOpen:!0,toMature:e})},this.toggleReleaseMaturity=function(e){t.$broadcast("TOGGLE_RELEASE_PLAN_MATURITY",{toMature:e})},this.toggleTestPackMaturity=function(e){t.$broadcast("TOGGLE_TEST_PACK_MATURITY",{toMature:e})},this.toggleRenewSubMaturity=function(e){t.$broadcast("TOGGLE_RENEW_SUBSCRIPTION_PLAN_MATURITY",{toMature:e})},this.purchaseSubscriptionEventFire=function(e){t.$broadcast("PURCHASE_SUBSCRIPTION_FROM_CALCULATOR",{data:e})},this.handleMaturityOfModal=function(t){var e="";if(t)this.modalHeroPathStack.pop(),e=this.modalHeroPathStack[this.modalHeroPathStack.length-1];else{if(!(this.modalHeroPathStack.length>1))return;e=this.modalHeroPathStack[this.modalHeroPathStack.length-2]}switch(e){case"calculator":this.toggleCalcMaturity(!t);break;case"release-plan":this.toggleReleaseMaturity(!t);break;case"test-pack":this.toggleTestPackMaturity(!t);break;case"renew-subscription":this.toggleRenewSubMaturity(!t);break;case"subscription":this.toggleRenewSubMaturity(!t)}},this.getCoursesString=function(t){for(var e="",a=0;a<t.length;a++)e+=t[a].name+" . ";return e},this.isShowFromTbLogic=function(t,e,a){for(var s=!1,i=0;i<t.courses.length;i++)if(a[t.courses[i].id]&&(this.getValidDays(a[t.courses[i].id].expiry)<0||a[t.courses[i].id].validity<t.validity)){s=!0;break}return(t.courses.length>1&&s||e.isActive)&&e.cost>0},this.getDiscount=function(t,e){return t>=e?t-e:0},this.getPurchasedSubsMap=function(t){var e={};t=validateArr(t);for(var a=0;a<t.length;a++)this.subsBundleIdToObjMap[t[a]._id]&&(e[t[a]._id]={expiryInDays:this.getValidDays(t[a].expiry),expiryInDaysString:"",expiryDate:new Date(t[a].expiry),purchaseDate:new Date(new Date(t[a].expiry)-this.convertNanosecToMillisec(this.subsBundleIdToObjMap[t[a]._id].validity)),courses:t[a].courses,isExpired:!((new Date).getTime()<=new Date(t[a].expiry).getTime())},e[t[a]._id].expiryInDaysString=e[t[a]._id].expiryInDays>1?e[t[a]._id].expiryInDays+" Days":e[t[a]._id].expiryInDays+"Day");return e};var a=function(t){for(var e=0,a=0;a<t.length;a++)e+=t[a].cost;return e},s={released:"released test packs",upcoming:"upcoming test packs",expected:"expected test packs"},i=function(t){for(var e=[],i={},o={},r=0;r<t.length;r++)if((t[r].title.toLowerCase()==s.released||t[r].title.toLowerCase()==s.upcoming)&&t[r].children)for(var n=0;n<t[r].children.length;n++)for(var c=1;c<t[r].children[n].children.length;c++)i={},i.title=t[r].children[n].children[c].children[0].title,o.hasOwnProperty(i.title)?(i.testCount=parseInt(t[r].children[n].children[c].children[1].title)+e[o[i.title]].testCount,i.testArrObj=t[r].children[n].children[c].children[4].meta,i.cost=a(i.testArrObj)+e[o[i.title]].cost,i.testArrObj=i.testArrObj.concat(e[o[i.title]].testArrObj)):(i.testCount=parseInt(t[r].children[n].children[c].children[1].title),i.testArrObj=t[r].children[n].children[c].children[4].meta,i.cost=a(i.testArrObj),o[i.title]=e.length),e[o[i.title]]=i;return e},o=function(t){for(var e=[],a={},i={},o={},r=0;r<t.length;r++)if((t[r].title.toLowerCase()==s.released||t[r].title.toLowerCase()==s.upcoming)&&t[r].children)for(var n=0;n<t[r].children.length;n++)if(a={},a.course=t[r].children[n].meta.course,o.hasOwnProperty(a.course)){a.exams=e[o[a.course].pos].exams;for(var c=1;c<t[r].children[n].children.length;c++)i={},i.title=t[r].children[n].children[c].children[0].title,o[a.course].hasOwnProperty(i.title)||(o[a.course][i.title]=a.exams.length,a.exams[o[a.course][i.title]]=i);e[o[a.course].pos]=a}else{o[a.course]={pos:e.length},a.exams=[];for(var c=1;c<t[r].children[n].children.length;c++)i={},i.title=t[r].children[n].children[c].children[0].title,o[a.course].hasOwnProperty(i.title)||(o[a.course][i.title]=a.exams.length,a.exams[o[a.course][i.title]]=i);e.push(a)}return e},r=function(t,e){for(var a=0,s=0;s<e.length;s++)t.hasOwnProperty(e[s])&&a++;return a},n=function(t){for(var e=[],a={},i=0;i<t.length;i++)if((t[i].title.toLowerCase()==s.released||t[i].title.toLowerCase()==s.upcoming)&&t[i].children)for(var o=0;o<t[i].children.length;o++)for(var r=1;r<t[i].children[o].children.length;r++){e=t[i].children[o].children[r].children[4].meta;for(var n=0;n<e.length;n++)a[e[n].tid]=1}return a},c=function(t,e){for(var a=0,s=0;s<t.courses.length;s++)if(e.hasOwnProperty(t.courses[s].id)&&(a=new Date(e[t.courses[s].id].expiry).getTime(),a-(new Date).getTime()>0))return!0;return!1};this.processSubscriptionObject=function(t,e,a,s){s=s?s:[];var u={},d=function(t){var e=864e11;return Math.round(t/e)},h=function(e,a){if(t.isHidden)return e.isActive&&!!a&&!a.isExpired;if(0===e.cost){if(a&&a.purchaseDate){var s=new Date(a.purchaseDate).setHours(0,0,0,0),i=s+864e5;return(new Date).getTime()>=s&&(new Date).getTime()<=i}return!1}return e.cost>0};u.id=t._id||"-1",u.availTill=new Date(t.availTill)||new Date,u.category=t.category||"",u.cost=Math.round(this.calculateSubsBundleCost(t,e))||0,u.oldCost=t.oldCost||t.cost||0,u.completePackCost=t.cost||0,u.couponGoldenRatio=getRoundedFloat(u.cost/u.completePackCost,2)||1,u.coursesObjArr=t.courses||[],u.courseNamesArr=getSpecificKeyArrFromArrayOfObjects(t.courses,"name"),u.coupon=t.offerCoupon||{},u.description=t.description||"",u.pattern=u.pattern||{},u.title=t.title||"",u.recommendedFor=t.recommendedFor||"",u.offerText=0==t.cost?"FREE":u.discountText,u.type=t.type||"others",u.isActive=!!a[t._id],u.isShow=h(u,a[t._id]),u.specificExamObjArr=t.specificExams,u.cardClass=this.getSubscriptionCardClass(t),u.subTitle="",u.coursesStr=this.getCoursesString(t.courses),u.featureArr=t.features||[],u.items=t.items||[],u.discount=this.getDiscount(u.oldCost,u.cost),u.colorHex=l(t.colorHex),u.validity=this.getValidMonth(t.validity)||0,u.validityInDaysTemp=d(t.validity||0),u.validityInDaysTemp%30===0?u.validityStringTemp=u.validityInDaysTemp/30>1?u.validityInDaysTemp/30+" Months":u.validityInDaysTemp/30+" Month":u.validityStringTemp=u.validityInDaysTemp>1?u.validityInDaysTemp+" days":u.validityInDaysTemp+" day",u.validityInDays=30*u.validity||0,u.subStrInSubCard=12==u.validity?"For 1 Year":u.validity>1?"For "+u.validity+" Months":"For "+u.validity+" Month",u.validityString=u.validity>1?u.validity+" Months":u.validity+" Month",u.extraFeatures=t.extraFeatures||[],u.totalTest=this.getTotalTestInBundle(t.extraFeatures),u.calcData=i(t.extraFeatures||[]),u.courseSelectionDS=o(t.extraFeatures||[]),u.isActive&&t.hasOwnProperty("hasExtendedValidity")&&t.hasExtendedValidity&&(u.hasExtendedValidity=t.hasExtendedValidity);var p=n(t.extraFeatures||[]);return u.attemptedTest=r(p,s),u.isActive?(u.isExpired=!(new Date(a[u.id].expiryDate).getTime()-(new Date).getTime()>0),u.isExpired?u.statusClass="subs-expired":(u.attemptedPercent=Math.round(100*u.attemptedTest/u.totalTest).toString()+"%",u.statusClass="subs-active")):c(t,e)?u.statusClass="subs-inactive subs-upgrade":u.statusClass="subs-inactive",u};var l=function(t){return t=t?t:"ffffff",t.indexOf("#")!=-1?t:"#"+t};this.mockTestSubsFilter=function(t,e,a){var s=[],i="";for(var o in e)e[o].expiryInDays<=0&&(i+=this.getCoursesString(e[o].courses));for(var r=0;r<a.length;r++)e[a[r].id]&&e[a[r].id].expiryInDays>0||i.trim()&&a[r].coursesStr.toLowerCase().indexOf(t.toLowerCase())!=-1&&a[r].coursesStr.toLowerCase().indexOf(i.toLowerCase())!=-1&&s.push(a[r]);return s},this.getTotalTestInBundle=function(t){t=validateArr(t);for(var e=0,a=0;a<t.length;a++)if((t[a].title.toLowerCase()==s.released||t[a].title.toLowerCase()==s.upcoming)&&t[a].children)for(var i=0;i<t[a].children.length;i++)e+=parseInt(t[a].children[i].meta.testCount);return e},this.getValidMonth=function(t){var e=2592e12;return Math.round(t/e)},this.getValidDays=function(t){var e=new Date(t).getTime()-(new Date).getTime();return Math.round(e/864e5)},this.getSubscriptionCardClass=function(t){var e="subs-inactive";return e},this.getCoursesString=function(t){for(var e=[],a=0;a<t.length;a++)e.push(t[a].name);return e.join(" . ")},this.subsBundleIdToObjMap={},this.convertNanosecToMillisec=function(t){return t/1e6},this.calculateSubsBundleCost=function(t,e){var a={},s=0,i=1,o=t.validity,r=t.items||[],n=0;if(r.length)for(var c=0;c<r.length;c++)a=this.subsBundleIdToObjMap[r[c].id]||{},n+=a.cost,s+=this.calculateSubsCost(a,e,o);else n=t.cost,s=t.cost;return i=t.cost/n,s*i},this.calculateSubsCost=function(t,e,a){if(t.courses&&e.hasOwnProperty(t.courses[0].id)){var s=e[t.courses[0].id].expiry-(new Date).getTime(),i=this.convertNanosecToMillisec(a);if(s>i)return 0;s<0&&(s=0);var o=0;return i-s>0&&(o=(i-s)/i),t.cost*o}return t.cost||0},this.getCourseToExpiryMap=function(t){var e={};t=validateArr(t);for(var a=0;a<t.length;a++)for(var s=0;s<t[a].courses.length;s++)if(e.hasOwnProperty(t[a].courses[s].id)){var i=e[t[a].courses[s].id].expiry,o=new Date(t[a].expiry).getTime();o>i&&(e[t[a].courses[s].id].expiry=o,e[t[a].courses[s].id].subsId=t[a]._id)}else e[t[a].courses[s].id]={},e[t[a].courses[s].id].expiry=new Date(t[a].expiry).getTime(),e[t[a].courses[s].id].subsId=t[a]._id;return e},this.handleBodyScroll=function(){this.modalHeroPathStack&&this.modalHeroPathStack.length>=1?$("body").addClass("modal-open"):$("body").removeClass("modal-open")},this.getRoundedToTens=function(t){return t=Math.floor(t),t+=9,t=10*Math.floor(t/10),t=t%10>=5?t+10:t}}]);
var TB=TB||{};!function(){function e(e,n){function s(e){if(window){var r=e+"-practice",o=window.location.href||"",t=o.split("//").length&&o.split("//")[1]||"";window.location.search&&(t=t.split("?")[0]);var n=t.split("/");n.splice(0,1);var s=n[0],a=d+"-practice",i="";s===d?(n[0]=e,i="/"+n.join("/"),window.location.href=i):s===a?(i="/"+r,window.location.href=i):window.location.reload()}}function a(e){showLoader("Changing Course. Please wait.");var r=function(r){forceSessionRefresh(!0);var o={id:e.id||"",name:e.name||""};TB.UpdateCurrentCourseInStorage(o),s(e.url)},o=function(e){e?showAlert(e.message||"Something went wrong, Please contact at support@testbook.com","error","large",5e3):showAlert("Please check your internet connection or contact at support@testbook.com","error","large",5e3),hideLoader()},t={course:e.id};n.setCurrentCourse(t,r,o)}var i="/tb-money",c={},u=$("#sid")&&$("#sid").val()||-1,l=Object.prototype.hasOwnProperty;this.tbCourseArr=JSON.parse($("#course_info")&&$("#course_info").val()||"[]"),this.showStuCourseDropdown=!0;var d=document.getElementById("curCourseURL")&&document.getElementById("curCourseURL").value||"";this.stuObj={isShowCoBrandingLogo:!1,coBrandingLogoSrc:"",currentCourseObj:{},enrollmentsArr:[],profilePic:"",isLoggedIn:isLoggedIn()||!1,tbMoney:0},this.updateCurrentCourse=function(e){return a(e),!1};var g={},f=this,h=function(e){var r={id:e,name:g[e]&&g[e].abbr||"",url:g[e]&&g[e].URL||""};return r},p=function(e,r){for(var o=0;o<e.length;o++)if(e[o].course&&e[o].course.id==r)return o;return-1};e.$on(r,function(e,r){r&&(f.stuObj.currentCourseObj=h(r.courseId||""))}),e.$on(t,function(e,r){r&&(f.showStuCourseDropdown=!1)}),e.$on(o,function(e,r){if(r)if(r.isEnrolled){var o={course:h(r.courseId||"")};Object.keys(o).length&&f.stuObj.enrollmentsArr.push(o)}else{var t=p(f.stuObj.enrollmentsArr,r.courseId||"");t!==-1&&f.stuObj.enrollmentsArr.splice(t,1)}});var b=function(e){for(var r={},o=0;o<e.length;o++)if(e[o].isGroup)for(var t=0;t<e[o].courses.length;t++)r[e[o].courses[t].id]=e[o].courses[t];else r[e[o].id]=e[o];return r},O=function(e){for(var r=[],o=0;o<e.length;o++)g[e[o].course.id]&&(e[o].course.url=g[e[o].course.id].URL,e[o].course.hasOwnProperty("isInactive")&&e[o].course.isInactive||r.push(e[o]));return r};this.isShowNav=function(e){return e!==i||this.stuObj&&0!==this.stuObj.tbMoney};var m=function(){var e=function(e){if(e.hasOwnProperty("message"))showAlert(e.message||"Something went wrong please contact at support@testbook.com","error","small",5e3);else{c=e.data||{};var r=l.call(c,"streaks")&&l.call(c.streaks,"practise")&&l.call(c.streaks.practise,"coins"),o=l.call(c,"streaks")&&l.call(c.streaks,"questions")&&l.call(c.streaks.questions,"coins");l.call(c,"cobrandingInfo")&&c.cobrandingInfo.logo&&(f.stuObj.coBrandingLogoSrc=c.cobrandingInfo.logo,f.stuObj.isShowCoBrandingLogo=!0),l.call(c,"currentCourse")&&c.currentCourse.id&&(f.stuObj.currentCourseObj=c.currentCourse),l.call(c,"image")&&c.image&&(f.stuObj.profilePic=c.image),l.call(c,"enrollments")&&c.enrollments.length&&(f.stuObj.enrollmentsArr=O(c.enrollments)),l.call(c,"referral")&&l.call(c.referral,"coins")&&(f.stuObj.tbMoney+=c.referral.coins),r&&(f.stuObj.tbMoney+=c.streaks.practise.coins),o&&(f.stuObj.tbMoney+=c.streaks.questions.coins),l.call(c,"coinsExpensed")&&(f.stuObj.tbMoney-=c.coinsExpensed),l.call(c,"referral")&&(f.stuObj.referral=c.referral)}};g=b(f.tbCourseArr),"-1"!=u&&TB.GetStudentFromStorage(e)};angular.element(document).ready(function(){$(".js-group-one, #js-header-options-sidebar .course-btn").click(function(e){e.stopPropagation(),e.preventDefault(),$(this).toggleClass("active"),$(this).parent().children("ul").slideToggle()})}),m()}var r="COURSE_CHANGED",o="COURSE_ENROLLED_DE_ENROLLED",t="REMOVE_STU_COURSE_DROPDOWN",n=angular.module("tbHeaderApp",["Testbook"]);n.controller("headerCtrl",["$scope","TB",e])}();
var TB=TB||{};!function(){function e(){return{restrict:"E",scope:{},controller:["$scope","TB",t],templateUrl:"/views/partials/components/subfooter-seo.html"}}function t(e,t){var o=function(){return{anchorTag:"",link:""}},n=function(){return{title:"",links:[]}},s=function(){return{id:"",URL:"",type:"",name:"",sections:[],SEO:{title:"",description:"",keywords:[],URL:"",rel:[]}}},r="absent",i=window.location.host+window.location.pathname,a="ls_seo",c={};e.isSubFooterPresent=!1,e.subFooterSections=[];var l=function(e){for(var t=[],s=0;s<e.length;s++){var r=n();r.title=e[s].title||"";for(var i=0;i<e[s].links.length;i++){var a=o();a.link=e[s].links[i].link||"",a.anchorTag=e[s].links[i].anchorTag||"",r.links.push(a)}t.push(r)}return t},u=function(){var o=function(t){if(t.data.hasOwnProperty("id")&&""!==t.data.id){t=t.data;var o=s();o.id=t.id,o.URL=t.URL||"",o.type=t.pageType||"",o.name=t.name||"",o.sections=l(t.sections||[]),e.subFooterSections=o.sections,e.subFooterSections.length&&(e.isSubFooterPresent=!0),c[i]=o,setLocalStorage(a,JSON.stringify(c),.5)}},n=function(e){e&&e.message&&e.message.indexOf("SEO does not exists")!==-1&&(c[i]=r,setLocalStorage(a,JSON.stringify(c),.5))};if(c=JSON.parse(getLocalStorage(a)||"{}"),c.hasOwnProperty(i))c.PAGE_URL!==r?(e.subFooterSections=c[i].sections||[],e.subFooterSections.length&&(e.isSubFooterPresent=!0)):c.PAGE_URL===r&&(e.isSubFooterPresent=!1);else{var u={url:i,fields:"URL,name,pageType,sections"};t.getPageSEO(u,o,n)}};u()}var o=angular.module("SEO",["Testbook"]);o.directive("subFooter",e)}();
!function(){"use strict";function e(){var t,r=($("#js-scholarship-banner").outerHeight()||0)+52,o=$(".js-offer-course-list"),s=0;o&&o.length?(clearTimeout(t),o.stick_in_parent({offset_top:r,sticky_class:"stuck-to-parent"})):s<5&&(s+=1,t=setTimeout(function(){e()},1e3))}$(document).ready(function(){e(),$(document).on("loaded.tb.announcement-banner closed.tb.announcement-banner closed.tb.app-promotion-banner shown.tb.app-promotion-banner toggled.tb.announcement-banner",function(){$(".js-offer-course-list").trigger("sticky_kit:detach"),e()})});var t=angular.module("offersApp",["Testbook","formValidations","tbHeaderApp","mobileVerification","SEO"]);t.controller("offersController",["$scope","$timeout","$interval","$sce","TB","$rootScope","userDetailValidations","subscriptionService",function(e,t,r,o,s,a,i,n){function u(){setTimeout(function(){var t=e.availableCoursesArr[0]&&e.availableCoursesArr[0].textId||"nothingIdElement007";if(document.getElementById(t)){initScrollToAnchorHref();var r=getURLParameterValue("course")||"";r="#"+r,"#"!=r&&$(r).length&&$("html, body").animate({scrollTop:$(r).offset().top-100})}else u()},1e3)}var c="headerText",d={"Bank PO":1,"Bank Clerk":2,"SSC CGL":3,Railways:4,Insurance:5,RBI:6,"BSNL TTA":7,"SSC JE EE":8,"SSC JE ME":9,"GATE CE":50,"GATE CS":51,"GATE EC":52,"GATE EE":53,"GATE ME":54,Aptitude:70};e.isLoggedIn=!1,e.sid=-1,e.curCourseURL="",e.mobileVerifiedMsg="";var l=864e5;a.$on(MOBILE_SUCCESSFULLY_VERIFIED,function(t,r){e.isMobileVerified=!0,e.mobileVerifiedMsg="Congratulations! Mobile verification is complete, please proceed with your transaction.",document.getElementById("mobile-verification-status").value=1}),e.setTimerForCurrentTime=function(){r(function(){e.currentTime=e.currentTime+1e3},1e3)},e.getRemainingTime=function(t){var r=new Date(t.coupon.expiresOn).getTime(),o=e.getDaysDiff(r,e.currentTime),s=(r-e.currentTime)/1e3;if(o<0||s<0)return 0;if(l<1e3*s){o=e.getDaysDiff(r,e.currentTime);var a=o>1?o+" DAYS":o+" DAY";return a}var i=s%60,n=Math.floor(s/60)%60,u=Math.floor(s/3600);return p(u)+":"+p(n)+":"+p(i)};var p=function(e){return e<10&&e>-1?"0"+e:""+e};e.isDuplicate=function(e,t,r){e=validateArr(e);for(var o=0;o<e.length;o++)if(e[o][t]==r)return!0;return!1},e.coursesCatObj={gate:[],nonGate:[]},e.getAvailableCoursesArr=function(t){var r={};t=validateArr(t);for(var o=0;o<t.length;o++){for(var s=0;s<t[o].courses.length;s++){var a=t[o].courses[s]||{};r[a.id]=a}t[o].courses[0].name.toLowerCase().search("gate")==-1||e.isDuplicate(e.coursesCatObj.gate,"id",t[o].courses[0].id)?t[o].courses[0].name.toLowerCase().search("gate")!=-1||e.isDuplicate(e.coursesCatObj.nonGate,"id",t[o].courses[0].id)||(t[o].courses[0].textId=e.getTextId(t[o].courses[0].name),e.coursesCatObj.nonGate.push(t[o].courses[0]),d[d]||(d[t[o].courses[0].name]=25)):(t[o].courses[0].textId=e.getTextId(t[o].courses[0].name),e.coursesCatObj.gate.push(t[o].courses[0]),d[d]||(d[t[o].courses[0].name]=60))}var t=[];for(var i in r)r.hasOwnProperty(i)&&t.push({id:r[i].id,textId:e.getTextId(r[i].name)});return t},e.availableCoursesArr=[],e.coursesProductsArr=[],e.productCount=0,e.testsCount=0,e.productToPurchase={},e.getOffersSCB=function(t){e.currentTime=1e3*t.data.current_time||(new Date).getTime(),e.setTimerForCurrentTime(),t&&t.data&&t.data.categories&&t.data.categories.length&&e.setAllCategories(t.data.categories);var r=C(t&&t.data&&t.data.offerProducts,!0),o=C(t&&t.data&&t.data.offerProducts,!1);if(r=validateArr(r),o=validateArr(o),e.sid!=-1)g(r);else{n.subsBundleIdToObjMap=getCustomMap(r,"_id","",!0);for(var s=0;s<r.length;s++){var a=n.processSubscriptionObject(r[s],{},{});a.newCost=Math.round(e.getNewCost(a,a.couponGoldenRatio)),a.discountPercentage="percent"==a.coupon.discountType?a.coupon.discountValue:Math.floor(100*a.coupon.discountValue/a.cost),e.subsArr.push(a)}}if(o&&o.length){e.availableCoursesArr=e.getAvailableCoursesArr(o);var i=e.getSortedProducts(o)||[];e.coursesProductsArr=e.getCategorizedCourseProducts(i),e.productCount=o.length}var c=getURLParameterValue("pid");c&&e.pidToProductMap&&e.pidToProductMap[c]&&c&&e.pidToProductMap&&"upgrade"==e.pidToProductMap[c]["case"]?(e.productToPurchase=e.pidToProductMap[c],$("#upgradeComboModal").modal({keyboard:!1,backdrop:"static"})):c&&e.pidToProductMap&&e.pidToProductMap[c]?e.makePayment(e.pidToProductMap[c]):c&&e.pidToProductMap&&!e.pidToProductMap[c]&&showAlert("The Test Pack Or Part Of It Is Already Purchased.","error","sm",5e3),e.testsCount=e.getObjectLength(e.idToTestMap),u(),b(),hideLoader()},e.subsArr=[],e.purchasedSubsMap={},e.courseIdToExpiryMap={};var f=function(e){for(var t in e){var r=n.subsBundleIdToObjMap[e[t].subsId];e[t].validity=r&&r.validity}return e},g=function(t){t=validateArr(t);var r=function(r){if(r.data&&r.success){e.courseIdToExpiryMap=n.getCourseToExpiryMap(r.data.subscriptions);var o=r.data.subscriptions;n.subsBundleIdToObjMap=getCustomMap(t,"_id","",!0),e.courseIdToExpiryMap=f(e.courseIdToExpiryMap)}e.purchasedSubsMap=n.getPurchasedSubsMap(o)||{};for(var s=0;s<t.length;s++){var a=n.processSubscriptionObject(t[s],e.courseIdToExpiryMap,e.purchasedSubsMap);a.newCost=Math.round(e.getNewCost(a,a.couponGoldenRatio)),a.discountPercentage="percent"==a.coupon.discountType?a.coupon.discountValue:Math.floor(100*a.coupon.discountValue/a.cost),e.subsArr.push(a)}m(e.subsArr)},o=function(e){console.log(e)};s.getStuSubsPlan({},r,o)};e.isSubscriptionActive=!1;var m=function(t){t=validateArr(t);var r=function(t,r,o){for(var s=0;s<e.coursesProductsArr.length;s++)for(var a=e.coursesProductsArr[s][o]||[],i=0;i<a.length;i++)a[i].courses&&a[i].courses.length&&a[i].courses[0].id==r&&(a[i].cardClass+=" subs-active")};for(var o in e.courseIdToExpiryMap)if(e.courseIdToExpiryMap.hasOwnProperty(o)){var s=e.courseIdToExpiryMap[o].expiry-(new Date).getTime()>0;r(s,o,"products"),r(s,o,"combos")}};e.isShowSubscriptionCategory=function(){e.subsArr=validateArr(e.subsArr);for(var t=0;t<e.subsArr.length;t++)if(e.subsArr[t].isShow&&e.subsArr[t].statusClass.search("subs-active")==-1)return!0;return!1},e.getRoundedFloat=function(e,t){return getRoundedFloat(e,t)},e.showSubReleasePlan=function(e){n.releasePlanBtnClicked(e)},e.showCalculationPlan=function(e){n.calcSavingsBtnClicked(e,e.calcData,e.courseSelectionDS)},a.$on("PURCHASE_SUBSCRIPTION_FROM_CALCULATOR",function(t,r){e.addSubsBtnClicked(r.data)}),e.filteredRenewItems=[],e.showRenewSubscriptionModal=function(t){e.filteredRenewItems=n.mockTestSubsFilter(t.courseNamesArr[0],e.purchasedSubsMap,e.subsArr),n.renewSubscriptionBtnClicked()},e.addSubsBtnClicked=function(t){if(t.statusClass.search("subs-inactive")!=-1||t.statusClass.search("subs-upgrade")!=-1)if("-1"==e.sid){var r={};r[REDIRECT_URL_KEY]="/offers?pid="+t.id,r[c]="Sign up to subscribe courses",openSignUpSignInModal(r,!1)}else e.makePayment(t);else t.statusClass.search("subs-expired")!=-1&&e.showRenewSubscriptionModal(t)};var C=function(e,t){for(var r=[],e=validateArr(e),o=0;o<e.length;o++)!t||"subscription"!=e[o].type.toLowerCase()&&"subscription bundle"!=e[o].type.toLowerCase()?t||"subscription"==e[o].type.toLowerCase()||"subscription bundle"==e[o].type.toLowerCase()||r.push(e[o]):r.push(e[o]);return r},b=function(){t(function(){dataLayer?(console.log("data-layer called with argument {'event': 'api.cb'}"),dataLayer.push({event:"api.cb"})):console.log("data-layer does not exist")},2e3)};e.getOffersFCB=function(e){showAlert(e&&e.message&&"Something Went Wrong, Please Reload The Page","error","sm",3e3),hideLoader()},e.getTextId=function(e){return e.toLowerCase().split(" ").join("-")},e.getSortedProducts=function(e){e=validateArr(e);var t=[],r=0;for(var o in d)if(d.hasOwnProperty(o))for(var s=0;s<e.length;s++)e[s].courses[0].name==o&&(r+=1,e[s].order=r,t.push(e[s]));return t},e.getObjectLength=function(e){var t=0;for(var r in e)e.hasOwnProperty(r)&&(t+=1);return t},e.sid=-1,e.pidToProductMap={},e.getCategorizedCourseProducts=function(t){var r={},o=[];t=validateArr(t);for(var s={},a=0;a<t.length;a++)r[t[a].courses[0].id]||(r[t[a].courses[0].id]={products:[],combos:[],courseName:t[a].courses[0].name,courseId:t[a].courses[0].id}),"Combo Pack"==t[a].type?(s=e.processComboObject(t[a]),e.pidToProductMap[s.id]=s,r[t[a].courses[0].id].combos.push(s)):(s=e.processProductObject(t[a]),e.pidToProductMap[s.id]=s,r[t[a].courses[0].id].products.push(s));for(var i in r)if(r.hasOwnProperty(i)){r[i].textId=e.getTextId(r[i].courseName);var n=r[i].courseName;r[i].order=d[n],o.push(r[i])}return o},e.myTestsIdObjMAP={},e.getAllTestsOfComboPacks=function(t){var r=[];t=validateArr(t);for(var o=0;o<t.length;o++)if("test"!=t[o].type||e.checkIfTestAlreadyExistInArr(r,t[o].id))for(var s=t[o].items||[],a=t[o].purchased,i=0;i<s.length;i++){var n=s[i];n.isPurchased=a,a&&(e.myTestsIdObjMAP[s[i].id]=n),s[i].testDetails=e.getTestDetailsObj([n]),e.checkIfTestAlreadyExistInArr(r,t[o].id)||(s[i].pid=t[o].id,r.push(s[i]))}else r.push(e.getTestObj(t[o]));return r},e.getComboCardClass=function(e){var t="complete-pack";return e.specificExams&&e.specificExams.length&&(t+=" has-tags"),t},e.getProductCardClass=function(e){var t="complete-pack";return e.specificExams&&e.specificExams.length&&(t+=" has-tags"),t},e.totalTests=0,e.processComboObject=function(t){var r=e.getAllTestsOfComboPacks(t.items),o={};return o.id=t._id||"-1",o.availTill=new Date(t.availTill).getTime()||(new Date).getTime(),o.coupon=t.offerCoupon||{},o["case"]=t["case"]||"",o.courses=t.courses||{name:"",id:-1},o.description=t.description||"",o.discountText=t.discountText||"",o.features=t.features||[],o.items=t.items||[],o.releaseDate=t.releaseDate||new Date,o.specificExams=t.specificExams||[],o.title=t.title||"",o.type=t.type||"",o.logoURL=t.courseLogo||"//storage.googleapis.com/testbook/products/default.svg",o.tests=r||[],o.categorizedSortedPackTests=e.getCompleteSortedCategorizedItemsArr(r,"asc"),o.cardClass=e.getComboCardClass(o)||"",o.comboPackDetails=e.getComboPackDetailsObj(r)||{},o.oldCost=t.oldCost||t.cost||0,o.cost=t.cost||0,o.newCost=Math.floor(e.getNewCost(o)>=0?e.getNewCost(o):0),o},e.processProductObject=function(t){var r={};if(t.items&&t.items.length)for(var o=0;o<t.items.length;o++){var s=t.items[o];t.items[o].testDetails=e.getTestDetailsObj([s])}return r.id=t._id||"-1",r.availTill=new Date(t.availTill).getTime()||(new Date).getTime(),r["case"]=t["case"]||"",r.coupon=t.offerCoupon||{},r.courses=t.courses||{name:"",id:-1},r.description=t.description||"",r.discountText=t.discountText||"",r.features=t.features||[],r.items=t.items||[],r.releaseDate=t.releaseDate||new Date,r.specificExams=t.specificExams||[],r.title=t.title||"",r.type=t.type||"",r.categorizedSortedPackTests=e.getCompleteSortedCategorizedItemsArr(r.items,"test",!1,"asc")||[],r.cardClass=e.getProductCardClass(r)||"",r.packDetails=e.getTestDetailsObj(r.items)||{},r.oldCost=t.oldCost||t.cost||0,r.cost=t.cost||0,r.newCost=Math.floor(e.getNewCost(r)>=0?e.getNewCost(r):0),r},e.getTestDetailsObj=function(t){t=validateArr(t);for(var r={questionsCount:0,testsCount:t.length,time:0,marks:0},o=0;o<t.length;o++){var s=t[o].pattern;s=s&&s.time&&s.sections?t[o].pattern:{time:0,marks:0,sections:[]},r.questionsCount=r.questionsCount+e.getQuestionsCount(s.sections||[],"qCount"),r.time=r.time+s.time,r.marks=r.marks+e.getQuestionsCount(s.sections,"maxM")}return r},e.getNewCost=function(e,t){"subscription bundle"==e.type.toLowerCase()&&e.coupon&&"cash"==e.coupon.discountType&&(e.coupon.discountValue=e.coupon.discountValue*t);var r=e.cost||0;return e.coupon&&"cash"==e.coupon.discountType?r=e.cost-e.coupon.discountValue:e.coupon&&"percent"==e.coupon.discountType&&(r=e.cost-e.cost*e.coupon.discountValue/100,r="upgrade"==e["case"]?n.getRoundedToTens(r):r),r},e.getComboPackDetailsObj=function(t){t=validateArr(t);var r={},o=e.getCompleteSortedCategorizedItemsArr(t,"test",!1);return r.alreadyPurchasedTestsCount=e.checkForPartialCombo(t),r.remainingTestsCount=t.length-r.alreadyPurchasedTestsCount,r.testsArr=o,r.total=t.length,r},e.getAlreadyPurchasedTestCount=function(t){for(var r=0,o=0;o<t.length;o++){var s=t[o].id;e.myTestsIdObjMAP[s]&&(r+=1)}return r},e.checkForPartialCombo=function(e){e=validateArr(e);for(var t=0,r=0;r<e.length;r++)e[r].isPurchased&&(t+=1);return t},e.getQuestionsCount=function(e,t){e=validateArr(e);for(var r=0,o=0;o<e.length;o++)r+=e[o][t];return r},e.getDaysDiff=function(e,t){return e-=e%l,t-=t%l,(e-t)/l},e.checkIfTestAlreadyExistInArr=function(e,t){e=validateArr(e);for(var r=0;r<e.length;r++)if(e&&e[r]&&e[r].id==t)return!0;return!1},e.getSortedObjArrByKey=function(e,t,r){var o=function(e,o){return e[t]<o[t]?"asc"==r?-1:1:e[t]>o[t]?"asc"==r?1:-1:0};return e.sort(o)},e.allCategoryObjByName={},e.allCategoryObjById={},e.setAllCategories=function(t){t=validateArr(t),t=e.getSortedObjArrByKey(t,"order","asc");for(var r=0;r<t.length;r++){var o=t[r].name,s=t[r]._id;e.allCategoryObjByName[o]=t[r],e.allCategoryObjById[s]=t[r]}},e.idToTestMap={},e.getCompleteSortedCategorizedItemsArr=function(t,r){var o=[];for(var s in e.allCategoryObjById)if(e.allCategoryObjById.hasOwnProperty(s)){for(var a=e.allCategoryObjById[s],i={categoryId:s,categoryName:a.name,categoryOrder:a.order,orderBy:a.sort,sortOrder:a.sortOrder,value:[]},n=0;n<t.length;n++){var u=t[n],c=u&&u.category,d=u&&u.id;if(e.idToTestMap[d]=t[n],s==c){u.categoryObj=a;var l={};l=t[n],l.id&&i.value.push(l)}}i.value.length&&(i.alreadyPurchasedTestCount=e.getAlreadyPurchasedTestCount(i.value)||0,i.remainingTestsCount=i.value.length-i.alreadyPurchasedTestCount,r?i.value=e.getSortedObjArrByKey(i.value,i.orderBy,r):i.value=e.getSortedObjArrByKey(i.value,i.orderBy,i.sortOrder),o.push(i))}return o},e.packToShowInfo={},e.showPackInfo=function(r){e.packToShowInfo=r,t(function(){$(".js-bundle-details").addClass("in"),$("body").addClass("modal-open")},50)},e.hideBundleDetails=function(){$(".js-bundle-details").removeClass("in"),$("body").removeClass("modal-open")},e.isMobileVerified=!1,e.selectedProductForPurchase={};var h={};e.myCoins=0,e.addToCartHelper=function(t){e.makePayment(t)},e.makePayment=function(t){e.selectedProductForPurchase=t,e.isMobileVerified||"-1"==e.sid?e.makePaymentHelper(t):$("#verifyMobileModal").modal("show")},e.makePaymentHelper=function(t){if("-1"==e.sid){var r={};r[REDIRECT_URL_KEY]="/offers?pid="+t.id,r[c]="Sign up to avail the offer",openSignUpSignInModal(r,!1)}else{showLoader("Processing, Please Wait.");var o={coupon:t.coupon.code,ismobile:!1,products:t.id};o.pg=0,h.pack=o,s.manageTransactions(o,e.makePaymentSCB,e.makePaymentFCB)}},e.makePaymentSCB=function(t){hideLoader(),t.success&&(h.data=t.data||{},e.$broadcast("openRazorpayPrompt",h))},e.makePaymentFCB=function(e){showAlert(e&&e.message||"Something went wrong, Please try again.","error","sm",5e3),hideLoader()},e.addPacksToMyTestsViaSubscription=function(r,o){function a(s){o.splice(o.indexOf(r),1),hideLoader(),e.setTestsAddedStatus(!0),t(function(){e.setTestsAddedStatus(!1)},7e3)}function i(e){hideLoader(),showAlert(e.message||"Something went wrong, Please try again.","error","sm",3e3)}showLoader("Adding Tests To Your Account Please Wait."),s.addPacksToMyTestsViaSubscription({pid:r.id},a,i)},e.isShowFreeTestsStatus=!1,e.setTestsAddedStatus=function(t){e.isShowFreeTestsStatus=t},e.showFreeTestAddedStatus=function(){return e.isShowFreeTestsStatus},e.init=function(){showLoader("Loading Offers, Please Wait.");var t=function(t){var r={};if(t.data){var o=t.data.currentCourse?t.data.currentCourse.id:"",a=$("#course_info").val()||"[]",i=JSON.parse(a);i.forEach(function(t){if(t.isGroup){for(var r=0;r<t.courses.length;r++)if(t.courses[r].id==o){e.curCourseURL=t.courses[r].URL;break}}else t.id==o&&(e.curCourseURL=t.URL)}),e.isMobileVerified=t.data.mobileVerified?1:0,e.sid=t.data._id?t.data._id:-1}e.sid&&e.sid!=-1&&(e.isLoggedIn=!0,r.sid=e.sid),s.getOffers(r,e.getOffersSCB,e.getOffersFCB)};TB.GetStudentFromStorage(t)},e.init()}])}();