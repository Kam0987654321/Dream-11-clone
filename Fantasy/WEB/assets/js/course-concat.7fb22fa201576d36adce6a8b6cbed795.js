"use strict";function _typeof(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}!function(t){if("function"==typeof define&&define.amd)define(["jquery"],t);else if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports){var i;try{i=require("jquery")}catch(e){i=null}module.exports=t(i)}else window&&(window.Slider=t(window.jQuery))}(function(t){var i;return function(t){function i(){}function e(t){function e(i){i.prototype.option||(i.prototype.option=function(i){t.isPlainObject(i)&&(this.options=t.extend(!0,this.options,i))})}function o(i,e){t.fn[i]=function(o){if("string"==typeof o){for(var a=s.call(arguments,1),h=0,l=this.length;h<l;h++){var r=this[h],p=t.data(r,i);if(p)if(t.isFunction(p[o])&&"_"!==o.charAt(0)){var d=p[o].apply(p,a);if(void 0!==d&&d!==p)return d}else n("no such method '"+o+"' for "+i+" instance");else n("cannot call methods on "+i+" prior to initialization; attempted to call '"+o+"'")}return this}var c=this.map(function(){var s=t.data(this,i);return s?(s.option(o),s._init()):(s=new e(this,o),t.data(this,i,s)),t(this)});return!c||c.length>1?c:c[0]}}if(t){var n="undefined"==typeof console?i:function(t){console.error(t)};return t.bridget=function(t,i){e(i),o(t,i)},t.bridget}}var s=Array.prototype.slice;e(t)}(t),function(t){function e(i,e){function s(t,i){var e="data-slider-"+i.replace(/_/g,"-"),s=t.getAttribute(e);try{return JSON.parse(s)}catch(o){return s}}this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1},"string"==typeof i?this.element=document.querySelector(i):i instanceof HTMLElement&&(this.element=i),e=e?e:{};for(var n=Object.keys(this.defaultOptions),a=0;a<n.length;a++){var h=n[a],l=e[h];l="undefined"!=typeof l?l:s(this.element,h),l=null!==l?l:this.defaultOptions[h],this.options||(this.options={}),this.options[h]=l}"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.tooltip_position="right";var r,p,d,c,u,m=this.element.style.width,_=!1,v=this.element.parentNode;if(this.sliderElem)_=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var f=document.createElement("div");f.className="slider-track",p=document.createElement("div"),p.className="slider-track-low",r=document.createElement("div"),r.className="slider-selection",d=document.createElement("div"),d.className="slider-track-high",c=document.createElement("div"),c.className="slider-handle min-slider-handle",c.setAttribute("role","slider"),c.setAttribute("aria-valuemin",this.options.min),c.setAttribute("aria-valuemax",this.options.max),u=document.createElement("div"),u.className="slider-handle max-slider-handle",u.setAttribute("role","slider"),u.setAttribute("aria-valuemin",this.options.min),u.setAttribute("aria-valuemax",this.options.max),f.appendChild(p),f.appendChild(r),f.appendChild(d);var g=Array.isArray(this.options.labelledby);if(g&&this.options.labelledby[0]&&c.setAttribute("aria-labelledby",this.options.labelledby[0]),g&&this.options.labelledby[1]&&u.setAttribute("aria-labelledby",this.options.labelledby[1]),!g&&this.options.labelledby&&(c.setAttribute("aria-labelledby",this.options.labelledby),u.setAttribute("aria-labelledby",this.options.labelledby)),this.ticks=[],Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(a=0;a<this.options.ticks.length;a++){var y=document.createElement("div");y.className="slider-tick",this.ticks.push(y),f.appendChild(y)}r.className+=" tick-slider-selection"}if(f.appendChild(c),f.appendChild(u),this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",a=0;a<this.options.ticks_labels.length;a++){var b=document.createElement("div"),k=0===this.options.ticks_positions.length,E=this.options.reversed&&k?this.options.ticks_labels.length-(a+1):a;b.className="slider-tick-label",b.innerHTML=this.options.ticks_labels[E],this.tickLabels.push(b),this.tickLabelContainer.appendChild(b)}var x=function(t){var i=document.createElement("div");i.className="tooltip-arrow";var e=document.createElement("div");e.className="tooltip-inner",t.appendChild(i),t.appendChild(e)},C=document.createElement("div");C.className="tooltip tooltip-main",C.setAttribute("role","presentation"),x(C);var w=document.createElement("div");w.className="tooltip tooltip-min",w.setAttribute("role","presentation"),x(w);var L=document.createElement("div");L.className="tooltip tooltip-max",L.setAttribute("role","presentation"),x(L),this.sliderElem.appendChild(f),this.sliderElem.appendChild(C),this.sliderElem.appendChild(w),this.sliderElem.appendChild(L),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),v.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(t&&(this.$element=t(this.element),this.$sliderElem=t(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),o[this.options.scale]&&(this.options.scale=o[this.options.scale]),_===!0&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","top","width","height"].forEach(function(t){this._removeProperty(this.trackLow,t),this._removeProperty(this.trackSelection,t),this._removeProperty(this.trackHigh,t)},this),[this.handle1,this.handle2].forEach(function(t){this._removeProperty(t,"left"),this._removeProperty(t,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(t){this._removeProperty(t,"left"),this._removeProperty(t,"top"),this._removeProperty(t,"margin-left"),this._removeProperty(t,"margin-top"),this._removeClass(t,"right"),this._removeClass(t,"top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=m,this.options.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&this.options.ticks.length>0&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this.options.range?this._state.value=[this.options.value,this.options.max]:this._state.value=this.options.value,this.trackLow=p||this.trackLow,this.trackSelection=r||this.trackSelection,this.trackHigh=d||this.trackHigh,"none"===this.options.selection&&(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")),this.handle1=c||this.handle1,this.handle2=u||this.handle2,_===!0)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),a=0;a<this.ticks.length;a++)this._removeClass(this.ticks[a],"round triangle hide");var P=["round","triangle","custom"],T=P.indexOf(this.options.handle)!==-1;if(T)for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),a=0;a<this.ticks.length;a++)this._addClass(this.ticks[a],this.options.handle);this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchCapable&&this.sliderElem.addEventListener("touchstart",this.mousedown,!1),this.sliderElem.addEventListener("mousedown",this.mousedown,!1),this.resize=this._resize.bind(this),window.addEventListener("resize",this.resize,!1),"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)),this.options.enabled?this.enable():this.disable()}var s={formatInvalidInputErrorMsg:function(t){return"Invalid input value '"+t+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},o={linear:{toValue:function(t){var i=t/100*(this.options.max-this.options.min),e=!0;if(this.options.ticks_positions.length>0){for(var s,o,n,a=0,h=1;h<this.options.ticks_positions.length;h++)if(t<=this.options.ticks_positions[h]){s=this.options.ticks[h-1],n=this.options.ticks_positions[h-1],o=this.options.ticks[h],a=this.options.ticks_positions[h];break}var l=(t-n)/(a-n);i=s+l*(o-s),e=!1}var r=e?this.options.min:0,p=r+Math.round(i/this.options.step)*this.options.step;return p<this.options.min?this.options.min:p>this.options.max?this.options.max:p},toPercentage:function(t){if(this.options.max===this.options.min)return 0;if(this.options.ticks_positions.length>0){for(var i,e,s,o=0,n=0;n<this.options.ticks.length;n++)if(t<=this.options.ticks[n]){i=n>0?this.options.ticks[n-1]:0,s=n>0?this.options.ticks_positions[n-1]:0,e=this.options.ticks[n],o=this.options.ticks_positions[n];break}if(n>0){var a=(t-i)/(e-i);return s+a*(o-s)}}return 100*(t-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(t){var i=0===this.options.min?0:Math.log(this.options.min),e=Math.log(this.options.max),s=Math.exp(i+(e-i)*t/100);return s=this.options.min+Math.round((s-this.options.min)/this.options.step)*this.options.step,s<this.options.min?this.options.min:s>this.options.max?this.options.max:s},toPercentage:function(t){if(this.options.max===this.options.min)return 0;var i=Math.log(this.options.max),e=0===this.options.min?0:Math.log(this.options.min),s=0===t?0:Math.log(t);return 100*(s-e)/(i-e)}}};if(i=function(t,i){return e.call(this,t,i),this},i.prototype={_init:function(){},constructor:i,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,enabled:!0,formatter:function(t){return Array.isArray(t)?t[0]+" : "+t[1]:t},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,scale:"linear",focus:!1,tooltip_position:null,labelledby:null},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(t,i,e){t||(t=0);var s=this.getValue();this._state.value=this._validateInputValue(t);var o=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=o(this._state.value[0]),this._state.value[1]=o(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=o(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),"after"===this.options.selection?this._state.value[1]=this.options.max:this._state.value[1]=this.options.min),this.options.max>this.options.min?this._state.percentage=[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:this._state.percentage=[0,0,100],this._layout();var n=this.options.range?this._state.value:this._state.value[0];return this._setDataVal(n),i===!0&&this._trigger("slide",n),s!==n&&e===!0&&this._trigger("change",{oldValue:s,newValue:n}),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),t&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(t,i){return this._bindNonQueryEventHandler(t,i),this},off:function(i,e){t?(this.$element.off(i,e),this.$sliderElem.off(i,e)):this._unbindNonQueryEventHandler(i,e)},getAttribute:function(t){return t?this.options[t]:this.options},setAttribute:function(t,i){return this.options[t]=i,this},refresh:function(){return this._removeSliderEventHandlers(),e.call(this,this.element,this.options),t&&t.data(this.element,"slider",this),this},relayout:function(){return this._layout(),this},_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.showTooltip&&(this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle2.removeEventListener("focus",this.showTooltip,!1)),this.hideTooltip&&(this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("blur",this.hideTooltip,!1)),this.showTooltip&&this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.hideTooltip&&this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.mousedown,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1),window.removeEventListener("resize",this.resize,!1)},_bindNonQueryEventHandler:function(t,i){void 0===this.eventToCallbackMap[t]&&(this.eventToCallbackMap[t]=[]),this.eventToCallbackMap[t].push(i)},_unbindNonQueryEventHandler:function(t,i){var e=this.eventToCallbackMap[t];if(void 0!==e)for(var s=0;s<e.length;s++)if(e[s]===i){e.splice(s,1);break}},_cleanUpEventCallbacksMap:function(){for(var t=Object.keys(this.eventToCallbackMap),i=0;i<t.length;i++){var e=t[i];this.eventToCallbackMap[e]=null}},_showTooltip:function(){this.options.tooltip_split===!1?(this._addClass(this.tooltip,"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none"),this._state.over=!0},_hideTooltip:function(){this._state.inDrag===!1&&this.alwaysShowTooltip!==!0&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this._state.over=!1},_layout:function(){var t;if(t=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]],this.handle1.style[this.stylePos]=t[0]+"%",this.handle1.setAttribute("aria-valuenow",this._state.value[0]),this.handle2.style[this.stylePos]=t[1]+"%",this.handle2.setAttribute("aria-valuenow",this._state.value[1]),Array.isArray(this.options.ticks)&&this.options.ticks.length>0){var i="vertical"===this.options.orientation?"height":"width",e="vertical"===this.options.orientation?"marginTop":"marginLeft",s=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var o=0;if(0===this.options.ticks_positions.length)"vertical"!==this.options.orientation&&(this.tickLabelContainer.style[e]=-s/2+"px"),o=this.tickLabelContainer.offsetHeight;else for(n=0;n<this.tickLabelContainer.childNodes.length;n++)this.tickLabelContainer.childNodes[n].offsetHeight>o&&(o=this.tickLabelContainer.childNodes[n].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=o+"px")}for(var n=0;n<this.options.ticks.length;n++){var a=this.options.ticks_positions[n]||this._toPercentage(this.options.ticks[n]);this.options.reversed&&(a=100-a),this.ticks[n].style[this.stylePos]=a+"%",this._removeClass(this.ticks[n],"in-selection"),this.options.range?a>=t[0]&&a<=t[1]&&this._addClass(this.ticks[n],"in-selection"):"after"===this.options.selection&&a>=t[0]?this._addClass(this.ticks[n],"in-selection"):"before"===this.options.selection&&a<=t[0]&&this._addClass(this.ticks[n],"in-selection"),this.tickLabels[n]&&(this.tickLabels[n].style[i]=s+"px","vertical"!==this.options.orientation&&void 0!==this.options.ticks_positions[n]?(this.tickLabels[n].style.position="absolute",this.tickLabels[n].style[this.stylePos]=a+"%",this.tickLabels[n].style[e]=-s/2+"px"):"vertical"===this.options.orientation&&(this.tickLabels[n].style.marginLeft=this.sliderElem.offsetWidth+"px",this.tickLabelContainer.style.marginTop=this.sliderElem.offsetWidth/2*-1+"px"))}}var h;if(this.options.range){h=this.options.formatter(this._state.value),this._setText(this.tooltipInner,h),this.tooltip.style[this.stylePos]=(t[1]+t[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px"),"vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");var l=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner_min,l);var r=this.options.formatter(this._state.value[1]);this._setText(this.tooltipInner_max,r),this.tooltip_min.style[this.stylePos]=t[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-top",-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-left",-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=t[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-top",-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-left",-this.tooltip_max.offsetWidth/2+"px")}else h=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,h),this.tooltip.style[this.stylePos]=t[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");if("vertical"===this.options.orientation)this.trackLow.style.top="0",this.trackLow.style.height=Math.min(t[0],t[1])+"%",this.trackSelection.style.top=Math.min(t[0],t[1])+"%",this.trackSelection.style.height=Math.abs(t[0]-t[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(t[0],t[1])-Math.abs(t[0]-t[1])+"%";else{this.trackLow.style.left="0",this.trackLow.style.width=Math.min(t[0],t[1])+"%",this.trackSelection.style.left=Math.min(t[0],t[1])+"%",this.trackSelection.style.width=Math.abs(t[0]-t[1])+"%",this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(t[0],t[1])-Math.abs(t[0]-t[1])+"%";var p=this.tooltip_min.getBoundingClientRect(),d=this.tooltip_max.getBoundingClientRect();"bottom"===this.options.tooltip_position?p.right>d.left?(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top="",this.tooltip_max.style.bottom="22px"):(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top=this.tooltip_min.style.top,this.tooltip_max.style.bottom=""):p.right>d.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top)}},_resize:function(t){this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this._layout()},_removeProperty:function(t,i){t.style.removeProperty?t.style.removeProperty(i):t.style.removeAttribute(i)},_mousedown:function(t){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var i=this._getPercentage(t);if(this.options.range){var e=Math.abs(this._state.percentage[0]-i),s=Math.abs(this._state.percentage[1]-i);this._state.dragged=e<s?0:1}else this._state.dragged=0;this._state.percentage[this._state.dragged]=i,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0;var o=this._calculateValue();return this._trigger("slideStart",o),this._setDataVal(o),this.setValue(o,!1,!0),this._pauseEvent(t),this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0},_triggerFocusOnHandle:function(t){0===t&&this.handle1.focus(),1===t&&this.handle2.focus()},_keydown:function(t,i){if(!this._state.enabled)return!1;var e;switch(i.keyCode){case 37:case 40:e=-1;break;case 39:case 38:e=1}if(e){if(this.options.natural_arrow_keys){var s="vertical"===this.options.orientation&&!this.options.reversed,o="horizontal"===this.options.orientation&&this.options.reversed;(s||o)&&(e=-e)}var n=this._state.value[t]+e*this.options.step;return this.options.range&&(n=[t?this._state.value[0]:n,t?n:this._state.value[1]]),this._trigger("slideStart",n),this._setDataVal(n),this.setValue(n,!0,!0),this._setDataVal(n),this._trigger("slideStop",n),this._layout(),this._pauseEvent(i),!1}},_pauseEvent:function(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1},_mousemove:function(t){if(!this._state.enabled)return!1;var i=this._getPercentage(t);this._adjustPercentageForRangeSliders(i),this._state.percentage[this._state.dragged]=i,this._layout();var e=this._calculateValue(!0);return this.setValue(e,!0,!0),!1},_adjustPercentageForRangeSliders:function(t){if(this.options.range){var i=this._getNumDigitsAfterDecimalPlace(t);i=i?i-1:0;var e=this._applyToFixedAndParseFloat(t,i);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],i)<e?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],i)>e&&(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0)}},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!1,this._state.over===!1&&this._hideTooltip();var t=this._calculateValue(!0);return this._layout(),this._setDataVal(t),this._trigger("slideStop",t),!1},_calculateValue:function(t){var i;if(this.options.range?(i=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(i[0]=this._toValue(this._state.percentage[0]),i[0]=this._applyPrecision(i[0])),100!==this._state.percentage[1]&&(i[1]=this._toValue(this._state.percentage[1]),i[1]=this._applyPrecision(i[1]))):(i=this._toValue(this._state.percentage[0]),i=parseFloat(i),i=this._applyPrecision(i)),t){for(var e=[i,1/0],s=0;s<this.options.ticks.length;s++){var o=Math.abs(this.options.ticks[s]-i);o<=e[1]&&(e=[this.options.ticks[s],o])}if(e[1]<=this.options.ticks_snap_bounds)return e[0]}return i},_applyPrecision:function(t){var i=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(t,i)},_getNumDigitsAfterDecimalPlace:function(t){var i=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return i?Math.max(0,(i[1]?i[1].length:0)-(i[2]?+i[2]:0)):0},_applyToFixedAndParseFloat:function(t,i){var e=t.toFixed(i);return parseFloat(e)},_getPercentage:function(t){!this.touchCapable||"touchstart"!==t.type&&"touchmove"!==t.type||(t=t.touches[0]);var i=t[this.mousePos],e=this._state.offset[this.stylePos],s=i-e,o=s/this._state.size*100;return o=Math.round(o/this._state.percentage[2])*this._state.percentage[2],this.options.reversed&&(o=100-o),Math.max(0,Math.min(100,o))},_validateInputValue:function(t){if("number"==typeof t)return t;if(Array.isArray(t))return this._validateArray(t),t;throw new Error(s.formatInvalidInputErrorMsg(t))},_validateArray:function(t){for(var i=0;i<t.length;i++){var e=t[i];if("number"!=typeof e)throw new Error(s.formatInvalidInputErrorMsg(e))}},_setDataVal:function(t){this.element.setAttribute("data-value",t),this.element.setAttribute("value",t),this.element.value=t},_trigger:function(i,e){e=e||0===e?e:void 0;var s=this.eventToCallbackMap[i];if(s&&s.length)for(var o=0;o<s.length;o++){var n=s[o];n(e)}t&&this._triggerJQueryEvent(i,e)},_triggerJQueryEvent:function(t,i){var e={type:t,value:i};this.$element.trigger(e),this.$sliderElem.trigger(e)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(t,i){"undefined"!=typeof t.textContent?t.textContent=i:"undefined"!=typeof t.innerText&&(t.innerText=i)},_removeClass:function(t,i){for(var e=i.split(" "),s=t.className,o=0;o<e.length;o++){var n=e[o],a=new RegExp("(?:\\s|^)"+n+"(?:\\s|$)");s=s.replace(a," ")}t.className=s.trim()},_addClass:function(t,i){for(var e=i.split(" "),s=t.className,o=0;o<e.length;o++){var n=e[o],a=new RegExp("(?:\\s|^)"+n+"(?:\\s|$)"),h=a.test(s);h||(s+=" "+n)}t.className=s.trim()},_offsetLeft:function(t){return t.getBoundingClientRect().left},_offsetTop:function(t){for(var i=t.offsetTop;(t=t.offsetParent)&&!isNaN(t.offsetTop);)i+=t.offsetTop,"BODY"!==t.tagName&&(i-=t.scrollTop);return i},_offset:function(t){return{left:this._offsetLeft(t),top:this._offsetTop(t)}},_css:function(i,e,s){if(t)t.style(i,e,s);else{var o=e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,i){return i.toUpperCase()});i.style[o]=s}},_toValue:function(t){return this.options.scale.toValue.apply(this,[t])},_toPercentage:function(t){return this.options.scale.toPercentage.apply(this,[t])},_setTooltipPosition:function(){var t=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var i=this.options.tooltip_position||"right",e="left"===i?"right":"left";t.forEach(function(t){this._addClass(t,i),t.style[e]="100%"}.bind(this))}else"bottom"===this.options.tooltip_position?t.forEach(function(t){this._addClass(t,"bottom"),t.style.top="22px"}.bind(this)):t.forEach(function(t){this._addClass(t,"top"),t.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}},t){var n=t.fn.slider?"bootstrapSlider":"slider";t.bridget(n,i),t(function(){t("input[data-provide=slider]")[n]()})}}(t),i});
(function(){var t,i;t=this.jQuery||window.jQuery,i=t(window),t.fn.stick_in_parent=function(o){var e,s,r,n,l,a,c,p,d,u,f,h,g;for(null==o&&(o={}),g=o.sticky_class,a=o.inner_scrolling,h=o.recalc_every,f=o.parent,d=o.offset_top,p=o.spacer,r=o.bottoming,null==d&&(d=0),null==f&&(f=void 0),null==a&&(a=!0),null==g&&(g="is_stuck"),e=t(document),null==r&&(r=!0),u=function(t){var i,o,e;return window.getComputedStyle?(i=t[0],o=window.getComputedStyle(t[0]),e=parseFloat(o.getPropertyValue("width"))+parseFloat(o.getPropertyValue("margin-left"))+parseFloat(o.getPropertyValue("margin-right")),"border-box"!==o.getPropertyValue("box-sizing")&&(e+=parseFloat(o.getPropertyValue("border-left-width"))+parseFloat(o.getPropertyValue("border-right-width"))+parseFloat(o.getPropertyValue("padding-left"))+parseFloat(o.getPropertyValue("padding-right"))),e):t.outerWidth(!0)},n=function(o,s,n,l,c,y,k,m){var v,b,w,_,x,P,V,F,C,z,I,A;if(!o.data("sticky_kit")){if(o.data("sticky_kit",!0),x=e.height(),V=o.parent(),null!=f&&(V=V.closest(f)),!V.length)throw"failed to find stick parent";if(w=!1,v=!1,I=null!=p?p&&o.closest(p):t("<div />"),I&&I.css("position",o.css("position")),F=function(){var t,i,r;if(!m)return x=e.height(),t=parseInt(V.css("border-top-width"),10),i=parseInt(V.css("padding-top"),10),s=parseInt(V.css("padding-bottom"),10),n=V.offset().top+t+i,l=V.height(),w&&(w=!1,v=!1,null==p&&(o.insertAfter(I),I.detach()),o.css({position:"",top:"",width:"",bottom:""}).removeClass(g),r=!0),c=o.offset().top-(parseInt(o.css("margin-top"),10)||0)-d,y=o.outerHeight(!0),k=o.css("float"),I&&I.css({width:u(o),height:y,display:o.css("display"),"vertical-align":o.css("vertical-align"),"float":k}),r?A():void 0},F(),y!==l)return _=void 0,P=d,z=h,A=function(){var t,u,f,b,C,A;if(!m)return f=!1,null!=z&&(z-=1,z<=0&&(z=h,F(),f=!0)),f||e.height()===x||(F(),f=!0),b=i.scrollTop(),null!=_&&(u=b-_),_=b,w?(r&&(C=b+y+P>l+n,v&&!C&&(v=!1,o.css({position:"fixed",bottom:"",top:P}).trigger("sticky_kit:unbottom"))),b<c&&(w=!1,P=d,null==p&&("left"!==k&&"right"!==k||o.insertAfter(I),I.detach()),t={position:"",width:"",top:""},o.css(t).removeClass(g).trigger("sticky_kit:unstick")),a&&(A=i.height(),y+d>A&&(v||(P-=u,P=Math.max(A-y,P),P=Math.min(d,P),w&&o.css({top:P+"px"}))))):b>c&&(w=!0,t={position:"fixed",top:P},t.width="border-box"===o.css("box-sizing")?o.outerWidth()+"px":o.width()+"px",o.css(t).addClass(g),null==p&&(o.after(I),"left"!==k&&"right"!==k||I.append(o)),o.trigger("sticky_kit:stick")),w&&r&&(null==C&&(C=b+y+P>l+n),!v&&C)?(v=!0,"static"===V.css("position")&&V.css({position:"relative"}),o.css({position:"absolute",bottom:s,top:"auto"}).trigger("sticky_kit:bottom")):void 0},C=function(){return F(),A()},b=function(){if(m=!0,i.off("touchmove",A),i.off("scroll",A),i.off("resize",C),t(document.body).off("sticky_kit:recalc",C),o.off("sticky_kit:detach",b),o.removeData("sticky_kit"),o.css({position:"",bottom:"",top:"",width:""}),V.position("position",""),w)return null==p&&("left"!==k&&"right"!==k||o.insertAfter(I),I.remove()),o.removeClass(g)},i.on("touchmove",A),i.on("scroll",A),i.on("resize",C),t(document.body).on("sticky_kit:recalc",C),o.on("sticky_kit:detach",b),setTimeout(A,0)}},l=0,c=this.length;l<c;l++)s=this[l],n(t(s));return this}}).call(this);
"use strict";(function(){var r;r=angular.module("ui.bootstrap.showErrors",[]),r.directive("showErrors",["$timeout","showErrorsConfig","$interpolate",function(r,t,i){var n,u,e;return u=function(r){var i;return i=t.trigger,r&&null!=r.trigger&&(i=r.trigger),i},n=function(r){var i;return i=t.showSuccess,r&&null!=r.showSuccess&&(i=r.showSuccess),i},e=function(t,e,s,F){var o,h,a,l,c,g,f,D;if(o=!1,c=t.$eval(s.showErrors),g=n(c),D=u(c),h=e[0].querySelector(".form-control[name]"),l=angular.element(h),a=i(l.attr("name")||"")(t),!a)throw"show-errors element has no child input elements with a 'name' attribute and a 'form-control' class";return l.bind(D,function(){return o=!0,f(F[a].$invalid)}),t.$watch(function(){return F[a]&&F[a].$invalid},function(r){if(o)return f(r)}),t.$on("show-errors-check-validity",function(){return f(F[a].$invalid)}),t.$on("show-errors-reset",function(){return r(function(){return e.removeClass("has-error"),e.removeClass("has-success"),o=!1},0,!1)}),f=function(r){if(e.toggleClass("has-error",r),g)return e.toggleClass("has-success",!r)}},{restrict:"A",require:"^form",compile:function(r,t){if(t.showErrors.indexOf("skipFormGroupCheck")===-1&&!r.hasClass("form-group")&&!r.hasClass("input-group"))throw"show-errors element does not have the 'form-group' or 'input-group' class";return e}}}]),r.provider("showErrorsConfig",function(){var r,t;r=!1,t="blur",this.showSuccess=function(t){return r=t},this.trigger=function(r){return t=r},this.$get=function(){return{showSuccess:r,trigger:t}}})}).call(this);var validateForms=angular.module("formValidations",[]);validateForms.service("userDetailValidations",function(){this.error={},this.propsWithLimitOnLength={},this.propsWithLimitOnMinLength={},this.isValidEmail=function(r){var t=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return t.test(r)},this.isValidDate=function(r){return"Invalid Date"!==new Date(r)&&!isNaN(new Date(r))},this.limitOnMinLength=function(r,t,i){return this.propsWithLimitOnMinLength[t]?null:this.propsWithLimitOnMinLength[t]=i,!(!r[t]||!r[t].length)&&i<r[t].length},this.limitOnLength=function(r,t,i){return this.propsWithLimitOnLength[t]?null:this.propsWithLimitOnLength[t]=i,!!(r[t]&&r[t].length&&r[t].length>i)&&(r[t]=r[t].slice(0,i),i==r[t].length)},this.acceptOnlyNumber=function(r,t){if(!(r&&r[t]&&r[t].length>0))return!0;var i=r[t][r[t].length-1];isNaN(i)&&(r[t]=r[t].slice(0,r[t].length-1))},this.isValid=function(r,t,i){var n="undefined"!=typeof t[i]&&""!=t[i]&&!r[i].$error.required&&!r[i].$error[i];return n&="email"!=i||this.isValidEmail(t[i]),n&="dob"!=i||this.isValidDate(t[i]),n&=!this.propsWithLimitOnLength[i]||t[i].length==this.propsWithLimitOnLength[i],n&=!this.propsWithLimitOnMinLength[i]||t[i].length>=this.propsWithLimitOnMinLength[i]},this.setError=function(r,t){this.error[r]=t},this.hasError=function(r){return!!this.error[r]}});
var app=app||{};app.controller("releasePlanCtrl",["$scope","$rootScope","TB","subscriptionService",function(t,e,a,s){t.statusClass="",t.notificationTextArr=s.notificationArr,t.featuresArr=[],e.$on("TOGGLE_RELEASE_PLAN_MODAL",function(e,a){o(a.toOpen,a.toMature),t.extraFeatures=a.data||[]}),e.$on("TOGGLE_RELEASE_PLAN_MATURITY",function(t,e){i(e.toMature)});var i=function(e){t.statusClass=e?"in mature":"in"},o=function(e){t.statusClass=e?"in":"",e||s.handleMaturityOfModal(!0),s.handleBodyScroll()};t.hideReleasePlan=function(){o(!1)},t.testPackBtnClicked=function(t,e){t=validateArr(t);for(var a=[],i=0;i<t.length;i++)a.push(t[i].pid||"");s.testPackBtnClicked(a.join(","),e)};var r=function(t){return parseInt(t)!=t&&!isNaN(new Date(t).getTime())};t.isValidDate=function(t){return r(t)},t.getDateObj=function(t){return new Date(t)},t.sortFunction=function(t,e){for(var a=0;a<t.length;a++)for(var s=t[a].children||[],i=0;i<s.length;i++)"datetime"==s[i].type.toLowerCase()&&(t[a].sortValue=new Date(s[i].title).getTime()||(new Date).getTime());return sortFunction(t,"sortValue","number","asc")}}]),app.controller("calculateSavingsCtrl",["$scope","$rootScope","TB","subscriptionService",function(t,e,a,s){t.statusClass=!1,t.isShowCalc=!1,t.subsObj={},e.$on("TOGGLE_CALCULATE_SAVINGS_MODAL",function(e,a){t.subsObj=a.subsObj,t.subscriptionTotal={cost:0,baseCost:0,testCount:0,baseTestCount:0,eachTestCost:0,tidsObj:{},commonTids:{}},t.calcTotal={cost:0,baseCost:0,testCount:0,baseTestCount:0,eachTestCost:0,tidsObj:{},commonTids:{}},t.isCalcBtnDisabled=!0,t.toggleModal(a.toOpen),t.calcData=o(a.data[0]||[]),t.chooseCourseUIDS=i(a.data[1]||[])}),t.toggleModal=function(e){t.statusClass=e?t.statusClass?"in mature":"in":"",e||s.handleMaturityOfModal(!0),s.handleBodyScroll()},t.subscribeNowBtnClicked=function(){s.purchaseSubscriptionEventFire(t.subsObj)};var i=function(t){for(var e=[],a={},s=0,i=0,o=0;o<t.length;o++){i=0,s=Math.ceil(t[o].exams.length/3),a={},a.course=t[o].course,a.isChecked=!1,a.examsUI=[];for(var r=0;r<s;r++)a.examsUI.push([t[o].exams[i]&&{title:t[o].exams[i].title,isChecked:!1}||{},t[o].exams[i+1]&&{title:t[o].exams[i+1].title,isChecked:!1}||{},t[o].exams[i+2]&&{title:t[o].exams[i+2].title,isChecked:!1}||{}]),i+=3;e.push(a)}return e};t.isPreferred=!0;var o=function(e){for(var a=[],s={},i=0;i<e.length;i++)s={},s.title=e[i].title,s.cost=e[i].cost,s.testCount=e[i].testCount,s.isChecked=e[i].isChecked||!1,s.testArrObj=e[i].testArrObj||[],a.push(s),c(t.subscriptionTotal,s.testArrObj,!0),t.subscriptionTotal.testCount=Object.keys(t.subscriptionTotal.tidsObj).length;return t.subscriptionTotal.cost=t.subsObj.hasOwnProperty("newCost")?t.subsObj.newCost:t.subsObj.cost,t.subscriptionTotal.testCount=t.subscriptionTotal.baseTestCount-n(t.subscriptionTotal.commonTids||{}),t.subscriptionTotal.eachTestCost=Math.round(t.subscriptionTotal.cost/t.subscriptionTotal.testCount)||0,a},r=function(t){var e=0;for(var a in t)e+=t[a].cost*t[a].count;return e},n=function(t){var e=0;for(var a in t)e+=t[a].count;return e},c=function(t,e,a){for(var s=0;s<e.length;s++)a?(t.tidsObj.hasOwnProperty(e[s].tid)?t.commonTids[e[s].tid]?t.commonTids[e[s].tid].count+=1:(t.commonTids[e[s].tid]={},t.commonTids[e[s].tid].cost=e[s].cost,t.commonTids[e[s].tid].count=1):t.tidsObj[e[s].tid]=e[s].cost,t.baseCost+=e[s].cost,t.baseTestCount+=1):t.tidsObj.hasOwnProperty(e[s].tid)&&(t.commonTids[e[s].tid]?t.commonTids[e[s].tid].count>1?t.commonTids[e[s].tid].count-=1:delete t.commonTids[e[s].tid]:delete t.tidsObj[e[s].tid],t.baseCost-=e[s].cost,t.baseTestCount-=1)};t.calculateTotal=function(e){t.isCalcBtnDisabled=!u(),e.isChecked?(c(t.calcTotal,e.testArrObj,e.isChecked),t.calcTotal.cost=t.calcTotal.baseCost-r(t.calcTotal.commonTids||{}),t.calcTotal.testCount=t.calcTotal.baseTestCount-n(t.calcTotal.commonTids||{})):(c(t.calcTotal,e.testArrObj,e.isChecked),t.calcTotal.cost=t.calcTotal.baseCost-r(t.calcTotal.commonTids||{}),t.calcTotal.testCount=t.calcTotal.baseTestCount-n(t.calcTotal.commonTids||{})),t.calcTotal.eachTestCost=Math.round(t.calcTotal.cost/t.calcTotal.testCount)||0,t.isPreferred=!t.calcTotal.cost||!(t.calcTotal.cost<t.subscriptionTotal.cost)};var l=function(t,e){for(var a=0;a<t.length;a++)t[a][0].isChecked=e,t[a][1].isChecked=e,t[a][2].isChecked=e};t.isCalcBtnDisabled=!0;var u=function(){for(var e=0;e<t.calcData.length;e++)if(t.calcData[e].isChecked)return!0;return!1},d=function(){for(var e=0;e<t.chooseCourseUIDS.length;e++)for(var a=0;a<t.chooseCourseUIDS[e].examsUI.length;a++)for(var s=0;s<t.chooseCourseUIDS[e].examsUI[a].length;s++)if(t.chooseCourseUIDS[e].examsUI[a][s].hasOwnProperty("isChecked")&&t.chooseCourseUIDS[e].examsUI[a][s].isChecked)return!1;return!0};t.checkSelectedExam=function(e){t.isCalcBtnDisabled=d();for(var a=0;a<e.examsUI.length;a++)for(var s=0;s<e.examsUI[a].length;s++)if(e.examsUI[a][s].hasOwnProperty("isChecked")&&!e.examsUI[a][s].isChecked)return void(e.isChecked=!1);e.isChecked=!0},t.checkSelectedCourse=function(e){e.isChecked?l(e.examsUI,!0):l(e.examsUI,!1),t.isCalcBtnDisabled=d()},t.hideCalcSavings=function(){t.toggleModal(!1),s.handleMaturityOfModal(),t.isShowCalc=!1},t.calculateSavingBtnClicked=function(){for(var e=0;e<t.calcData.length;e++){for(var a=0;a<t.chooseCourseUIDS.length;a++)for(var s=0;s<t.chooseCourseUIDS[a].examsUI.length;s++)t.chooseCourseUIDS[a].examsUI[s][0].title==t.calcData[e].title&&(t.calcData[e].isChecked=t.chooseCourseUIDS[a].examsUI[s][0].isChecked),t.chooseCourseUIDS[a].examsUI[s][1].title==t.calcData[e].title&&(t.calcData[e].isChecked=t.chooseCourseUIDS[a].examsUI[s][1].isChecked),t.chooseCourseUIDS[a].examsUI[s][2].title==t.calcData[e].title&&(t.calcData[e].isChecked=t.chooseCourseUIDS[a].examsUI[s][2].isChecked);t.calcData[e].isChecked&&t.calculateTotal(t.calcData[e])}t.isShowCalc=!0,scrollToTop(".modal-hero-content",400)}}]),app.controller("testPackCtrl",["$scope","$rootScope","TB","subscriptionService",function(t,e,a,s){t.notificationTextArr=s.notificationArr,t.statusClass="",t.ReleasePackDetails=[],e.$on("TOGGLE_TEST_PACK_MODAL",function(e,a){o(a.toOpen,a.toMature),t.getReleasePackDetails(a.productIds,a.status||"released")}),e.$on("TOGGLE_TEST_PACK_MATURITY",function(t,e){i(e.toMature)}),t.getReleasePackDetails=function(e,s){var i=function(t){t=validateArr(t);for(var e=0,a=0;a<t.length;a++)e+=t[a].qCount||0;return e||0},o=function(t){return{title:t.title||"",questionsCount:i(t.pattern&&t.pattern.sections)||[],releaseDate:new Date(t.availFrom),availTillDate:new Date(t.availTill)}},r=function(t){for(var e={},a=t.items||[],s={packName:t.title,productMap:{}},i=0;i<a.length;i++){var r=a[i].pattern||{};e[r.title]||(e[r.title]={value:[],patternName:r.title}),e[r.title].value.push(o(a[i]))}return s.productMap=e,s},n=function(t){for(var e={},a=0;a<t.length;a++){t[a].items||[];e[t[a]._id]=r(t[a])}return e},c=function(e){t.testDetailsLoading=!1,t.releasePackDetails=n(e.data&&e.data.products)},l=function(e){t.testDetailsLoading=!1,t.releasePackDetails={},showAlert(e.message||"Something went wrong, Please try again.","error","sm",5e3)};t.testDetailsLoading=!0,a.getReleasePackProductDetails({pids:e,status:s},c,l)};var i=function(e){t.statusClass=e?"in mature":"in"},o=function(e){t.statusClass=e?"in":"",e||s.handleMaturityOfModal(!0),s.handleBodyScroll()};t.hideTestPack=function(){o(!1)}}]),app.controller("renewPlanCtrl",["$scope","$rootScope","TB","subscriptionService",function(t,e,a,s){t.statusClass="",t.notificationTextArr=s.notificationArr,e.$on("TOGGLE_RENEW_SUBSCRIPTION_PLAN_MODAL",function(t,e){o(e.toOpen)}),e.$on("TOGGLE_RENEW_SUBSCRIPTION_PLAN_MATURITY",function(t,e){i(e.toMature)});var i=function(e){t.statusClass=e?"in mature":"in"},o=function(e){t.statusClass=e?"in":"",e||s.handleMaturityOfModal(!0),s.handleBodyScroll()};t.showCalculationPlan=function(t){s.calcSavingsBtnClicked(t,t.calcData,t.courseSelectionDS)},t.hideRenewPlanModal=function(){o(!1)}}]),app.controller("SubscriptionHIW",["$scope",function(t){t.$on("$includeContentLoaded",function(){function t(){n=new YT.Player("subscriptionVideoPlayer",{height:"505",width:"900",videoId:"DyOMTC8g3lg",enablejsapi:1,events:{onReady:e,onStateChange:a},origin:window.location.origin,playerVars:{color:"white",loop:1,rel:0,showinfo:0}})}function e(t){t.target.playVideo()}function a(t){}function s(){n.pauseVideo()}function i(){n.playVideo()}var o=document.createElement("script");o.src="https://www.youtube.com/iframe_api";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(o,r);var n,c="#subscriptionVideoPlayer",l="#subscription-helper";$(l).on("shown.bs.modal",function(){void 0===$(c).attr("src")?(t(),makeVideosResponsive()):i()}),$(l).on("hide.bs.modal",function(){s()})})}]),app.service("subscriptionService",["$rootScope","$timeout",function(t,e){this.callDataLayerFunction=function(){e(function(){"undefined"!=typeof dataLayer?(dataLayer.push({event:"api.cb"}),console.log("data-layer called with argument {'event': 'api.cb'}")):console.log("data-layer does not exist")},2e3)},this.notificationArr=["Check the test release and expiry date by clicking on the Test Release Plan link for all exams."],this.modalHeroPathStack=[],this.calcSavingsBtnClicked=function(e,a,s){this.modalHeroPathStack.push("calculator"),t.$broadcast("TOGGLE_CALCULATE_SAVINGS_MODAL",{toOpen:!0,data:[a,s],subsObj:e}),this.handleMaturityOfModal(!1)},this.releasePlanBtnClicked=function(e){this.modalHeroPathStack.push("release-plan"),t.$broadcast("TOGGLE_RELEASE_PLAN_MODAL",{toOpen:!0,data:e}),this.handleMaturityOfModal(!1)},this.testPackBtnClicked=function(e,a){this.modalHeroPathStack.push("test-pack"),t.$broadcast("TOGGLE_TEST_PACK_MODAL",{toOpen:!0,productIds:e,status:0==a?"released":"upcoming"}),this.handleMaturityOfModal(!1)},this.renewSubscriptionBtnClicked=function(){this.modalHeroPathStack.push("renew-subscription"),t.$broadcast("TOGGLE_RENEW_SUBSCRIPTION_PLAN_MODAL",{toOpen:!0}),this.handleMaturityOfModal(!1)},this.toggleCalcMaturity=function(e){t.$broadcast("",{toOpen:!0,toMature:e})},this.toggleReleaseMaturity=function(e){t.$broadcast("TOGGLE_RELEASE_PLAN_MATURITY",{toMature:e})},this.toggleTestPackMaturity=function(e){t.$broadcast("TOGGLE_TEST_PACK_MATURITY",{toMature:e})},this.toggleRenewSubMaturity=function(e){t.$broadcast("TOGGLE_RENEW_SUBSCRIPTION_PLAN_MATURITY",{toMature:e})},this.purchaseSubscriptionEventFire=function(e){t.$broadcast("PURCHASE_SUBSCRIPTION_FROM_CALCULATOR",{data:e})},this.handleMaturityOfModal=function(t){var e="";if(t)this.modalHeroPathStack.pop(),e=this.modalHeroPathStack[this.modalHeroPathStack.length-1];else{if(!(this.modalHeroPathStack.length>1))return;e=this.modalHeroPathStack[this.modalHeroPathStack.length-2]}switch(e){case"calculator":this.toggleCalcMaturity(!t);break;case"release-plan":this.toggleReleaseMaturity(!t);break;case"test-pack":this.toggleTestPackMaturity(!t);break;case"renew-subscription":this.toggleRenewSubMaturity(!t);break;case"subscription":this.toggleRenewSubMaturity(!t)}},this.getCoursesString=function(t){for(var e="",a=0;a<t.length;a++)e+=t[a].name+" . ";return e},this.isShowFromTbLogic=function(t,e,a){for(var s=!1,i=0;i<t.courses.length;i++)if(a[t.courses[i].id]&&(this.getValidDays(a[t.courses[i].id].expiry)<0||a[t.courses[i].id].validity<t.validity)){s=!0;break}return(t.courses.length>1&&s||e.isActive)&&e.cost>0},this.getDiscount=function(t,e){return t>=e?t-e:0},this.getPurchasedSubsMap=function(t){var e={};t=validateArr(t);for(var a=0;a<t.length;a++)this.subsBundleIdToObjMap[t[a]._id]&&(e[t[a]._id]={expiryInDays:this.getValidDays(t[a].expiry),expiryInDaysString:"",expiryDate:new Date(t[a].expiry),purchaseDate:new Date(new Date(t[a].expiry)-this.convertNanosecToMillisec(this.subsBundleIdToObjMap[t[a]._id].validity)),courses:t[a].courses,isExpired:!((new Date).getTime()<=new Date(t[a].expiry).getTime())},e[t[a]._id].expiryInDaysString=e[t[a]._id].expiryInDays>1?e[t[a]._id].expiryInDays+" Days":e[t[a]._id].expiryInDays+"Day");return e};var a=function(t){for(var e=0,a=0;a<t.length;a++)e+=t[a].cost;return e},s={released:"released test packs",upcoming:"upcoming test packs",expected:"expected test packs"},i=function(t){for(var e=[],i={},o={},r=0;r<t.length;r++)if((t[r].title.toLowerCase()==s.released||t[r].title.toLowerCase()==s.upcoming)&&t[r].children)for(var n=0;n<t[r].children.length;n++)for(var c=1;c<t[r].children[n].children.length;c++)i={},i.title=t[r].children[n].children[c].children[0].title,o.hasOwnProperty(i.title)?(i.testCount=parseInt(t[r].children[n].children[c].children[1].title)+e[o[i.title]].testCount,i.testArrObj=t[r].children[n].children[c].children[4].meta,i.cost=a(i.testArrObj)+e[o[i.title]].cost,i.testArrObj=i.testArrObj.concat(e[o[i.title]].testArrObj)):(i.testCount=parseInt(t[r].children[n].children[c].children[1].title),i.testArrObj=t[r].children[n].children[c].children[4].meta,i.cost=a(i.testArrObj),o[i.title]=e.length),e[o[i.title]]=i;return e},o=function(t){for(var e=[],a={},i={},o={},r=0;r<t.length;r++)if((t[r].title.toLowerCase()==s.released||t[r].title.toLowerCase()==s.upcoming)&&t[r].children)for(var n=0;n<t[r].children.length;n++)if(a={},a.course=t[r].children[n].meta.course,o.hasOwnProperty(a.course)){a.exams=e[o[a.course].pos].exams;for(var c=1;c<t[r].children[n].children.length;c++)i={},i.title=t[r].children[n].children[c].children[0].title,o[a.course].hasOwnProperty(i.title)||(o[a.course][i.title]=a.exams.length,a.exams[o[a.course][i.title]]=i);e[o[a.course].pos]=a}else{o[a.course]={pos:e.length},a.exams=[];for(var c=1;c<t[r].children[n].children.length;c++)i={},i.title=t[r].children[n].children[c].children[0].title,o[a.course].hasOwnProperty(i.title)||(o[a.course][i.title]=a.exams.length,a.exams[o[a.course][i.title]]=i);e.push(a)}return e},r=function(t,e){for(var a=0,s=0;s<e.length;s++)t.hasOwnProperty(e[s])&&a++;return a},n=function(t){for(var e=[],a={},i=0;i<t.length;i++)if((t[i].title.toLowerCase()==s.released||t[i].title.toLowerCase()==s.upcoming)&&t[i].children)for(var o=0;o<t[i].children.length;o++)for(var r=1;r<t[i].children[o].children.length;r++){e=t[i].children[o].children[r].children[4].meta;for(var n=0;n<e.length;n++)a[e[n].tid]=1}return a},c=function(t,e){for(var a=0,s=0;s<t.courses.length;s++)if(e.hasOwnProperty(t.courses[s].id)&&(a=new Date(e[t.courses[s].id].expiry).getTime(),a-(new Date).getTime()>0))return!0;return!1};this.processSubscriptionObject=function(t,e,a,s){s=s?s:[];var u={},d=function(t){var e=864e11;return Math.round(t/e)},h=function(e,a){if(t.isHidden)return e.isActive&&!!a&&!a.isExpired;if(0===e.cost){if(a&&a.purchaseDate){var s=new Date(a.purchaseDate).setHours(0,0,0,0),i=s+864e5;return(new Date).getTime()>=s&&(new Date).getTime()<=i}return!1}return e.cost>0};u.id=t._id||"-1",u.availTill=new Date(t.availTill)||new Date,u.category=t.category||"",u.cost=Math.round(this.calculateSubsBundleCost(t,e))||0,u.oldCost=t.oldCost||t.cost||0,u.completePackCost=t.cost||0,u.couponGoldenRatio=getRoundedFloat(u.cost/u.completePackCost,2)||1,u.coursesObjArr=t.courses||[],u.courseNamesArr=getSpecificKeyArrFromArrayOfObjects(t.courses,"name"),u.coupon=t.offerCoupon||{},u.description=t.description||"",u.pattern=u.pattern||{},u.title=t.title||"",u.recommendedFor=t.recommendedFor||"",u.offerText=0==t.cost?"FREE":u.discountText,u.type=t.type||"others",u.isActive=!!a[t._id],u.isShow=h(u,a[t._id]),u.specificExamObjArr=t.specificExams,u.cardClass=this.getSubscriptionCardClass(t),u.subTitle="",u.coursesStr=this.getCoursesString(t.courses),u.featureArr=t.features||[],u.items=t.items||[],u.discount=this.getDiscount(u.oldCost,u.cost),u.colorHex=l(t.colorHex),u.validity=this.getValidMonth(t.validity)||0,u.validityInDaysTemp=d(t.validity||0),u.validityInDaysTemp%30===0?u.validityStringTemp=u.validityInDaysTemp/30>1?u.validityInDaysTemp/30+" Months":u.validityInDaysTemp/30+" Month":u.validityStringTemp=u.validityInDaysTemp>1?u.validityInDaysTemp+" days":u.validityInDaysTemp+" day",u.validityInDays=30*u.validity||0,u.subStrInSubCard=12==u.validity?"For 1 Year":u.validity>1?"For "+u.validity+" Months":"For "+u.validity+" Month",u.validityString=u.validity>1?u.validity+" Months":u.validity+" Month",u.extraFeatures=t.extraFeatures||[],u.totalTest=this.getTotalTestInBundle(t.extraFeatures),u.calcData=i(t.extraFeatures||[]),u.courseSelectionDS=o(t.extraFeatures||[]),u.isActive&&t.hasOwnProperty("hasExtendedValidity")&&t.hasExtendedValidity&&(u.hasExtendedValidity=t.hasExtendedValidity);var p=n(t.extraFeatures||[]);return u.attemptedTest=r(p,s),u.isActive?(u.isExpired=!(new Date(a[u.id].expiryDate).getTime()-(new Date).getTime()>0),u.isExpired?u.statusClass="subs-expired":(u.attemptedPercent=Math.round(100*u.attemptedTest/u.totalTest).toString()+"%",u.statusClass="subs-active")):c(t,e)?u.statusClass="subs-inactive subs-upgrade":u.statusClass="subs-inactive",u};var l=function(t){return t=t?t:"ffffff",t.indexOf("#")!=-1?t:"#"+t};this.mockTestSubsFilter=function(t,e,a){var s=[],i="";for(var o in e)e[o].expiryInDays<=0&&(i+=this.getCoursesString(e[o].courses));for(var r=0;r<a.length;r++)e[a[r].id]&&e[a[r].id].expiryInDays>0||i.trim()&&a[r].coursesStr.toLowerCase().indexOf(t.toLowerCase())!=-1&&a[r].coursesStr.toLowerCase().indexOf(i.toLowerCase())!=-1&&s.push(a[r]);return s},this.getTotalTestInBundle=function(t){t=validateArr(t);for(var e=0,a=0;a<t.length;a++)if((t[a].title.toLowerCase()==s.released||t[a].title.toLowerCase()==s.upcoming)&&t[a].children)for(var i=0;i<t[a].children.length;i++)e+=parseInt(t[a].children[i].meta.testCount);return e},this.getValidMonth=function(t){var e=2592e12;return Math.round(t/e)},this.getValidDays=function(t){var e=new Date(t).getTime()-(new Date).getTime();return Math.round(e/864e5)},this.getSubscriptionCardClass=function(t){var e="subs-inactive";return e},this.getCoursesString=function(t){for(var e=[],a=0;a<t.length;a++)e.push(t[a].name);return e.join(" . ")},this.subsBundleIdToObjMap={},this.convertNanosecToMillisec=function(t){return t/1e6},this.calculateSubsBundleCost=function(t,e){var a={},s=0,i=1,o=t.validity,r=t.items||[],n=0;if(r.length)for(var c=0;c<r.length;c++)a=this.subsBundleIdToObjMap[r[c].id]||{},n+=a.cost,s+=this.calculateSubsCost(a,e,o);else n=t.cost,s=t.cost;return i=t.cost/n,s*i},this.calculateSubsCost=function(t,e,a){if(t.courses&&e.hasOwnProperty(t.courses[0].id)){var s=e[t.courses[0].id].expiry-(new Date).getTime(),i=this.convertNanosecToMillisec(a);if(s>i)return 0;s<0&&(s=0);var o=0;return i-s>0&&(o=(i-s)/i),t.cost*o}return t.cost||0},this.getCourseToExpiryMap=function(t){var e={};t=validateArr(t);for(var a=0;a<t.length;a++)for(var s=0;s<t[a].courses.length;s++)if(e.hasOwnProperty(t[a].courses[s].id)){var i=e[t[a].courses[s].id].expiry,o=new Date(t[a].expiry).getTime();o>i&&(e[t[a].courses[s].id].expiry=o,e[t[a].courses[s].id].subsId=t[a]._id)}else e[t[a].courses[s].id]={},e[t[a].courses[s].id].expiry=new Date(t[a].expiry).getTime(),e[t[a].courses[s].id].subsId=t[a]._id;return e},this.handleBodyScroll=function(){this.modalHeroPathStack&&this.modalHeroPathStack.length>=1?$("body").addClass("modal-open"):$("body").removeClass("modal-open")},this.getRoundedToTens=function(t){return t=Math.floor(t),t+=9,t=10*Math.floor(t/10),t=t%10>=5?t+10:t}}]);
var TB=TB||{};!function(){function e(e,n){function s(e){if(window){var r=e+"-practice",o=window.location.href||"",t=o.split("//").length&&o.split("//")[1]||"";window.location.search&&(t=t.split("?")[0]);var n=t.split("/");n.splice(0,1);var s=n[0],a=d+"-practice",i="";s===d?(n[0]=e,i="/"+n.join("/"),window.location.href=i):s===a?(i="/"+r,window.location.href=i):window.location.reload()}}function a(e){showLoader("Changing Course. Please wait.");var r=function(r){forceSessionRefresh(!0);var o={id:e.id||"",name:e.name||""};TB.UpdateCurrentCourseInStorage(o),s(e.url)},o=function(e){e?showAlert(e.message||"Something went wrong, Please contact at support@testbook.com","error","large",5e3):showAlert("Please check your internet connection or contact at support@testbook.com","error","large",5e3),hideLoader()},t={course:e.id};n.setCurrentCourse(t,r,o)}var i="/tb-money",c={},u=$("#sid")&&$("#sid").val()||-1,l=Object.prototype.hasOwnProperty;this.tbCourseArr=JSON.parse($("#course_info")&&$("#course_info").val()||"[]"),this.showStuCourseDropdown=!0;var d=document.getElementById("curCourseURL")&&document.getElementById("curCourseURL").value||"";this.stuObj={isShowCoBrandingLogo:!1,coBrandingLogoSrc:"",currentCourseObj:{},enrollmentsArr:[],profilePic:"",isLoggedIn:isLoggedIn()||!1,tbMoney:0},this.updateCurrentCourse=function(e){return a(e),!1};var g={},f=this,h=function(e){var r={id:e,name:g[e]&&g[e].abbr||"",url:g[e]&&g[e].URL||""};return r},p=function(e,r){for(var o=0;o<e.length;o++)if(e[o].course&&e[o].course.id==r)return o;return-1};e.$on(r,function(e,r){r&&(f.stuObj.currentCourseObj=h(r.courseId||""))}),e.$on(t,function(e,r){r&&(f.showStuCourseDropdown=!1)}),e.$on(o,function(e,r){if(r)if(r.isEnrolled){var o={course:h(r.courseId||"")};Object.keys(o).length&&f.stuObj.enrollmentsArr.push(o)}else{var t=p(f.stuObj.enrollmentsArr,r.courseId||"");t!==-1&&f.stuObj.enrollmentsArr.splice(t,1)}});var b=function(e){for(var r={},o=0;o<e.length;o++)if(e[o].isGroup)for(var t=0;t<e[o].courses.length;t++)r[e[o].courses[t].id]=e[o].courses[t];else r[e[o].id]=e[o];return r},O=function(e){for(var r=[],o=0;o<e.length;o++)g[e[o].course.id]&&(e[o].course.url=g[e[o].course.id].URL,e[o].course.hasOwnProperty("isInactive")&&e[o].course.isInactive||r.push(e[o]));return r};this.isShowNav=function(e){return e!==i||this.stuObj&&0!==this.stuObj.tbMoney};var m=function(){var e=function(e){if(e.hasOwnProperty("message"))showAlert(e.message||"Something went wrong please contact at support@testbook.com","error","small",5e3);else{c=e.data||{};var r=l.call(c,"streaks")&&l.call(c.streaks,"practise")&&l.call(c.streaks.practise,"coins"),o=l.call(c,"streaks")&&l.call(c.streaks,"questions")&&l.call(c.streaks.questions,"coins");l.call(c,"cobrandingInfo")&&c.cobrandingInfo.logo&&(f.stuObj.coBrandingLogoSrc=c.cobrandingInfo.logo,f.stuObj.isShowCoBrandingLogo=!0),l.call(c,"currentCourse")&&c.currentCourse.id&&(f.stuObj.currentCourseObj=c.currentCourse),l.call(c,"image")&&c.image&&(f.stuObj.profilePic=c.image),l.call(c,"enrollments")&&c.enrollments.length&&(f.stuObj.enrollmentsArr=O(c.enrollments)),l.call(c,"referral")&&l.call(c.referral,"coins")&&(f.stuObj.tbMoney+=c.referral.coins),r&&(f.stuObj.tbMoney+=c.streaks.practise.coins),o&&(f.stuObj.tbMoney+=c.streaks.questions.coins),l.call(c,"coinsExpensed")&&(f.stuObj.tbMoney-=c.coinsExpensed),l.call(c,"referral")&&(f.stuObj.referral=c.referral)}};g=b(f.tbCourseArr),"-1"!=u&&TB.GetStudentFromStorage(e)};angular.element(document).ready(function(){$(".js-group-one, #js-header-options-sidebar .course-btn").click(function(e){e.stopPropagation(),e.preventDefault(),$(this).toggleClass("active"),$(this).parent().children("ul").slideToggle()})}),m()}var r="COURSE_CHANGED",o="COURSE_ENROLLED_DE_ENROLLED",t="REMOVE_STU_COURSE_DROPDOWN",n=angular.module("tbHeaderApp",["Testbook"]);n.controller("headerCtrl",["$scope","TB",e])}();
var TB=TB||{};!function(){function e(){return{restrict:"E",scope:{},controller:["$scope","TB",t],templateUrl:"/views/partials/components/subfooter-seo.html"}}function t(e,t){var o=function(){return{anchorTag:"",link:""}},n=function(){return{title:"",links:[]}},s=function(){return{id:"",URL:"",type:"",name:"",sections:[],SEO:{title:"",description:"",keywords:[],URL:"",rel:[]}}},r="absent",i=window.location.host+window.location.pathname,a="ls_seo",c={};e.isSubFooterPresent=!1,e.subFooterSections=[];var l=function(e){for(var t=[],s=0;s<e.length;s++){var r=n();r.title=e[s].title||"";for(var i=0;i<e[s].links.length;i++){var a=o();a.link=e[s].links[i].link||"",a.anchorTag=e[s].links[i].anchorTag||"",r.links.push(a)}t.push(r)}return t},u=function(){var o=function(t){if(t.data.hasOwnProperty("id")&&""!==t.data.id){t=t.data;var o=s();o.id=t.id,o.URL=t.URL||"",o.type=t.pageType||"",o.name=t.name||"",o.sections=l(t.sections||[]),e.subFooterSections=o.sections,e.subFooterSections.length&&(e.isSubFooterPresent=!0),c[i]=o,setLocalStorage(a,JSON.stringify(c),.5)}},n=function(e){e&&e.message&&e.message.indexOf("SEO does not exists")!==-1&&(c[i]=r,setLocalStorage(a,JSON.stringify(c),.5))};if(c=JSON.parse(getLocalStorage(a)||"{}"),c.hasOwnProperty(i))c.PAGE_URL!==r?(e.subFooterSections=c[i].sections||[],e.subFooterSections.length&&(e.isSubFooterPresent=!0)):c.PAGE_URL===r&&(e.isSubFooterPresent=!1);else{var u={url:i,fields:"URL,name,pageType,sections"};t.getPageSEO(u,o,n)}};u()}var o=angular.module("SEO",["Testbook"]);o.directive("subFooter",e)}();
"use strict";var productCardModule=angular.module("productCardModule",[]);productCardModule.service("productCardService",["subscriptionService","$timeout",function(e,t){var s=new Date("0001-01-01T00:00:00Z").getTime(),i="",r="",a=(new Date).getTime(),o={},n=!1,c=!1,d=0,u={},l={},h=0,m={},f={combo:"combo",pack:"pack"},g={},p={},T={},v={},C=[],y={},P={},b={};this.setAllTestsObj=function(e){b=e||""},this.setCurrentCourseUrl=function(e){i=e||""},this.setMapPidToProcessedProduct=function(e){y=e||""},this.setTestsOfExpiredProducts=function(e){C=e||""},this.setPurchasedSubsMap=function(e){v=e||""},this.setTimerForCurrentTime=function x(e){a=e+1e3,t(function(){x(e)},1e3)},this.setAllCategoryMap=function(e){o=e||""},this.setPromotionsPageBool=function(e){n=e||""},this.setSubscriptionStatus=function(e){c=e||""},this.setRemainingCoins=function(e){d=e||""},this.setPidToItemsMap=function(e){u=e||""},this.setPidToProductMap=function(e){l=e||""},this.setMyTestsIdObjMAP=function(e){m=e||""},this.setCoinsPercentage=function(e){h=e||""},this.setResumableTestMap=function(e){g=e||""},this.setSubsArrMap=function(e){p=e||""},this.setCourseIdToExpiryMap=function(e){T=e||""},this.setCurrentCourseId=function(e){r=e||""},this.getCurrentTime=function(){return a},this.checkForLiveTest=function(e){var t=new Date(e).getTime();return t>s},this.checkForPrelaunchTest=function(e,t){var s=new Date(e);return t=t?new Date(t):new Date,s>t},this.getLiveTestTime=function(e){return e.endTimeLive-e.startTimeLive>=60*e.pattern.time*1e3},this.getSpecificExamNamesArr=function(e){var t,s=validateArr(e),i=[];for(t=0;t<s.length;t+=1)i.indexOf(s[t])===-1&&i.push(s[t].name||s[t].title||"");return i},this.getTestDetailsObj=function(e){var t,s,i=validateArr(e),r={questionsCount:0,testsCount:i.length,time:0,marks:0};for(t=0;t<i.length;t+=1)s=i[t].pattern||{},r.questionsCount+=this.getQuestionsCount(s&&s.sections,"qCount"),r.time+=s.time||0,r.marks+=this.getQuestionsCount(s.sections,"maxM");return r},this.getQuestionsCount=function(e,t){var s,i=validateArr(e),r=0;for(s=0;s<i.length;s+=1)r+=i[s][t];return r},this.getProcessedTestObj=function(e){return e.items?this.getPaidTest(e):this.getFreeTest(e)},this.getProcessedPackObj=function(e,t){var s=this.checkForComboPack(e);return s||t!==f.pack?s&&t===f.combo?this.getProcessedCombo(e):{}:this.getProcessedPack(e)},this.getFreeTest=function(e){var t=e,r={};return t.isLiveTest=this.checkForLiveTest(t.info&&(t.info.startTime||s)),t.analysisURLQuiz="/"+i+"/quizzes/"+(t.id||t._id)+"/analysis",t.startURLQuiz="/"+i+"/quizzes/"+(t.id||t._id),t.solutionURL=t.isLiveTest?"/"+i+"/tests/"+(t.id||t._id)+"/promotions":"/"+i+"/tests/"+(t.id||t._id)+"#/solutions",t.analysisURL=t.isLiveTest?"/"+i+"/tests/"+(t.id||t._id)+"/promotions?from=analysis":"/"+i+"/tests/"+(t.id||t._id)+"/analysis",r.id=t.id||t._id,r.isPreLaunch=this.checkForPrelaunchTest(t.availFrom,a),r.availFrom=new Date(t.availFrom).getTime()||s,r.availTill=new Date(t.availTill).getTime()||s,r.testExpiryInDays=getDaysDiff(r.availTill,(new Date).getTime()),r.category=t.category,r.categoryObj=o[t.category]||"",r.description=t.description||"",r.pattern=t.pattern||{},r.isLiveTest=t.isLiveTest,r.startTimeLive=new Date(t.info&&t.info.startTime).getTime()||s,r.endTimeLive=new Date(t.info&&t.info.endTime).getTime()||s,r.isLongLiveTest=this.getLiveTestTime(r),r.title=t.title||"",r.cost=t.cost||0,r.specificExams=this.getSpecificExamNamesArr(t.specificExams)||[],r.specificExamsDL=t.specificExams||[],r.cardClass=this.getNonProductCardClass(r,a),r.itemsCount=1,r.offerText=t.cost?"":"FREE",r.course=t.course?t.course.name:"",r.testDetails=this.getTestDetailsObj([t]),r.type=t.type||"others",r.solutionURL=t.solutionURL,r.analysisURL=t.analysisURL,r.analysisURLQuiz=t.analysisURLQuiz,r.startURLQuiz=t.startURLQuiz,r.isShow=!0,r.isHide=!1,r.isPartOfHiddenProduct=r.isHide,r.showAdmitCardExams=t.showAdmitCardExams||[],t.servesOn=isValidDate(t.servesOn)?t.servesOn:s,r.isQuiz=t.servesOn&&new Date(t.servesOn).getTime()>0,r.servesOn=new Date(t.servesOn).getTime(),r},this.getPaidTest=function(e){var t,r=e,n={};return t=r.items&&r.items.length&&(r.items[0].id||""),r.isLiveTest=this.checkForLiveTest(r.items[0].info.startTime||s),r.solutionURL=r.isLiveTest?"/"+i+"/tests/"+r.id+"/promotions":"/"+i+"/tests/"+t+"#/solutions",r.analysisURL=r.isLiveTest?"/"+i+"/tests/"+r.id+"/promotions?from=analysis":"/"+i+"/tests/"+t+"/analysis",n.id=r.id||r._id,n.isPreLaunch=this.checkForPrelaunchTest(r.items[0].availFrom),n.availFrom=new Date(r.releaseDate).getTime()||s,n.availTill=new Date(r.items[0].availTill).getTime()||s,n.testExpiryInDays=getDaysDiff(n.availTill,(new Date).getTime()),n.category=r.category,n.categoryObj=o[r.category]||"",n.description=r.description||"",n.pattern=r.pattern||{},n.isLiveTest=r.isLiveTest,n.startTimeLive=new Date(r.items[0].info.startTime).getTime()||s,n.endTimeLive=new Date(r.items[0].info&&r.items[0].info.endTime).getTime()||s,n.isLongLiveTest=this.getLiveTestTime(n),n.title=r.items[0].title||"",n.cost=r.cost||0,n.offerText=r.discountText||"",n.recommendedFor=r.recommendedFor||"",n.oldCost=r.oldCost||0,n.specificExams=this.getSpecificExamNamesArr(r.specificExams),n.specificExamsDL=r.specificExams||[],n.cardClass=this.getNonProductCardClass(n,a),n.itemsCount=r.items.length||0,n.offerText=0===r.cost?"FREE":r.discountText,n.course=r.course?r.course.name:"",n.testDetails=this.getTestDetailsObj(r.items),n.type=r.type||"others",n.items=r.items,n.solutionURL=r.solutionURL,n.analysisURL=r.analysisURL,n.isShow=!0,n.isHide=r.isHidden||!1,n.isPartOfHiddenProduct=r.isHidden||!1,n.showAdmitCardExams=r.showAdmitCardExams||[],n.specificExamObjArr=r.specificExams,n},this.getProcessedPack=function(e){var t=e.isHidden,i=this.getProcessedItems(e.items,t,e._id),r={};return r.id=e._id,r.items=i,r.categorizedSortedPackTests=this.getCompleteSortedCategorizedItemsArr(i,"test",!1,"asc"),r.availTill=new Date(e.availTill).getTime()||s,r.category=e.category,r.categoryObj=e.categoryObj||{},r.categoryOrder=e.categoryObj&&e.categoryObj.order||10,r.cost=e.cost||0,r.createdOn=e.createdOn,r.description=e.description||"",r.isCustom=e.isCustom||!1,r.minPrice=e.minPrice||0,r.oldCost=e.oldCost||0,r.availFrom=new Date(e.releaseDate).getTime(),r.specificExams=this.getSpecificExamNamesArr(e.specificExams)||[],r.specificExamsDL=e.specificExams||[],r.course=e.course?e.course.name:"",r.courses=e.courses||[],r.stage=e.stage,r.title=e.title||"",r.offerText=e.discountText,r.packDetails=this.getTestDetailsObj(i),r.type=e.type||"others",r.isCombo=!1,r.isHide=new Date(e.releaseDate)>new Date||e.isHidden,r.isShow=!r.isHide,r.cardClass=this.getProductCardClass(r,[],n),r},this.getProcessedCombo=function(e){var t=this.getAllTestsOfComboPacks(e.items),i={};return i.id=e._id,i.items=e.items,i.logoURL=e.courseLogo||"//storage.googleapis.com/testbook/products/default.svg",i.addedPids=this.getAddedPids(e.items),i.categorizedSortedPackTests=this.getCompleteSortedCategorizedItemsArr(t,"test",!1,"asc"),i.availTill=new Date(e.availTill).getTime()||s,i.category=e.category,i.categoryObj=e.categoryObj,i.categoryOrder=e.categoryObj&&e.categoryObj.order||10,i.cost=e.cost,i.createdOn=e.createdOn,i.description=e.description||"",i.isCustom=e.isCustom,i.minPrice=e.minPrice,i.oldCost=e.oldCost||0,i.availFrom=new Date(e.releaseDate).getTime(),i.specificExams=this.getSpecificExamNamesArr(e.specificExams)||[],i.specificExamsDL=e.specificExams||[],i.course=e.course?e.course.name:"",i.courses=e.courses||[],i.stage=e.stage,i.title=e.title||"",i.offerText="SAVE RS. "+(i.oldCost-i.cost),i.features=e.features||[],i.recommendedFor=e.recommendedFor||"",i.comboPackTests=t,i.comboPackDetails=this.getComboPackDetailsObj(t),i.type=e.type||"others",i.isCombo=!0,i.isHide=e.isHidden||!1,i.isShow=!i.isHide,i.isHighlight=e.isRecommended,i.cardClass=this.getProductCardClass(i,[],n),i},this.checkForComboPack=function(e){var t,s=e.items||[];for(t=0;t<s.length;t+=1)if("product"===s[t].type)return!0;return!1},this.getProcessedItems=function(e,t,s){var r,n=validateArr(e);for(r=0;r<n.length;r+=1)n[r]=this.getProcessedTestObj(n[r],i,a,o),n[r].testDetails=this.getTestDetailsObj([n[r]]),n[r].isPartOfHiddenProduct=t||!1,n[r].pid=s;return n},this.getAddedPids=function(e){var t,s=validateArr(e),i=[];for(t=0;t<s.length;t+=1)i.push(s[t].id);return i},this.getCompleteSortedCategorizedItemsArr=function(e,t,s,i){var r,a,n,c,d,u=[];for(r in o)if(o.hasOwnProperty(r)){for(n=o[r],d={categoryId:r,categoryName:n.name,categoryOrder:n.order,orderBy:n.sort,sortOrder:n.sortOrder,value:[]},c=0;c<e.length;c+=1)a=e[c],a&&r===a.category&&(a.categoryObj=n,d.value.push(e[c]));d.value.length&&(d.alreadyPurchasedTestCount=this.getAlreadyPurchasedTestCount(d.value,m)||0,d.remainingTestsCount=d.value.length-d.alreadyPurchasedTestCount,i?d.value=sortFunction(d.value,d.orderBy,"string",i):d.value=sortFunction(d.value,d.orderBy,"string",d.sortOrder),u.push(d))}return u},this.getAlreadyPurchasedTestCount=function(e,t){var s,i,r=0;for(s=0;s<e.length;s+=1)i=e[s].id,t[i]&&(r+=1);return r},this.getNonProductCardClass=function(e){var t=e.endTimeLive-a,s="";return e.offerText&&(s="has-offer"),e.cost||(s=s?s+" is-free":s+"is-free"),e.isLiveTest&&(s=s?s+" is-live":s+"is-live"),e.itemsCount>1&&(s=s?s+" test-pack":s+"test-pack"),e.isLongLiveTest&&(s=s?s+" has-more-window":s+"has-more-window"),e.isLiveTest&&t<0&&(s=s?s+" lt-time-over":s+"lt-time-over"),new Date(e.availTill).getTime()<a&&(s=s?s+" available":s+"available"),e.specificExams&&e.specificExams.length&&(s=s?s+" has-tags":s+"has-tags"),s},this.getProductCardClass=function(e,t,s){var i=validateArr(t),r=e.oldCost?"has-old-price":"";return e.offerText&&(r=r?r+" has-offer":r+"has-offer"),e.isHighlight&&(r=r?r+" complete-pack":r+"complete-pack"),e.specificExams&&e.specificExams.length&&(r=r?r+" has-tags":r+"has-tags"),e.isRecommended&&s&&(r=r?r+" is-recommended":r+"is-recommended"),e.isPartOfCart||i.indexOf(e.id)===-1||(r=r?r+" subset-already-added":r+"subset-already-added"),e.isPartOfCart&&(r=r?r+" added-to-cart":"added-to-cart"),c&&(r=r?r+" subs-active":r+"subs-active"),d&&d>=e.cost*h/100&&(r=r?r+" purchase-with-coins":r+"purchase-with-coins"),r},this.getClassForMyTests=function(e){var t="",s=e.startTimeLive-this.getCurrentTime(),i=e.endTimeLive-this.getCurrentTime();if(e.isLiveTest?(t="live-test-card",t+=s>MS_IN_ONE_DAY?" lt-default-state":s<=MS_IN_ONE_DAY&&s>0?" lt-default-state":s<=0&&i>=0?" lt-start-test":i<=0?" lt-time-over":" lt-default-state"):(t="fst-test-card",t+=e.isPreLaunch?" test-prelaunch":" nt-default-state"),e.description&&(t=t?t+" has-syll-info":str+"has-syll-info"),e.specificExams&&e.specificExams.length&&(t=t?t+" has-tags":t+"has-tags"),g[e.id]&&(t=t?t+" test-resumable":t+"test-resumable"),e&&e.sourceId){var a=(p[e.sourceId]||{},getDaysDiff(T[r].expiry,(new Date).getTime())),o=a>=0?"subs-active":"subs-expired";t=t?t+" "+o:o}return t},this.getAllTestsOfComboPacks=function(e){var t,s,r,n=validateArr(e),c=[];for(t=0;t<n.length;t+=1)if("test"!==n[t].type||this.checkIfTestAlreadyExistInArr(c,n[t].id))for(r=u[n[t].id]||[],s=0;s<r.length;s+=1)this.checkIfTestAlreadyExistInArr(c,n[t].id)||(r[s].pid=n[t].id,c.push(r[s]));else c.push(this.getProcessedTestObj(n[t],i,a,o));return c},this.checkIfTestAlreadyExistInArr=function(e,t){var s;for(s=0;s<e.length;s+=1)if(e&&e[s]&&e[s].id===t)return!0;return!1},this.getComboPackDetailsObj=function(e){var t={},s=this.getCompleteSortedCategorizedItemsArr(e,"test",!1,"asc");return t.alreadyPurchasedTestsCount=this.getAlreadyPurchasedTestsCount(e),t.remainingTestsCount=e.length-t.alreadyPurchasedTestsCount,t.testsArr=s,t.total=e.length,t},this.getAlreadyPurchasedTestsCount=function(e){var t,s=0;for(t=0;t<e.length;t+=1)e[t].isAlreadyPurchased&&(s+=1);return s},this.getAllTestsAssignedToStudent=function(t,s,i){var a=-1e7,o=t.data.products||[],n=t.data.tests||[],c=[],d=T[r]&&r&&e.getValidDays(T[r].expiry);if(n&&n.length&&s&&s.length)for(var u=0;u<s.length;u++){var l=s[u];n&&n.length&&n.indexOf(l.id)!==-1&&!this.checkIfTestAlreadyExistInArr(c,l.id)&&(l.subsExpiryInDays=-1e7,l.subsExpiryInDaysString="",c.push(l),P[l.id]={isPartOfCombo:!1,comboId:""})}if(o||o.length)for(var u=0;u<o.length;u++)if("test pack"==o[u].type.toLowerCase())for(var l=o[u],h=this.getTestsOfProduct(l,s),m=0;m<h.length;m++){var l=h[m];P[l.id]={isPartOfCombo:!1,comboId:""},l.myCardClass=this.getClassForMyTests(l),l.source=o[u].source,l.sourceId=o[u].sourceId||"",l.subsExpiryInDays=v&&v[l.sourceId]&&v[l.sourceId].expiryInDays||a,l.subsExpiryInDaysString=d>0?d>1?d+" days To dxpire subscription":d+" day To expire subscription":-d>1?"Subscription expired "+-d+" days ago":"Subscription expired "+-d+" day ago",this.checkIfTestAlreadyExistInArr(c,l.sourceId)||c.push(l)}for(var f=[],g=[],p=[],u=0;u<o.length;u++)if("combo pack"==o[u].type.toLowerCase()){if(p=[],P[o[u].pid]={isPartOfCombo:!1,comboId:""},o[u].products&&o[u].products.length)for(var m=0;m<o[u].products.length;m++)p.push(o[u].products[m].pid),P[o[u].products[m].pid]={isPartOfCombo:!0,comboId:o[u].pid};f=o[u].pid,g=g.concat(this.getTestsOfComboPacksForMyTests(f,o[u].source,o[u].sourceId,p))}for(var u=0;u<g.length;u++){var l=g[u];l.myCardClass=this.getClassForMyTests(l),this.checkIfTestAlreadyExistInArr(c,l.id)||i.indexOf(l.id)==-1||c.push(l)}for(var u=0;u<o.length;u++)o[u].tests&&n.push(o[u].pid);for(var u=0;u<o.length;u++){if(o[u].products&&o[u].products.length)for(var m=0;m<o[u].products.length;m++)n=n.concat(o[u].products[m].tests);o[u].tests&&o[u].tests.length&&(n=n.concat(o[u].tests))}for(var u=0;u<C.length;u++)if(n.indexOf(C[u].id)!=-1&&!this.checkIfTestAlreadyExistInArr(c,C[u].id)){var l=this.getProcessedTestObj(C[u]);l.myCardClass=this.getClassForMyTests(l),l.subsExpiryInDays=v&&v[l.sourceId]&&v[l.sourceId].expiryInDays||a,l.subsExpiryInDaysString=d>0?d>1?d+" days To dxpire subscription":d+" day To expire subscription":-d>1?"Subscription expired "+-d+" days ago":"Subscription expired "+-d+" day ago",c.push(l)}return c},this.getTestsOfProduct=function(e,t){var s=[];y[e.pid]&&(s=y[e.pid].items||[]);for(var i=t.length-1;i>=0;i--)for(var i=t.length-1;i>=0;i--)t[i].id==e.pid&&(t[i].id=t[i].items[0].id,s.push(t[i])||[]);return s},this.getTestsOfComboPacksForMyTests=function(t,s,i,a){for(var o=[],n=0;n<b.comboPacks.length;n++)for(var c=b.comboPacks[n].value,d=0;d<c.length;d++){var u=t.indexOf(c[d].id);u!=-1&&(o=o.concat(c[d].comboPackTests))}for(var l=e.getValidDays(T[r]&&T[r].expiry),n=0;n<o.length;n++){var h=a.indexOf(o[n].pid)!==-1;h&&(o[n].source=s||"",o[n].sourceId=i||"",o[n].subsExpiryInDays=v&&v[i]&&v[i].expiryInDays||-1e7,o[n].subsExpiryInDaysString=l>0?l>1?l+" days To expire subscription":l+" day to expire subscription":-l>1?"Subscription expired "+-l+" days ago":"Subscription expired "+-l+" day ago")}return o},this.getTotalTestCount=function(e,t,s){e=validateArr(e);var i=0;for(var r in s){var a=s[r];(!a.isPartOfHiddenProduct||a.isPartOfHiddenProduct&&e.indexOf(a.id)!=-1||a.isPartOfHiddenProduct&&t.indexOf(a.pid)==-1)&&(i+=1)}return i},this.getTotalQuestionsCount=function(e,t,s){e=validateArr(e);var i=0;for(var r in s){var a=s[r];a&&a.testDetails&&(!a.isPartOfHiddenProduct||a.isPartOfHiddenProduct&&e.indexOf(a.id)!==-1||a.isPartOfHiddenProduct&&t.indexOf(a.id)==-1)&&(i+=a.testDetails.questionsCount)}return i},this.resetNonProducts=function(e,t){for(var s=e.length-1;s>=0;s--){var i=e[s];P[i.id]&&!P[i.id].isPartOfCombo&&t?(i.isPartOfMyTests=!0,i.cardClass?i.cardClass=i.cardClass+" part-of-my-tests":i.cardClass="part-of-my-tests"):!P[i.id]||P[i.id].isPartOfCombo||t?P[i.id]&&P[i.id].isPartOfCombo&&e.splice(s,1):e.splice(s,1)}return e},this.resetPacks=function(e,t){for(var s=e.length-1;s>=0;s--){for(var i=e[s].value,r=i.length-1;r>=0;r--){var a=i[r];P[a.id]&&!P[a.id].isPartOfCombo&&t?(i[r].isPartOfMyTests=!0,i[r].cardClass?i[r].cardClass=i[r].cardClass+" part-of-my-tests":i[r].cardClass="part-of-my-tests"):!P[a.id]||P[a.id].isPartOfCombo||t?P[a.id]&&P[a.id].isPartOfCombo&&i.splice(r,1):i.splice(r,1)}i.length<1&&e.splice(s,1)}return e},this.resetComboPacks=function(e,t){for(var s=e.length-1;s>=0;s--){for(var i=e[s].value,r=i.length-1;r>=0;r--){var a=i[r];if(P[a.id]&&t)i[r].isPartOfMyTests=!0,i[r].isAlreadyPurchased=!0,i[r].cardClass?i[r].cardClass=i[r].cardClass+" part-of-my-tests":i[r].cardClass="part-of-my-tests",i[r]=this.processObjForComboUpgrade(i[r],P);else if(P[a.id]&&!t)i.splice(r,1);else for(var o=i[r].items,n=0;n<o.length;n++)if(P[o[n].id]&&P[o[n].id].comboId!=i[r].id||this.checkIfHasCommonTestsWithMyTests(a.comboPackTests)){i[r].isPartialPurchasedProduct=!0,i[r]=this.processObjForComboUpgrade(i[r],P),(i[r].cost<=0||i[r].comboPackDetails.remainingTestsCount<=0)&&i.splice(r,1);break}}i.length<1&&e.splice(s,1)}return e},this.processObjForComboUpgrade=function(e,t){for(var s=e.items||[],i=e.comboPackTests||[],r={},a=0;a<i.length;a++){var o=i[a].id;r[o]=i[a]}for(var n=(e.cost,0),c=0,a=0;a<s.length;a++){var d=s[a].id;l&&l[d]&&(n+=l[d].cost),t&&t[d]&&l[d]&&(c+=l[d].cost)}for(var a=0;a<i.length;a++){var o=i[a].id;m[o]&&(i[a].isAlreadyPurchased=!0)}for(var u=0,h=0,a=0;a<i.length;a++)i[a].isAlreadyPurchased?u+=1:h+=1;u>0&&0==h&&(e.cardClass?e.cardClass=e.cardClass+" part-of-my-tests":e.cardClass="part-of-my-tests"),e.isPartialPurchasedProduct=!0;var f=1-c/n;return e.cost=f*e.cost,e.cost=e.cost+9,e.cost=10*Math.floor(e.cost/10),e.oldCost=f*e.oldCost,e.oldCost=e.oldCost+9,e.oldCost=10*Math.floor(e.oldCost/10),e.oldCost%10>=5&&(e.oldCost=e.oldCost+10),e.oldCost=10*Math.floor(e.oldCost/10),e.offerText="SAVE RS. "+getRoundedFloat(e.oldCost-e.cost,0),e.comboPackDetails=this.getComboPackDetailsObj(i),e.categorizedSortedPackTests=this.getCompleteSortedCategorizedItemsArr(i,"test",!1,"asc"),e},this.checkIfHasCommonTestsWithMyTests=function(e){for(var t=validateArr(e),s=0;s<t.length;s+=1){var i=t[s].id;if(m[i])return!0}return!1}}]);
angular.module("renderFinishModule",[]).directive("onFinishRender",["$timeout",function(n){return{restrict:"A",link:function(i,e,t){i.$last===!0&&n(function(){i.$emit(t.onFinishRender)})}}}]);
!function(){function t(t){var e=$("#cur-course-id")&&$("#cur-course-id").val()||"",r=function(t){for(var e=0;e<t.length;e+=1)t[e].chapterName=t[e].chapterName.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"-"),t[e].section=t[e].section.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"-");return t},a=function(t,e,r){return t?t.split(e).join(r):""},o=function(t,e,r){var o=a(r," ","-").toLowerCase(),c=a(e.chapterName," ","-").toLowerCase();return t=t?t:{chapterIdsArr:[],totalQues:0},t.chapterIdsArr.push({id:e.chapterId,name:e.chapterName,practiceUrl:"/"+u+"-practice/"+o+"/"+c+"-"+e.chapterId+"?page=current"}),t.totalQues+=e.qcount||0,t},c=function(t,e){for(var r={},a=0;a<t.length;a++){var c=t[a][e];r[c]=o(r[c],t[a],c)}return r},n=function(t){var e=[],r=c(t,"section"),a=[];t=validateArr(t);for(var o in r)r.hasOwnProperty(o)&&(a=r[o].chapterIdsArr.splice(7,r[o].chapterIdsArr.length),e.push({extraTopicsCount:a.length,section:o,chapters:r[o].chapterIdsArr,totalQues:r[o].totalQues,practiceUrl:"/"+u+"-practice/",isShow:!0}),p.totalQueCount+=e[e.length-1].totalQues);return e},s=function(){p.isLoadingTags=!0;var a=function(t){t.data&&(t.data=r(t.data),p.tagsArr=n(t&&t.data),p.extraChaptersCount=p.tagsArr.splice(4,p.tagsArr.length).length,p.isLoadingTags=!1)},o=function(t){t?showAlert(t.message||"Something went wrong, Please contact at support@testbook.com","error","large",5e3):showAlert("Please check your internet connection or contact at support@testbook.com","error","large",5e3),hideLoader()};t.getPracticeTags(e,a,o)},i=function(){p.practiceUrl="/"+u+"-practice/",s()},u=document.getElementById("curCourseURL")&&document.getElementById("curCourseURL").value||"";this.tagsArr={},this.extraChaptersCount=0,this.totalQueCount=0,this.isLoadingTags=!0,this.practiceUrl="";var p=this;i()}angular.module("practiceChapterWidgetApp",["Testbook"]).controller("practiceChapterWidgetController",["TB",t])}();
!function(){function e(){return{restrict:"E",scope:{isOTPSent:"=otpSent",template:"@",mobile:"@",title:"@"},controller:["$scope","TB","$interval","$rootScope",t],templateUrl:"/views/partials/components/mobile-verification-template.html"}}function t(e,t,i,o){var n,a=30,r="call",l="SMS",s="",c=a;e.student={mobile:""},e.otp="",e.timeLeftString=a.toString(),e.otpSentVia=l,e.otpResent=!1,e.otpResentCount=0,e.maxOTPResendAllowed=6,e.activateResendOTPBtns=!1,e.activeLoader="",e.loader={resentOTP:"resendOTPLoader",OTPViaCall:"OTPViaCallLoader",verifyOTP:"verifyOTPLoader"};var d=function(t,o,r){n&&(i.cancel(n),e.activateResendOTPBtns=!1,e.timeLeftString=a.toString()),n=i(function(){c-=1,e.timeLeftString=c>9?""+c:"0"+c,0===c&&r()},t,o)},m=function(){e.activateResendOTPBtns=!0,e.timeLeftString=a.toString()};e.toggleCurrentState=function(){e.isOTPSent=!e.isOTPSent,e.otpResentCount=0,e.isOTPSent&&s&&(e.student.mobile=s)},e.sendOTP=function(i,o){var n=function(){e.activeLoader="",e.isOTPSent=!0,i||o?(e.otpResent=!0,e.otpResentCount=e.otpResentCount+1):(forceSessionRefresh(),e.otpResentCount=0,e.otpResent=!1),c=a,d(1e3,a,m)},s=function(t){e.activeLoader="",showAlert(t&&t.message||"There was a problem sending OTP. Please retry.","error","small",5e3)};o?(e.activeLoader=e.loader.OTPViaCall,e.otpSentVia=r):(e.activeLoader=e.loader.resentOTP,e.otpSentVia=l);var f={mobile:"91"+e.student.mobile,onCall:!!o};t.updateMobile(f,n,s)},e.verifyOTP=function(i){var n=function(t){e.activeLoader="",o.$broadcast(MOBILE_SUCCESSFULLY_VERIFIED,{mobile:e.student.mobile}),forceSessionRefresh()},a=function(t){e.activeLoader="",showAlert(t&&t.message||"Failed to verify otp. Please retry!","error","small",5e3)};e.activeLoader=e.loader.verifyOTP;var r={otp:i};t.verifyOtp(r,n,a)};var f=function(t){t&&t.data&&(t.data.mobileVerified?(e.student.mobile=t.data.mobileVerified.slice(2),s=t.data.mobileVerified.slice(2)):e.student.mobile=t.data.mobile?t.data.mobile.slice(2):"")},u=function(){e.student.mobile=e.mobile?12===e.mobile.length?e.mobile.slice(2):e.mobile:"",e.isOTPSent&&e.mobile?d(1e3,a,m):e.mobile||(e.isOTPSent=!1,TB.GetStudentFromStorage(f))};u()}angular.module("mobileVerification",["Testbook"]).directive("verifyMobile",e)}();
function priceSlider(){$("#mocktestPriceSlider_1").slider({range:!0,tooltip_split:!0,natural_arrow_keys:!0,orientation:"horizontal"}),$("#mocktestPriceSlider_2").slider({range:!0,tooltip_split:!0,natural_arrow_keys:!0,orientation:"horizontal"})}function courseNavSticky(){var e=getAnnBannerHeight();stickToParent(".js-course-nav",{offset_top:e+52,sticky_class:"stuck-to-parent"})}function offerBannerSlider(e){$(e+" li:last-child").hasClass("active")?$(e+" li:first-child a").tab("show"):$(e+" .active").next().find("a").tab("show")}function varOffsetForMocktestTabs(){var e=getAnnBannerHeight();stickToParent(".js-mocktest-tabs",{offset_top:e,sticky_class:"stuck-to-parent",parent:$(".js-mocktest-content")})}function setViewMoreViewLess(e){setTimeout(function(){var t=$(e);t.each(function(e,t){var s=$(t),r=s.children(".mt-card").outerHeight(!0);s.outerHeight(!0)>r&&(s.siblings(".js-view-more-less").show(),s.css({height:r}))})},500)}function stickToParent(e,t){$(e)&&$(e).length&&$(e).stick_in_parent(t)}var TBMOCK=TB||{};TBMOCK.LS_KEY_TXN_TEST_COUNT="txn_test_count",TBMOCK.LS_KEY_TXN_AMOUNT="txn_amount",TBMOCK.LS_KEY_TXN_COUPON_USED="txn_coupon";var TB_HEADER_HEIGHT=52;$(document).ready(function(){var e,t=$(".faq-box .question");$(document).on("click",".mocktest-filters .dropdown-menu",function(e){e.stopPropagation()}),$(document).on("click",".offer-controls span",function(){var e=$(this),t=e.attr("data-id");$(".offer-controls span").removeClass("active"),e.addClass("active"),$(".offer-banner .offer").removeClass("active"),$(".offer-banner ."+t).addClass("active")}),t.on("click",function(){var e=$(this).siblings(".answer");e.hasClass("active")?(t.removeClass("active"),e.removeClass("active").slideUp()):(t.removeClass("active"),$(this).addClass("active"),$(".faq-box .answer").removeClass("active").slideUp(),e.addClass("active").slideDown())}),$(document).on("click",".js-view-more",function(){$(this).parent().prev().css("height","auto"),$(this).hide().siblings(".js-view-less").show()}),$(document).on("click",".js-view-less",function(){var e=$(this).parent().prev(),t=$(".js-mocktest-tabs").outerHeight()||0,s=e.parents(".tests-sections").offset().top-t-getAnnBannerHeight(),r=e.children(".mt-card").outerHeight(!0);e.css({height:r}),$("html, body").animate({scrollTop:s},300),$(this).hide().siblings(".js-view-more").show()}),$(document).on("click",".mobile-search-filters-btns .btn, .js-set-price-filter",function(){priceSlider()}),$(document).on("loaded.tb.announcement-banner closed.tb.announcement-banner closed.tb.app-promotion-banner shown.tb.app-promotion-banner toggled.tb.announcement-banner",function(){$(".js-mocktest-tabs").trigger("sticky_kit:detach"),varOffsetForMocktestTabs()}),varOffsetForMocktestTabs(),$(document).on("click",".js-see-offers",function(){scrollToSpecificElement("#offeredTestsBox",getAnnBannerHeight())});var s=".js-banner-slide-nav";if($(s)&&$(s).length){var r=setInterval(function(){offerBannerSlider(s)},5e3);e=0,$(document).on("click",s+" li a",function(){clearTimeout(e),clearInterval(r);var t=function(){r=setInterval(function(){offerBannerSlider(s)},5e3)};e=setTimeout(t,5e3)})}document.getElementById("pageName")&&"coursePage"==document.getElementById("pageName").value&&(courseNavSticky(),$(document).on(enumTBEvents.annBannerAll,function(){$(".js-course-nav").trigger("sticky_kit:detach"),courseNavSticky()}))});var slideToggleHeader=throttle(function(){var e=$(".tb-landing-banner").outerHeight(),t=$(window).scrollTop();t>=e?$(".tb-main-header").addClass("slide-hide"):$(".tb-main-header").removeClass("slide-hide")},100),mocktestPageEvents=function(){$(window).scroll(function(){slideToggleHeader()})};$(window).resize(function(){setViewMoreViewLess("#my_test_tab .tests-sections .packs-container"),setViewMoreViewLess("#attempted_test_tab .tests-sections .packs-container"),setViewMoreViewLess("#daily_quiz_tab .tests-sections .packs-container")});var app=angular.module("mocktestApp",["Testbook","formValidations","tbHeaderApp","practiceChapterWidgetApp","productCardModule","mobileVerification","renderFinishModule","SEO"]);app.controller("mocktestController",["$scope","$rootScope","$timeout","$interval","$http","TB","$sce","subscriptionService","productCardService",function(e,t,s,r,a,o,i,n,l){function c(){var t,s,r,a=!1;for(t=0;t<e.myTestsArr.length;t+=1)for(r=e.myTestsArr[t].value,s=0;s<r.length;s+=1)r[s].isLiveTest&&(a=!0);a&&d()}function d(){var t,r,a,o=!1;for(t=0;t<e.myTestsArr.length;t+=1)for(a=e.myTestsArr[t].value,r=0;r<a.length;r+=1)a[r].isLiveTest&&(a[r].liveTestTimer=f(a[r]),o=u());o&&s(function(){c()},1e3)}function u(){var t,s,r;for(t=0;t<e.myTestsArr.length;t+=1)for(r=e.myTestsArr[t].value,s=0;s<r.length;s+=1)if(r[s].isLiveTest===!0&&!r[s].isPreLaunch&&(r[s].myCardClass.search("lt-default-state")!==-1||r[s].myCardClass.search("lt-start-test")!==-1))return!0;return!1}function f(e){var t,s,r,a,o,i,n,c,d,u=e,f=l.getCurrentTime(),m=(new Date(u.startTimeLive).getTime()-f)/1e3,p=(new Date(u.endTimeLive).getTime()-f)/1e3,g=0,h="";return m>0?(g=m,h=" To Start"):m<0&&p>0&&(g=p,h="Ends in"),t=getDaysDiff(new Date(u.startTimeLive).getTime(),l.getCurrentTime()),s=Math.floor(g/3600),r=Math.ceil((g-3600*s)/60),a=Math.floor(g-3600*s-60*Math.floor((g-3600*s)/60)),u.myCardClass=l.getClassForMyTests(u),o=t>1?t+" days to go":t+" day to go",i=s>1?s+" hours to go":s+" hour to go",n=r>1?r+" minutes to go":r+" minute to go",c=a>1?a+" seconds to go":a+" second to go",d=h+" "+w(s)+":"+w(r)+":"+w(a),t&&m>0?o:parseInt(s)&&m>0?i:parseInt(r)+1&&m>0?n:parseInt(a)&&m>0?c:d}function m(){function t(t){if(e.isPromotionsPage){for(var r=0;r<e.allTestsObj.packs.length;r+=1)e.allTestsObj.packs[r].cardClass=l.getProductCardClass(e.allTestsObj.packs[r],t,e.isPromotionsPage);for(var r=0;r<e.allTestsObj.comboPacks.length;r+=1)e.allTestsObj.comboPacks[r].cardClass=l.getProductCardClass(e.allTestsObj.comboPacks[r],t,e.isPromotionsPage)}else{for(var r=0;r<e.allTestsObj.packs.length;r+=1){s=e.allTestsObj.packs[r].value||[];for(var a=0;a<s.length;a+=1)s[a].cardClass=l.getProductCardClass(s[a],t,e.isPromotionsPage)}for(var r=0;r<e.allTestsObj.comboPacks.length;r+=1){s=e.allTestsObj.comboPacks[r].value||[];for(var a=0;a<s.length;a+=1)s[a].cardClass=l.getProductCardClass(s[a],t,e.isPromotionsPage)}}}var s=[],r=[],a=function(e,t){e.indexOf(t)===-1&&e.push(t)},o=function(e,t){for(var s=validateArr(e),r=validateArr(t),a=0;a<r.length;a+=1)if(s.indexOf(r[a])!==-1)return!0;return!1},i=function(e,t){for(var s=0;s<t.length;s+=1)a(e,t[s].id)};if(e.isPromotionsPage){for(var n=0;n<e.allTestsObj.packs.length;n+=1)e.allTestsObj.packs[n].isPartOfCart&&a(r,e.allTestsObj.packs[n].id);for(var n=0;n<e.allTestsObj.comboPacks.length;n+=1)(e.allTestsObj.comboPacks[n].isPartOfCart||o(r,e.allTestsObj.comboPacks[n].addedPids))&&(a(r,e.allTestsObj.comboPacks[n].id),o(r,e.allTestsObj.comboPacks[n].addedPids)||i(r,e.allTestsObj.comboPacks[n].items))}else{for(var n=0;n<e.allTestsObj.packs.length;n+=1){s=e.allTestsObj.packs[n].value||[];for(var c=0;c<s.length;c++)s[c].isPartOfCart&&a(r,s[c].id)}for(var n=0;n<e.allTestsObj.comboPacks.length;n+=1){s=e.allTestsObj.comboPacks[n].value||[];for(var c=0;c<s.length;c+=1)(s[c].isPartOfCart||o(r,s[c].addedPids))&&(a(r,s[c].id),o(r,s[c].addedPids)||i(r,s[c].items))}}t(r)}function p(t){var s;for(s=0;s<t.length;s+=1)if(e.currentCourseId===t[s].course.id){if(!t[s].course.isInactive)return!0;e.isReEnroll=!0}return!1}function g(t){var s,r,a=[],o=[],i=[],l=validateArr(t);for(s=0;s<l.length;s+=1)"subscription"===l[s].type.toLowerCase()||"subscription bundle"===l[s].type.toLowerCase()?(o.push(),a.push(l[s])):i.push(l[s]);if(parseInt(e.sid||0)!==-1)k(a);else{for(n.subsBundleIdToObjMap=getCustomMap(a,"_id","",!0),s=0;s<a.length;s+=1)r=n.processSubscriptionObject(a[s],{},{},[]),e.subsArr.push(r),e.subsArrMap[r.id]=r||{};h(e.subsArr)}return i}function h(t){var s,r,a,o,i;for(s=0;s<t.length;s+=1)t[s].isActive&&!t[s].isExpired&&(e.isSubscriptionActive=!0,l.setSubscriptionStatus(e.isSubscriptionActive));var n=function(t){for(s=0;s<e.allTestsObj[t].length;s+=1)for(a=e.allTestsObj[t][s].value||[],r=0;r<a.length;r+=1)a[r].cardClass=l.getProductCardClass(a[r],[],e.isPromotionsPage)},c=function(t){for(o in e.courseIdToExpiryMap)if(e.courseIdToExpiryMap.hasOwnProperty(o))for(i=e.allTestsObj[t],s=0;s<i.length;s+=1)i[s].courses&&i[s].courses[0]&&o===i[s].courses[0].id&&e.courseIdToExpiryMap[o].expiry-(new Date).getTime()>0&&(i[s].cardClass=l.getProductCardClass(i[s],[],e.isPromotionsPage))},d=function(t){for(o in e.courseIdToExpiryMap)if(e.courseIdToExpiryMap.hasOwnProperty(o))for(s=0;s<t.length;s+=1)t[s].courses&&t[s].courses.length&&o===t[s].courses[0].id&&e.courseIdToExpiryMap[o].expiry-(new Date).getTime()>0&&(t[s].cardClass=l.getProductCardClass(t[s],[],e.isPromotionsPage))};e.isPromotionsPage?(c("packs"),c("comboPacks")):e.isCoursePage?(d(e.packsArrForCourses),d(e.combosArrForCourses)):(n("packs"),n("comboPacks"))}function T(e){for(var t=0;t<e.length;t++)if(e[t].isShow&&!e[t].isActive)return!0;return!1}function b(){var t,s,r;e.isFreeTestsAvailable=!1,e.isPaidTestsAvailable=!1,e.isAllTestsAvailable=!1,e.isMyTestsAvailable=!1,e.isAttemptedTestsAvailable=!1,e.isTestsAvailable=!1,e.isQuizAvailable=e.allQuizesArr&&e.allQuizesArr.length;var a=e.allTestsObj.nonProducts,o=e.allTestsObj.packs,i=e.allTestsObj.comboPacks,n=e.myTestsArr,l=e.attemptedTestsArr;if(a&&a.length)for(t=0;t<a.length;t++)if(!a[t].isHide){e.isFreeTestsAvailable=!0;break}if(o&&o.length)for(t=0;t<o.length;t++)if(r=o[t].value,r&&r.length)for(s=0;s<r.length;s++)if(!r[s].isHide){e.isPaidTestsAvailable=!0;break}if(i&&i.length)for(t=0;t<i.length;t++){if(r=i[t],r.value&&r.value.length)for(s=0;s<r.value.length;s++)if(!r.value[s].isHide){e.isPaidTestsAvailable=!0;break}if(r.subsArr&&r.subsArr.length)for(s=0;s<r.subsArr.length;s++)if(r.subsArr[s].isShow&&!r.subsArr[s].isActive){e.isPaidTestsAvailable=!0;break}}if(n&&n.length)for(t=0;t<n.length;t++)if(n[t].value&&n[t].value.length){e.isMyTestsAvailable=!0;break}if(l&&l.length)for(t=0;t<l.length;t++)if(!l[t].isHide){e.isAttemptedTestsAvailable=!0;break}(e.isFreeTestsAvailable||e.isPaidTestsAvailable||e.isMyTestsAvailable||e.isAttemptedTestsAvailable)&&(e.isTestsAvailable=!0),(e.isFreeTestsAvailable||e.isPaidTestsAvailable)&&(e.isAllTestsAvailable=!0)}function v(t){var s={"557af9de0ea5ce31f052918a":["58135074adafff45a35a5103","557af9de0ea5ce31f0529187"],"561664f8cac3ae28e5213e87":["578f5618995a2d5b4c3f6e9a","557af9de0ea5ce31f0529187"],"55a5784fa7b57b49a29e2125":["578f5618995a2d5b4c3f6e9a","557af9de0ea5ce31f0529187"],"55a57ad3a7b57b49e58559ee":["57ff175ee9f131722fde54d6","578f5618995a2d5b4c3f6e9a","557af9de0ea5ce31f0529187"],"55a57ad3a7b57b49e58559ed":["57fe2e4f03282162c9764bee","557af9de0ea5ce31f0529187"],"568a752485111b4193101101":["557569e82a39650f6f395648","568a751185111b4193101100","569c9730995a2d097081cf8a","566947a4a7b57b398faca54b","5796d79e9389865c92bf0806"],"557af9de0ea5ce31f0529187":["55a57ad3a7b57b49e58559ee","557af9de0ea5ce31f052918a","55a5784fa7b57b49a29e2125","55a57ad3a7b57b49e58559ed","561664f8cac3ae28e5213e87","578f5618995a2d5b4c3f6e9a"],"569c9730995a2d097081cf8a":["557569e82a39650f6f395648","568a751185111b4193101100","566947a4a7b57b398faca54b","568a752485111b4193101101","5796d79e9389865c92bf0806"],"557569e82a39650f6f395648":["568a751185111b4193101100","584ff379e9f131060a2edbfd","569c9730995a2d097081cf8a","566947a4a7b57b398faca54b","5796d79e9389865c92bf0806"],"568a751185111b4193101100":["557569e82a39650f6f395648","584ff379e9f131060a2edbfd","569c9730995a2d097081cf8a","566947a4a7b57b398faca54b","568a752485111b4193101101","5796d79e9389865c92bf0806"],"566947a4a7b57b398faca54b":["557569e82a39650f6f395648","568a751185111b4193101100","569c9730995a2d097081cf8a","568a752485111b4193101101","5796d79e9389865c92bf0806"],"58135074adafff45a35a5103":["557af9de0ea5ce31f052918a","578f5618995a2d5b4c3f6e9a","557af9de0ea5ce31f0529187"],"57ff175ee9f131722fde54d6":["55a57ad3a7b57b49e58559ee","578f5618995a2d5b4c3f6e9a","557af9de0ea5ce31f0529187"],"57fe2e4f03282162c9764bee":["55a57ad3a7b57b49e58559ed","578f5618995a2d5b4c3f6e9a","557af9de0ea5ce31f0529187"],"5796d79e9389865c92bf0806":["557569e82a39650f6f395648","568a751185111b4193101100","569c9730995a2d097081cf8a","566947a4a7b57b398faca54b","568a752485111b4193101101"],"578f5618995a2d5b4c3f6e9a":["55a57ad3a7b57b49e58559ee","557af9de0ea5ce31f052918a","55a5784fa7b57b49a29e2125","55a57ad3a7b57b49e58559ed","561664f8cac3ae28e5213e87","57ff175ee9f131722fde54d6"],"584ff379e9f131060a2edbfd":["557569e82a39650f6f395648","568a751185111b4193101100","569c9730995a2d097081cf8a","566947a4a7b57b398faca54b","568a752485111b4193101101","5796d79e9389865c92bf0806"],"5878cdbc995a2d421d498e6f":["58135074adafff45a35a5103","557af9de0ea5ce31f052918a","557af9de0ea5ce31f0529187"],"5878cda4995a2d421d498df2":["57fe2e4f03282162c9764bee","55a57ad3a7b57b49e58559ed","557af9de0ea5ce31f0529187"],"599d488ce07ce03233deaeb3":["557569e82a39650f6f395648","568a751185111b4193101100"]},r=s[t]||[],a=$("#course_info")&&$("#course_info").val()||"[]",o=JSON.parse(a),i=[],n={id:"",name:"",url:""};e.courseToCoursesArr=[],o.forEach(function(e){if(e.isGroup)for(var t=0;t<e.courses.length;t++)n={id:e.courses[t].id,name:e.courses[t].abbr,url:e.courses[t].URL},r.indexOf(n.id)!=-1&&i.push(n);else n={id:e.id,name:e.abbr,url:e.URL},r.indexOf(n.id)!=-1&&i.push(n)}),e.courseToCoursesArr=i}function A(t){for(var s=0,r=0;r<e.specificExamsArr.length;r++)e.specificExamsArr[r].isUpcoming&&(s+=1);return t?s:e.specificExamsArr.length-s}var y="headerText",P={},C="REMOVE_STU_COURSE_DROPDOWN",S={_id:"-1",color:"",course:[],name:"Paused Tests",order:-1,sort:"pausedTestOrder",sortOrder:"asc",type:"category"};e.registerationSkipped=!1,e.GK_CURRENT_AFFAIRS_COURSE_ID="557af9de0ea5ce31f052918b",t.$on("MobileVerifiedSuccessfully",function(){e.isMobileVerified=!0,e.includeMobilVerificationBlock=!1}),t.$on("REMOVED_FROM_CART",function(t,s){var r,a;for(r=0;r<s.idsArr.length;r+=1)if(n.subsBundleIdToObjMap[s.idsArr[r]])for(a=0;a<n.subsBundleIdToObjMap[s.idsArr[r]].courses.length;a+=1)I.hasOwnProperty(n.subsBundleIdToObjMap[s.idsArr[r]].courses[a].name)&&delete I[n.subsBundleIdToObjMap[s.idsArr[r]].courses[a].name];e.resetItemsForCartStatus(s.idsArr,!1)}),t.$on("SET_REMAINING_COINS",function(t,s){e.remCoins=s.coins,l.setRemainingCoins(e.remCoins),e.checkForProductsWithCoinsCallBack(s.coins)}),t.$on("PURCHASE_SUBSCRIPTION_FROM_CALCULATOR",function(t,s){e.addToCart([s.data],!0,e.mycoins,!1)}),e.hideBodyScroll=!1,e.toggleBodyScroll=function(t){e.hideBodyScroll=t},e.setBannerBgImgUrl=function(){"557af9de0ea5ce31f052918b"==e.currentCourseId?e.bannerBgImgUrl="ca-course-bg-2.jpg":e.bannerBgImgUrl="mocktest-banner-bg-1.jpg"},e.openMobileFilters=function(t){e.showFiltersAllTests=!1,e.showFiltersMyTests=!1,e.showFiltersQuiz=!1,"all"===t?e.showFiltersAllTests=!0:"my"===t?e.showFiltersMyTests=!0:"quiz"===t&&(e.showFiltersQuiz=!0),e.toggleBodyScroll(!0)},e.closeMobileFilters=function(){e.showFiltersAllTests=!1,e.showFiltersMyTests=!1,e.showFiltersQuiz=!1,e.toggleBodyScroll(!1)},e.showSearchOnMobile={my:!1,quiz:!1},e.toggleSearchOnMobile=function(t,s){"my"===s&&(e.showSearchOnMobile.my=t),"quiz"===s&&(e.showSearchOnMobile.quiz=t),e.toggleBodyScroll(t)},e.addPacksToMyTestsViaSubscription=function(t,r){function a(a){var o,i,n,c,d=[];for(o=0;o<t.items.length;o+=1)if("test"===t.items[o].type.toLowerCase())t.items[o].myCardClass=l.getClassForMyTests(t.items[o]),d.push(t.items[o]);else if("product"===t.items[o].type.toLowerCase())for(n=t.items[o].id,c=validateArr(e.mapPidToProduct[n]&&e.mapPidToProduct[n].items),i=0;i<c.length;i+=1)c[i].myCardClass=l.getClassForMyTests(c[i]),d.push(c[i]);r.splice(r.indexOf(t),1),e.myTestsArr=e.resetMyTestsAfterAddingFreeTests(d),e.manageTabs("my"),b(),hideLoader(),(e.isCoursePage||e.isPromotionsPage)&&(e.setTestsAddedStatus(!0),s(function(){e.setTestsAddedStatus(!1)},7e3))}function i(e){hideLoader(),showAlert(e.message||"Something went wrong, Please try again.","error","sm",3e3)}showLoader("Adding Tests To Your Account Please Wait."),o.addPacksToMyTestsViaSubscription({pid:t.id},a,i)},e.addSubsBtnClicked=function(t){var s,r=e.subsArrMap[t]||{};return r.statusClass.search("subs-inactive")!==-1||r.statusClass.search("subs-upgrade")!==-1?e.isCoursePage&&"-1"===e.sid?(s={},s[REDIRECT_URL_KEY]="/"+e.curCourseURL+"/mocktest?pid="+r.id,s[COURSE_IDS_KEY]=e.currentCourseId,s[y]="Sign up to subscribe courses",openSignUpSignInModal(s,!1)):e.addToCart([r],!0,e.mycoins,!1):r.statusClass.search("subs-expired")!==-1&&e.showRenewSubscriptionModal(r),0},e.addAllFreeTests=function(t){var s,r,a=[];for(s=0;s<t.length;s+=1)r=t[s].endTimeLive-l.getCurrentTime(),(0===t[s].cost&&t[s].isLiveTest&&r>0||0===t[s].cost&&!t[s].isLiveTest)&&a.push(t[s]);e.addToCart(a,!1,e.mycoins,!1)},e.addToCartHelper=function(t){e.addToCart([t],!0,e.myCoins,!1)},e.isLSExistForReqMoreBlock=!1,e.isPromotionsPage=!1,e.isCoursePage=!1,e.isEnrolledInCourse=!1,e.isLoggedIn=isLoggedIn(),e.isReEnroll=!1,e.triggerEnrollmentPipeline=function(t){var s,r,a=t;a||(a=function(){return window&&(showLoader("Redirecting to mocktest page, Please wait..."),window.location.href="/"+e.curCourseURL+"/mocktest?tab=my"),!1}),p(P.enrollments)?a&&a():(e.isReEnroll?(s="Oh! You un-enrolled from the "+e.currentCourseName+" course, you want to re-enroll in the course?",r="Yes, re-enroll"):(s="Oh! We see that you are not enrolled in "+e.currentCourseName+". You need to enroll in the course to add your test",r="Yes, Enroll & add Test"),bootbox.confirm({message:s,buttons:{confirm:{label:r,className:"btn-primary"},cancel:{label:"No",className:"btn-default"}},callback:function(t){t?e.enrollInCourse(e.currentCourseId,a):O=[]}}))};var I={},O=[];e.addToCart=function(s,r,a,o,i){function n(){O&&O.length&&e.addFreeTest(O)}var l,c,d,u=s,f=[];O=[];var p,g,h;if(e.isCoursePage&&u[0].cost>0&&"-1"!==e.sid)return window.location="/"+e.curCourseURL+"/mocktest?pid="+u[0].id+"&tab=my",0;if(e.isCoursePage&&"-1"===e.sid)return p={},p[REDIRECT_URL_KEY]="/"+e.curCourseURL+"/mocktest?pid="+u[0].id+"&tab=my",p[COURSE_IDS_KEY]=e.currentCourseId,i?p[y]="Sign up to take your free test":p[y]="Sign up to buy the tests",openSignUpSignInModal(p,!1),0;for(l=0;l<u.length;l+=1)if(d=u[l],0===d.cost)O.push(d);else{if(u[l].isPartOfCart=!0,"Subscription Bundle"==d.type){for(var g=!1,c=0;c<d.coursesObjArr.length;c++)I.hasOwnProperty(d.coursesObjArr[c].name)&&!g?(showAlert("You can't add two products with one or more common courses.","warning","medium",5e3),g=!0):I[d.coursesObjArr[c].name]=1;h={id:d.id,cost:d.cost,title:d.title,type:d.type,exams:Object.keys(I),items:e.getItemsIdsArrForProducts(d),availTill:d.availTill,validity:d.validity,validityInString:d.validityString}}else h={id:d.id,cost:d.cost,title:d.title,type:d.type,exams:Object.keys(I),items:e.getItemsIdsArrForProducts(d),availTill:d.availTill};o?o&&e.mycoins>=h.cost*e.coinsPercentage/100&&f.push(h):f.push(h)}O&&O.length&&e.triggerEnrollmentPipeline(n),f&&f.length&&(d={},d=e.isPromotionsPage?{cartItemsArr:f,isOpenFlyout:r,mycoins:a,isAddWithCoins:o,liveTestIdForPromotions:e.liveTestIdForPromotions,isSyncWithServer:!1,coinsPercentage:e.coinsPercentage}:{cartItemsArr:f,isOpenFlyout:r,mycoins:a,isAddWithCoins:o,isSyncWithServer:!0,coinsPercentage:e.coinsPercentage},t.$broadcast("ADD_TO_CART",d)),m()},e.itemsInCartToggle=!1,e.toggleProductInCart=function(r){var a;r.isPartOfCart?(a=[r.id],t.$broadcast("REMOVE_FROM_CART",{idsArr:a,isOpenFlyout:!1})):e.addToCart([r],!1,e.mycoins,!1),e.itemsInCartToggle=!0,s(function(){e.itemsInCartToggle=!1},300)},e.getItemsIdsArrForProducts=function(e){var t,s,r,a,o=[];if(e.items&&e.items.length&&!e.isCombo){for(t=[],a=0;a<e.items.length;a+=1)t.push(e.items[a].id);o.push({pid:e.id,tests:t})}else{for(s=[],r=[],a=0;a<e.items.length;a+=1)"test"===e.items[a].type?s.push(e.items[a].id):r.push(e.items[a].id);o.push({pid:e.id,tests:s,products:r})}return o},e.freeTestsCountAdded=0,e.freeTestAddedTitle="",e.addFreeTest=function(t,r,a){function i(e){r&&r(!1)}var n,d,u,f,m,p,g=validateArr(t),h=[],T=[],v=[],A=[];if("-1"===e.sid||!e.sid){if(a){var y="/"+e.curCourseURL+"/tests/"+e.testToStart.id+"#/interface/q";return window.location=y,0}return n={},n[REDIRECT_URL_KEY]="/"+e.curCourseURL+"/mocktest",n[COURSE_IDS_KEY]=e.currentCourseId,openSignUpSignInModal(n,!0),0}if(!g||!g.length||"-1"===e.sid||!e.sid)return 0;for(e.addFreeTestSCB=function(t){for(hideLoader(),d=0;d<e.allTestsObj.nonProducts.length;d+=1){for(m=!0,u=0;u<g.length;u+=1)if(g[u].id===e.allTestsObj.nonProducts[d].id){m=!1,g[u].myCardClass=l.getClassForMyTests(g[u]),g[u].cardClass=g[u].cardClass?" part-of-my-tests":"part-of-my-tests",setLocalStorageOnLiveTestAdd(g[u].id),A.push(g[u]);break}m&&v.push(e.allTestsObj.nonProducts[d])}e.myTestsArr=e.resetMyTestsAfterAddingFreeTests(A),e.allTestsObj.nonProducts=v,c(),e.freeTestsCountAdded=g.length,e.freeTestAddedTitle=g[0].title,s(function(){e.setTestsAddedStatus(!1)},7e3),e.isPromotionsPage||e.setFiltersMocktest(),b(),r?r(!0):(e.setTestsAddedStatus(!0),e.isCoursePage&&(showLoader("Redirecting to mocktest page, Please wait..."),window.location.href="/"+e.curCourseURL+"/mocktest?tab=my"))},e.closeFreeTestAdded=function(){e.setTestsAddedStatus(!1)},d=0;d<g.length;d+=1)g[d].items?T.push(e.getProductObj(g[d])):h.push(g[d].id);f={coins:0,coupon:"",products:T||[],tests:h||[]},f.livetestid="",p={coins:0,coupon:"",ismobile:!1,tests:h.join(",")||[],livetestid:""},showLoader("Adding Free Tests. Please Wait."),o.manageTransactions(p,e.addFreeTestSCB,i)},e.getProductObj=function(e){var t,s={pid:e.id,tests:[]};for(t=0;t<e.items.length;t+=1)s.tests.push(e.items[t].id);return s},e.resetMyTestsAfterAddingFreeTests=function(t){var s,r,a,o,i,n=t||[],c={},d=[];for(s=0;s<e.myTestsArr.length;s+=1)for(o=e.myTestsArr[s].value,r=0;r<o.length;r++)n.push(o[r]);for(s=0;s<n.length;s+=1)c[n[s].id]=n[s];for(a in c)c.hasOwnProperty(a)&&d.push(c[a]);return i=l.getCompleteSortedCategorizedItemsArr(d,!1,"fromResetMyTestsAfterAddingFreeTests","asc")},e.resetItemsForCartStatus=function(t,s){var r,a,o,i;for(r=0;r<e.allTestsObj.nonProducts.length;r+=1)o=e.allTestsObj.nonProducts[r],t.indexOf(o.id)!==-1&&(o.isPartOfCart=s,o.cardClass=l.getProductCardClass(o,[],e.isPromotionsPage,e.isSubscriptionActive));if(e.isPromotionsPage)for(r=0;r<e.allTestsObj.packs.length;r++)t.indexOf(e.allTestsObj.packs[r].id)!==-1&&(e.allTestsObj.packs[r].isPartOfCart=s,e.allTestsObj.packs[r].cardClass=l.getProductCardClass(e.allTestsObj.packs[r],[],e.isPromotionsPage));else for(r=0;r<e.allTestsObj.packs.length;r+=1)for(i=e.allTestsObj.packs[r].value,a=0;a<i.length;a++)t.indexOf(i[a].id)!==-1&&(i[a].isPartOfCart=s,i[a].cardClass=l.getProductCardClass(i[a],[],e.isPromotionsPage));if(e.isPromotionsPage)for(r=0;r<e.allTestsObj.comboPacks.length;r+=1)t.indexOf(e.allTestsObj.comboPacks[r].id)!==-1&&(e.allTestsObj.comboPacks[r].isPartOfCart=s,e.allTestsObj.comboPacks[r].cardClass=l.getProductCardClass(e.allTestsObj.comboPacks[r],[],e.isPromotionsPage));else for(r=0;r<e.allTestsObj.comboPacks.length;r+=1)for(i=e.allTestsObj.comboPacks[r].value,a=0;a<i.length;a++)t.indexOf(i[a].id)!==-1&&(i[a].isPartOfCart=s,i[a].cardClass=l.getProductCardClass(i[a],[],e.isPromotionsPage));m()},e.freeTestsCount=0,e.storeNonProducts=function(t,s,r){var a,o,i,n,c=s;for(e.freeTestsCount=c.length,a=0;a<r.length;a+=1)if(r[a].items&&1===r[a].items.length&&0===r[a].cost)for(c.push(r[a]),n=r[a].items||[],o=0;o<n.length;o+=1)i=l.getProcessedTestObj(n[o]),e.testIdToTestMAP[i.id]=i;for(a=0;a<c.length;a+=1)c[a]=l.getProcessedTestObj(c[a]);e.allTestsObj.nonProducts=sortFunction(c,"availFrom","number","desc")},e.getFreeTestsCount=function(e){var t,s,r,a=validateArr(e);for(r=0,t=0;t<a.length;t+=1)a[t].isLiveTest?(s=a[t].endTimeLive-l.getCurrentTime(),r=s>0?r+1:r):0===a[t].cost&&a[t].isShow&&(r+=1);return r},e.getSortedArrForRepeat=function(e){var t,s,r,a=[];for(t=0;t<e.length;t+=1)for(r=e[t].value,s=0;s<r.length;s+=1)a.push(r[s]);return a},e.subsArr=[],e.purchasedSubsMap={},e.subsArrMap={},e.courseIdToExpiryMap={};var F=function(e){for(var t in e)e[t].validity=e[t]&&e[t].subsId&&n.subsBundleIdToObjMap[e[t].subsId]&&n.subsBundleIdToObjMap[e[t].subsId].validity;return e},k=function(t){var s=function(s){if(s.data&&s.success){var r=n.getCourseToExpiryMap(s.data.subscriptions);e.courseIdToExpiryMap=r||{},l.setCourseIdToExpiryMap(e.courseIdToExpiryMap);var a=s.data.subscriptions,o=s.data.attemptedTests||[];n.subsBundleIdToObjMap=getCustomMap(t,"_id","",!0),F(r)}e.purchasedSubsMap=n.getPurchasedSubsMap(a)||{},l.setPurchasedSubsMap(e.purchasedSubsMap);for(var i=0;i<t.length;i++){var c=n.processSubscriptionObject(t[i],r,e.purchasedSubsMap,o);e.subsArr.push(c),e.subsArrMap[c.id]=c||{}}if(l.setSubsArrMap(e.subsArrMap),e.isPromotionsPage)for(var i=0;i<e.subsArr.length;i++){var d=t[i].cost,u=t[i].completePackCost,f=getRoundedFloat(d/u,2)||1;e.subsArr[i]=e.addPromotionsDetails(e.subsArr[i],f),h(e.subsArr)}x+=1,2==x&&j(e.studentApiData)},r=function(e){console.log(e)};o.getStuSubsPlan({},s,r)};e.getRoundedFloat=function(e,t){return getRoundedFloat(e,t)},e.isShowSubsCategoryForPromotionPage=function(e){for(var t=0;t<e.length;t++)if(e[t].isShow&&"subs-active"!=e[t].statusClass)return!0;return!1};var E=function(){for(var t=0;t<e.subsArr.length;t++){for(var s=!1,r=e.subsArr[t]||{},a=0;a<e.allTestsObj.comboPacks.length;a++)if(e.allTestsObj.comboPacks[a].subsArr||(e.allTestsObj.comboPacks[a].subsArr=[]),e.allTestsObj.comboPacks[a].categoryId==e.subsArr[t].category){s=!0,e.allTestsObj.comboPacks[a].subsArr.push(e.subsArr[t]);break}if(!s){var o=r.category||"",i=e.allCategoryObjById[o]||{},n={categoryId:o,categoryName:i.name||"",categoryOrder:i.order,orderBy:i.sort,sortOrder:i.sortOrder,value:[],subsArr:[r]};e.allTestsObj.comboPacks.push(n)}}};e.showSubReleasePlan=function(e){n.releasePlanBtnClicked(e)},e.showCalculationPlan=function(e){n.calcSavingsBtnClicked(e,e.calcData,e.courseSelectionDS)},e.filteredRenewItems=[],e.showRenewSubscriptionModal=function(){e.filteredRenewItems=n.mockTestSubsFilter(e.currentCourseName,e.purchasedSubsMap,e.subsArr),n.renewSubscriptionBtnClicked()},e.isSubscriptionActive=!1,e.mapPidToProcessedProduct={},e.storeProducts=function(t,s){var r,a=[];for(r=0;r<t.length;r+=1)if(t[r].cost>0){var o=l.getProcessedPackObj(t[r],s);o.id&&a.push(o)}for(r=0;r<a.length;r+=1)e.mapPidToProcessedProduct[a[r].id]=a[r];l.setMapPidToProcessedProduct(e.mapPidToProcessedProduct);var i=l.getCompleteSortedCategorizedItemsArr(a,s,!1,"asc")||[];"pack"===s.toLowerCase()?e.allTestsObj.packs=sortFunction(i,"categoryOrder","number","asc"):"combo"===s.toLowerCase()&&(e.allTestsObj.comboPacks=sortFunction(i,"categoryOrder","number","asc"),l.setAllTestsObj(e.allTestsObj)),e.isCoursePage&&!e.sid&&e.initializeCoursePage()},e.courseQuizArr=[],e.initializeCoursePage=function(){e.freeTabClass="",e.packsTabClass="",e.comboTabClass="",e.isShowTabsOnCoursesPage=!1,e.testsArrForCourses=e.getFreeTestsArrForCoursesPage(e.allTestsObj.nonProducts)||[],e.packsArrForCourses=e.getPacksForCoursesPage(e.allTestsObj.nonProducts,e.allTestsObj.packs)||[],e.combosArrForCourses=e.getArrFromCategoryArr(e.allTestsObj.comboPacks)||[];var t=getURLParameterValue("testsTab");if(t.length?("combo"===t&&(e.comboTabClass="active"),"packs"===t&&(e.packsTabClass="active"),"free"===t&&(e.freeTabClass="active")):e.testsArrForCourses.length?e.freeTabClass="active":e.combosArrForCourses&&e.combosArrForCourses.length||e.subsArr&&e.subsArr.length?e.comboTabClass="active":e.packsArrForCourses&&e.packsArrForCourses.length&&(e.packsTabClass="active"),(e.testsArrForCourses.length||e.packsArrForCourses.length||e.combosArrForCourses.length||T(e.subsArr))&&(e.isShowTabsOnCoursesPage=!0),e.todaysQuizArr&&e.todaysQuizArr.length){e.courseQuizArr=[];for(var r=0;r<e.todaysQuizArr.length;r+=1)e.todaysQuizArr[r].isUnattempted&&e.courseQuizArr.push(e.todaysQuizArr[r])}s(function(){$(".tab-head>li.active").click()},1e3)},e.enrollNowBtnClicked=function(){var t=function(e,t,s,r){for(var a=window.location.href,o=!0,i=0;i<e.length;i++)if(a.indexOf(e[i])==-1){o=!1;break}o&&TBAnalytics.hooks.event(t,s,r,1)};t(["/ssc-cgl"],"Button - Enroll Now","Click","SSC/CGL - Enroll Now");var s={};s[REDIRECT_URL_KEY]="/"+e.curCourseURL+"/mocktest",s[COURSE_IDS_KEY]=e.currentCourseId,s[y]="Sign up for your free test",openSignUpSignInModal(s,!1)},e.getFreeTestsArrForCoursesPage=function(e){for(var t=[],s=0;s<e.length;s++)0!=e[s].cost||e[s].isAlreadyPurchased||t.push(e[s]);return t},e.getPacksForCoursesPage=function(t,s){for(var r=[],a=0;a<t.length;a++)t[a].cost>0&&t[a].items&&t[a].items.length>1&&r.push(t[a]);return r=r.concat(e.getArrFromCategoryArr(s))},e.getArrFromCategoryArr=function(e){e=e&&e.length&&e||[];for(var t=[],s=0;s<e.length;s++)for(var r=e[s].value,a=0;a<r.length;a++){var o=r[a];o.isAlreadyPurchased||o.isHide||t.push(o)}return t=t&&t.length&&t||[]},e.getItemsOfPackFromId=function(t,s,r){for(s=s&&s.length?s:[],r=r&&r.length?r:[],o=0;o<s.length;o++){var a=s[o];if(a.id==t)return[a]}if(e.isPromotionsPage){for(var o=0;o<r.length;o++)if(r[o].id==t)return r[o].items||[]}else for(var o=0;o<r.length;o++)for(var i=r[o].value,n=0;n<i.length;n++)if(i[n].id==t)return i[n].items||[];return[]},e.testTypes=[],e.allTestsObj={nonProducts:[],comboPacks:[],packs:[]},e.paidTestsOfExpiredProducts=[],e.totalAttemptedTests=0,e.testIdToTestMAP={},e.totalQuizes=0,e.allCategoryObjByName={},e.allCategoryObjById={},e.mapPidToItems={},e.mapPidToProduct={},e.maxSkipAllowed=0,e.totalTestsCount=0,e.totalQuestionsCount=0,e.getProductDetailsSCB=function(t){var s;e.coinsPercentage=t&&t.data&&t.data.coinsPercentage||0,l.setCoinsPercentage(e.coinsPercentage),s=validateArr(t.data.categories),t&&t.data&&t.data.categories&&t.data.categories.push(S),e.allCategoryObjByName=getCustomMap(s,"name","",!0),e.allCategoryObjById=getCustomMap(s,"_id","",!0),l.setAllCategoryMap(e.allCategoryObjById);var r=1e3*t.data.current_time;if(l.setTimerForCurrentTime(r),e.maxSkipAllowed=t.data.maxSkipAllowed||1e4,t&&t.data&&t.data.quizzes&&t.data.quizzes.length&&(e.totalQuizes=t.data.quizzes.length||0,t.data.tests&&t.data.tests.length?t.data.tests=t.data.tests.concat(t.data.quizzes):t.data.tests=t.data.quizzes),e.mapPidToItems=getCustomMap(t.data.products,"_id","items",!1),e.mapPidToProduct=getCustomMap(t.data.products,"_id","",!0),l.setPidToItemsMap(e.mapPidToItems),l.setPidToProductMap(e.mapPidToProduct),e.isPromotionsPage)hideLoader(),e.promotionsMap=e.getPromotionsMap(t.data.live_promotion),t.data.products=g(t.data.products),e.processPromotions(t),n.callDataLayerFunction();else if(e.isCoursePage){e.totalAttemptedTests=t.data.total_attempted_tests?t.data.total_attempted_tests:0,e.storeNonProducts(e.allTestsObj.nonProducts||[],t.data.tests||[],t.data.products||[]),e.storeTestsOfExpiredProducts=t.data.paid_tests||[],l.setTestsOfExpiredProducts(e.storeTestsOfExpiredProducts);var a=g(t.data.products);if(e.storeProducts(a||[],"pack"),e.storeProducts(a||[],"combo"),e.sid&&"-1"!=e.sid){var i={medium:"web"};o.getStudentDetails(e.sid,e.currentCourseId,i,e.getStudentDetailsSCB)}else hideLoader(),e.makeTestIdToTestMap([]),e.totalTestsCount=l.getTotalTestCount(e.myTestsIds,e.myProductIds,e.testIdToTestMAP),e.totalQuestionsCount=l.getTotalQuestionsCount(e.myTestsIds,e.myProductIds,e.testIdToTestMAP),n.callDataLayerFunction(),B(),e.initializeCoursePage()}else{e.totalAttemptedTests=t.data.total_attempted_tests?t.data.total_attempted_tests:0,e.storeNonProducts(e.allTestsObj.nonProducts||[],t.data.tests||[],t.data.products||[]),e.storeTestsOfExpiredProducts=t.data.paid_tests||[],l.setTestsOfExpiredProducts(e.storeTestsOfExpiredProducts);var a=g(t.data.products);e.storeProducts(a||[],"pack"),e.storeProducts(a||[],"combo");var i={medium:"web"};o.getStudentDetails(e.sid,e.currentCourseId,i,e.getStudentDetailsSCB)}scrollToLoc(),b()},e.allTestsObj={},e.allTestsObj.nonProducts=[],e.allTestsObj.packs=[],e.allTestsObj.comboPacks=[],e.promotionsMap={},e.promo={title:"",description:""
},e.showTestDetails=!0,e.processPromotions=function(t){e.liveTestIdForPromotions=t.data.live_promotion.testId,e.promotionEndTime=t.data.live_promotion.expiresOn;var r=t.data.products||[],a=[],o=t.data.tests||[],i=1e3*t.data.current_time;l.setTimerForCurrentTime(i),e.promotionsTimer(),e.mycoins=t.data.coins,e.liveTestEndTime=t.data.live_test_end_time,e.promo.title=t.data.live_promotion.title||"",e.promo.description=t.data.live_promotion.description||"",new Date(e.liveTestEndTime).getTime()<l.getCurrentTime()&&(e.showTestDetails=!1);for(var n=0;n<r.length;n++)0==r[n].cost||r[n].items&&1==r[n].items.length?o.push(r[n]):a.push(r[n]);for(var n=0;n<o.length;n++){var c=l.getProcessedTestObj(o[n]);c=e.addPromotionsDetails(c,0),e.allTestsObj.nonProducts.push(c)}for(var n=0;n<a.length;n++){var c=a[n];if(!l.checkForComboPack(a[n])){var d=l.getProcessedPackObj(c,"pack");d=e.addPromotionsDetails(d,0),d.cardClass=l.getProductCardClass(d,[],e.isPromotionsPage),e.allTestsObj.packs.push(d)}}for(var n=0;n<a.length;n++){var c=a[n];if(l.checkForComboPack(a[n])){var d=l.getProcessedPackObj(c,"combo");d=e.addPromotionsDetails(d,0),d.cardClass=l.getProductCardClass(d,[],e.isPromotionsPage),e.allTestsObj.comboPacks.push(d)}}s(function(){initHorizontalScroll()},1e3)},e.hasResultAnnounced=function(){var t=new Date(e.liveTestEndTime),s=new Date;return s.getTime()>t.getTime()},e.promotionEndTime="",e.promotionsTimerTime="";var w=function(e){return e<10?"0"+e:""+e};e.getTime=function(e){var t=e,s=Math.floor(t/60),r=Math.floor(s/60),a=Math.floor(r/24);return{secs:w(t%60),mins:w(s%60),hrs:w(r%24),days:w(a)}},e.renderTimer=function(t){t=t>=0?t:0,t<=0&&location.reload();var s=e.getTime(t);e.promotionsTimerTime=s.hrs+":"+s.mins+":"+s.secs,s.days>0&&(e.promotionsTimerTime=s.days+":"+e.promotionsTimerTime)},e.promotionsTimer=function(){var t=new Date(l.getCurrentTime()),s=(new Date(e.promotionEndTime)-t)/1e3;s>0&&r(function(){e.renderTimer(s--)},1e3,0,!0)},e.addPromotionsDetails=function(t,s){s=s?s:1;var r=e.promotionsMap[t.id]||{};return t.oldCost=t.oldCost||0,t.newCost=0,r&&r.discType&&(t.newCost=Math.round("percent"==r.discType?t.cost-t.cost*r.discount/100*s:t.cost-r.discount*s),t.offerText="SAVE RS. "+(t.oldCost-t.newCost),t.isRecommended=r.recommended,t.cost=t.newCost||0),t},e.getPromotionsMap=function(e){for(var t={},s=e.products||[],r=e.tests||[],a=0;a<s.length;a++)t[s[a].pid]=s[a];for(var a=0;a<r.length;a++)t[r[a].tid]=r[a];return t},e.promotionsArr=[],e.bannerClass="show-normal-banner",e.getBannerDetails=function(t){"557af9de0ea5ce31f052918b"==e.currentCourseId?e.bannerClass="show-special-banner":t.promotions&&(e.promotionsArr=t.promotions||[])},e.makeTestIdToTestMap=function(t){e.testIdToTestMAP={};for(var s=0;s<e.allTestsObj.nonProducts.length;s++)e.allTestsObj.nonProducts[s].items&&!e.allTestsObj.nonProducts[s].isHide?e.makeTestIdToTestMapHelper(e.allTestsObj.nonProducts[s].items):e.allTestsObj.nonProducts[s].items||e.makeTestIdToTestMapHelper([e.allTestsObj.nonProducts[s]]);for(var s=0;s<e.allTestsObj.packs.length;s++)for(var r=e.allTestsObj.packs[s].value,a=0;a<r.length;a++)r[a].isHide||e.makeTestIdToTestMapHelper(r[a].items);for(var s=0;s<e.allTestsObj.comboPacks.length;s++)for(var r=e.allTestsObj.comboPacks[s].value,a=0;a<r.length;a++)e.makeTestIdToTestMapHelper(r[a].comboPackTests);e.makeTestIdToTestMapHelper(t)},e.makeTestIdToTestMapHelper=function(t){if(!t||!t.length)return!1;for(var s=0;s<t.length;s++){var r=t[s];e.testIdToTestMAP[r.id]=r}},e.mycoins=0,e.myProductIds=[],e.appCourses=[],e.studentApiData={};var x=0;e.getStudentDetailsSCB=function(t){hideLoader(),x+=1,e.studentApiData=t,2==x&&j(e.studentApiData)};var M=[],j=function(s){e.hindiTestsScope.askForProductChangeArr=s&&s.data&&s.data.askForProductChange||[],e.setResumableTests(s);var r=s.data.attemptedTests||[];e.myTestsIds=e.getAllTestIdsAssignedToStudent(s)||[],e.appCourses=s.data.appCourses||[],e.mycoins=s.data.coins,t.$broadcast("SET_MY_COINS",{mycoins:e.mycoins});var a=l.getAllTestsAssignedToStudent(s,e.allTestsObj.nonProducts,e.myTestsIds);M=s.data.products,e.myTestsIdObjMAP=getCustomMap(a,"id","",!0),l.setMyTestsIdObjMAP(e.myTestsIdObjMAP),e.processAllTests(),e.isCoursePage&&e.initializeCoursePage(),e.makeTestIdToTestMap(a),e.totalTestsCount=l.getTotalTestCount(e.myTestsIds,e.myProductIds,e.testIdToTestMAP),e.totalQuestionsCount=l.getTotalQuestionsCount(e.myTestsIds,e.myProductIds,e.testIdToTestMAP),e.setMyTests(a,r,s.data.attemptedTestsDetails),e.getBannerDetails(s.data);var i=!!getURLParameterValue("tab");a.length||e.isCoursePage||i||e.manageTabs("all"),e.isCoursePage||e.initializeCartOnPageLoad(s),e.isMocktestPage&&setViewMoreViewLess("#my_test_tab .tests-sections .packs-container"),e.isInit=!0,e.checkForCartProductInURL(),e.txnId||n.callDataLayerFunction();var c=s&&s.data&&s.data.attemptedTestsDetails||[],d=function(t){var s=function(s){if(s&&s.data&&s.data.length){for(var r=[],a=0;a<s.data.length;a++)r.push(l.getProcessedTestObj(s.data[a]));var o=e.processAttemptedTests(r,c||[]);e.attemptedTestsArr=e.getSortedAttemptedTestsArr(o,t),e.attemptedCategorizedArr=l.getCompleteSortedCategorizedItemsArr(r,"test",!1,"asc"),setViewMoreViewLess("#attempted_test_tab .tests-sections .packs-container")}b(),B()},r=function(e){console.log(e)},a={courseId:e.currentCourseId,tests:t.join(","),isAttemptedCase:!0};o.getExpiredAttemptedTests(a,s,r)};r&&r.length?d(r):B(),b(),h(e.subsArr),z()},z=function(){for(var t={},s=0;M&&s<M.length;s++)t[M[s].pid]=M[s];for(var s=0;s<e.allTestsObj.packs.length;s++)for(var r=e.allTestsObj.packs[s].value,a=0;a<r.length;a++){var o=r[a].id;t[o]&&(r[a].isPurchased=!0)}};e.allQuizesArr=[],e.todaysQuizArr=[],e.previousQuizArr=[],e.pausedQuizArr=[],e.attemptedQuizArr=[],e.quizFilter={exams:[],types:[],selectedFilters:[],filterTypes:{exams:"exams",types:"types"},selectedCount:0,selectedExamsCount:0,selectedTypesCount:0};var _={};e.storeCurrQuizInfoInLS=function(e,t){var s=LS.currentQuizInfo;s.value.servesOn=e.servesOn,s.value.exam=e.specificExamsDL||[],s.value.course=s.value.exam.length&&TB.mapExamIDToInfo[s.value.exam[0].id]?TB.mapExamIDToInfo[s.value.exam[0].id].parent.name:"",s.value.page=window.location.href,s.value.category=e.categoryObj.name,setLocalStorage(s.key,JSON.stringify(s.value)),t&&(window.location.href=t)};var B=function(){e.attemptedQuizArr=Q(),e.pausedQuizArr=U(),e.allQuizesArr=q(e.allTestsObj.nonProducts,e.myTestsArr,e.pausedQuizArr,e.attemptedQuizArr),e.allQuizesArr=sortFunction(e.allQuizesArr,"servesOn","number","desc"),e.quizFilter.exams=R(e.allQuizesArr),e.quizFilter.types=L(e.allQuizesArr),e.todaysQuizArr=N(e.allQuizesArr,!0),e.previousQuizArr=N(e.allQuizesArr,!1),e.previousQuizArr=D(e.previousQuizArr),b(),e.isMocktestPage&&setViewMoreViewLess("#daily_quiz_tab .tests-sections .packs-container"),e.isCoursePage&&e.initializeCoursePage()},R=function(e){var t,s,r={};for(t=0;t<e.length;t+=1)for(s=0;s<e[t].specificExams.length;s+=1){var a=e[t].specificExams[s];r[a]={value:a,isSelected:!1}}return Object.values(r).sort()},L=function(e){var t,s={},r={};for(t=0;t<e.length;t+=1)e[t].isAttempted?r["Attempted Quiz"]={value:"Attempted Quiz",isSelected:!1}:e[t].isResumable?r["Paused Quiz"]={value:"Paused Quiz",isSelected:!1}:r["Unattempted Quiz"]={value:"Unattempted Quiz",isSelected:!1};return Object.values(s).sort().concat(Object.values(r).sort())};e.isShowTodaysCategory=!0,e.manageQuizFilters=function(){var t,s,r=!1,a=!1,o=!1,i=!1;e.quizFilter.selectedFilters=[];for(var t=0;t<e.quizFilter.exams.length;t+=1)e.quizFilter.exams[t].isSelected&&e.quizFilter.selectedFilters.push({type:e.quizFilter.filterTypes.exams,value:e.quizFilter.exams[t].value});for(var t=0;t<e.quizFilter.types.length;t+=1)e.quizFilter.types[t].isSelected&&e.quizFilter.selectedFilters.push({type:e.quizFilter.filterTypes.types,value:e.quizFilter.types[t].value});var n=function(t){var s,r=!1,a=!1;for(s=0;s<e.quizFilter.exams.length;s+=1){var o=e.quizFilter.exams[s];if(r=r||o.isSelected,t.specificExams.indexOf(o.value)!==-1&&o.isSelected){a=!0;break}}return!r||a},l=function(t){var s,r=!1,a=!1;for(s=0;s<e.quizFilter.types.length;s+=1){var o=e.quizFilter.types[s];if(r=r||o.isSelected,t.isAttempted&&"Attempted Quiz"===o.value&&o.isSelected||t.isResumable&&"Paused Quiz"===o.value&&o.isSelected||t.isUnattempted&&"Unattempted Quiz"===o.value&&o.isSelected||o.value===t.categoryObj.name&&o.isSelected){a=!0;break}}return!r||a},c=function(t){return!e.quizTitleForSearch||t.title===e.quizTitleForSearch||t.title.toLowerCase().search(e.quizTitleForSearch.toLowerCase())!=-1},d=function(){var r=0;for(t=0;t<e.todaysQuizArr.length;t++)e.todaysQuizArr[t].isShow&&r++;for(t=0;t<e.previousQuizArr.length;t+=1){var a=e.previousQuizArr[t].value||[];for(s=0;s<a.length;s+=1)a[s].isShow&&r++}return r},u=function(e){var s=0;for(t=0;t<e.length;t+=1)e[t].isSelected&&s++;return s};for(e.isShowTodaysCategory=!1,t=0;t<e.todaysQuizArr.length;t+=1)r=n(e.todaysQuizArr[t]),a=l(e.todaysQuizArr[t]),o=c(e.todaysQuizArr[t]),e.todaysQuizArr[t].isShow=r&&a&&o,e.isShowTodaysCategory=e.isShowTodaysCategory||e.todaysQuizArr[t].isShow;for(t=0;t<e.previousQuizArr.length;t+=1){var f=e.previousQuizArr[t].value||[];for(i=!1,s=0;s<f.length;s+=1)r=n(f[s]),a=l(f[s]),o=c(f[s]),f[s].isShow=r&&a&&o,i=i||f[s].isShow;e.previousQuizArr[t].isShow=i}e.quizFilter.selectedExamsCount=u(e.quizFilter.exams),e.quizFilter.selectedTypesCount=u(e.quizFilter.types),e.quizFilter.selectedCount=d()},e.quizFilter.removeSelectedFilters=function(t){var s,r=function(e,t){for(s=0;s<t.length;s+=1)if(t[s].value===e.value){t[s].isSelected=!1;break}};e.quizFilter.selectedFilters.splice(e.quizFilter.selectedFilters.indexOf(t)),t.type===e.quizFilter.filterTypes.exams?r(t,e.quizFilter.exams):t.type===e.quizFilter.filterTypes.types&&r(t,e.quizFilter.types),e.manageQuizFilters()},e.quizFilter.removeSearchText=function(t){e.quizFilter.selectedQuizForSuggestion="",e.manageQuizFilters()},e.resetQuizFilters=function(){var t;for(t=0;t<e.quizFilter.exams.length;t+=1)e.quizFilter.exams[t].isSelected=!1;for(t=0;t<e.quizFilter.types.length;t+=1)e.quizFilter.types[t].isSelected=!1;e.quizTitleForSearch="",e.quizFilter.selectedQuizForSuggestion="",e.manageQuizFilters()},e.quizFilter.removeSearchText=function(t){e.quizFilter.selectedQuizForSuggestion="",e.quizTitleForSearch="",e.manageQuizFilters()},e.quizTitleForSearch="",e.isShowSuggestions=!1,e.setQuizTitleForSearch=function(t){e.quizTitleForSearch=t,e.quizFilter.selectedQuizForSuggestion=t,e.isShowQuizSuggestions=!1,e.manageQuizFilters()},e.quizFilter.selectedQuizForSuggestion="",e.isShowQuizSuggestions=!1,e.setQuizTitleForSearchOnChange=function(t,s){e.isShowQuizSuggestions=s;for(var r=0;r<e.allQuizzesNamesArr.length;r+=1)e.allQuizzesNamesArr[r].isShow=e.allQuizzesNamesArr[r].value.toLowerCase().search(t.toLowerCase())!==-1;t||(e.quizTitleForSearch="",e.manageQuizFilters())},e.showQuizSuggestions=function(t){e.isShowQuizSuggestions=t};var D=function(t){t=validateArr(t);var s,r,a={},o=[];for(s=0;s<t.length;s++){var i=t&&t[s].category||"-1";a[i]||(a[i]=[]),a[i].push(t[s])}for(r in a)a.hasOwnProperty(r)&&o.push({categoryName:e.allCategoryObjById[r].name,value:a[r],isShow:!0,order:e.allCategoryObjById[r].order});return sortFunction(o,"order","number","asc")},Q=function(){for(var t=[],s=[],r=[],a=[],o=0;o<e.attemptedCategorizedArr.length;o++){r=[],a=[],r=e.attemptedCategorizedArr[o].value||[];for(var i=0;i<r.length;i++)r[i].isQuiz?(r[i].cardClass+=" attempted-quiz",r[i].isAttempted=!0,t.push(r[i]),_[r[i].id]=!0):(a.push(r[i]),s.push(r[i]));e.attemptedCategorizedArr[o].value=a}return e.attemptedTestsArr=s&&s.length?s:[],t},U=function(){for(var t=[],s=[],r=[],a=0;a<e.myTestsArr.length;a++){r=[],t=[],r=e.myTestsArr[a].value||[];var o=e.myTestsArr[a].categoryName||"";if("paused tests"===o.toLowerCase()){for(var i=0;i<r.length;i++)if(r[i].isQuiz){var n=r[i].category||"";r[i].categoryObj=e.allCategoryObjById[n],r[i].cardClass+=" resumable-quiz",r[i].isResumable=!0,s.push(r[i]),_[r[i].id]=!0}else t.push(r[i]);e.myTestsArr[a].value=t}}return s},V=function(e,t){e=validateArr(e);for(var s={},r=[],a="",o=0;o<e.length;o++)a=e[o][t]||o,s[a]=e[o];for(a in s)s.hasOwnProperty(a)&&r.push(s[a]);return r};e.allQuizzesNamesArr=[];var q=function(t,s,r,a){t=validateArr(t),s=validateArr(s),r=validateArr(r),a=validateArr(a);for(var o=[],i=[],n=0;n<t.length;n++)t[n].isQuiz&&!_[t[n].id]?(t[n].isShow=!0,t[n].isUnattempted=!0,e.allQuizzesNamesArr.push({value:t[n].title,category:t[n].categoryObj.name,isShow:!0}),i.push(t[n])):_[t[n].id]||o.push(t[n]);for(var l=[],c=[],n=0;n<s.length;n++){l=[],c=[],l=s[n].value||[];for(var d=0;d<l.length;d++)l[d].isQuiz&&!_[s[n].id]?(l[d].isShow=!0,l[d].isUnattempted=!0,e.allQuizzesNamesArr.push({value:l[d].title,category:l[d].categoryObj.name,isShow:!0}),i.push(l[d])):c.push(l[d]);e.myTestsArr[n].value=c}e.testsArrForCourses=o,e.allTestsObj.nonProducts=o,i=i.concat(r),i=i.concat(a);for(var n=0;n<r.length;n++)r[n].isShow=!0,e.allQuizzesNamesArr.push({value:r[n].title,category:"Paused Quizzes",isShow:!0});for(var n=0;n<a.length;n++)a[n].isShow=!0,e.allQuizzesNamesArr.push({value:a[n].title,category:"Attempted Quizzes",isShow:!0});return V(i,"id")},N=function(e,t){for(var s=[],r=0;r<e.length;r++){var a=getDaysDiff(e[r].servesOn,(new Date).getTime());0==a&&t?s.push(e[r]):0==a||t||s.push(e[r])}return s};e.resumableTestsMAP={},e.resumableTestsIdsArr=[],e.setResumableTests=function(t){var s=t.data.resumableTests||[];e.resumableTestsIdsArr=s;for(var r=0;r<s.length;r++)e.resumableTestsMAP[s[r]]=!0;l.setResumableTestMap(e.resumableTestsMAP)},e.admitCardInfoMap={},e.makeSpecificExamIdMapForAdmitCardInfo=function(t){for(var s=0;s<t.length;s++)e.admitCardInfoMap[t[s]]=!0},e.getAllTestIdsAssignedToStudent=function(t){var s=[];if(t.data.tests&&t.data.tests.length&&(s=t.data.tests),t.data.products&&t.data.products.length)for(var r=t.data.products||[],a=0;a<r.length;a++)if(e.myProductIds.indexOf(r[a].pid)==-1&&e.myProductIds.push(r[a].pid),r[a].tests&&r[a].tests.length&&(s=s.concat(r[a].tests)),r[a].products&&r[a].products.length)for(var o=r[a].products||[],i=0;i<o.length;i++)e.myProductIds.indexOf(o[i].pid)==-1&&e.myProductIds.push(o[i].pid),s=s.concat(o[i].tests);return s},e.removeDupclicateItemsFromArr=function(e){for(var t={},e=[],s=0;s<e.length;s++)t[e[s]]=0;for(var r in e)e.push(r);return e},e.initializeCartOnPageLoad=function(s){var r=[],a={cartItemsArr:[],isOpenFlyout:!1,mycoins:e.mycoins,isAddWithCoins:!1,isSyncWithServer:!1,coinsPercentage:e.coinsPercentage};if(s&&s.data&&s.data.cart&&s.data.cart.products){a.cartItemsArr=s&&s.data.cart.products||[];for(var o=0;o<a.cartItemsArr.length;o++){if(r.push(a.cartItemsArr[o].pid),a.cartItemsArr[o].id=a.cartItemsArr[o].pid,a.cartItemsArr[o].items=[{pid:a.cartItemsArr[o].pid}],n.subsBundleIdToObjMap[a.cartItemsArr[o].id]&&(a.cartItemsArr[o].validityInString=n.getValidMonth(a.cartItemsArr[o].validity)>1?n.getValidMonth(a.cartItemsArr[o].validity)+" Months":n.getValidMonth(a.cartItemsArr[o].validity)+" Month",a.cartItemsArr[o].exams))for(var i=0;i<a.cartItemsArr[o].exams.length;i++)I[a.cartItemsArr[o].exams[i]]=1;a.cartItemsArr[o].products&&(a.cartItemsArr[o].items[0].products=a.cartItemsArr[o].products),a.cartItemsArr[o].tests&&(a.cartItemsArr[o].items[0].tests=a.cartItemsArr[o].tests),delete a.cartItemsArr[o].pid,delete a.cartItemsArr[o].products,delete a.cartItemsArr[o].tests}}t.$broadcast("ADD_TO_CART",a),r&&r.length&&e.resetItemsForCartStatus(r,!0)},e.myTestsArr=[],e.attemptedTestsArr=[],e.attemptedCategorizedArr=[],e.resumableTestsArr=[],e.setMyTests=function(t,s,r){for(var a=[],o=[],i=0;i<t.length;i++)e.resumableTestsMAP[t[i].id]?(t[i].myCardClass=l.getClassForMyTests(t[i]),t[i].pattern.title="Paused Tests",t[i].categoryObj=e.allCategoryObjById[-1],t[i].pausedTestOrder=e.resumableTestsIdsArr.indexOf(t[i].id),t[i].isResumable=!0,e.resumableTestsArr.push(t[i])):t&&t[i]&&"-1"!=s.indexOf(t[i].id)?(t[i].isAttempted=!0,t[i].isShow=!0,o.push(t[i])):t&&t[i]&&"-1"!=s.indexOf(t[i].id)?(t[i].isAttempted=!0,t[i].isShow=!0,o.push(t[i])):(t[i].myCardClass=l.getClassForMyTests(t[i]),a.push(t[i]));if(e.attemptedCategorizedArr=l.getCompleteSortedCategorizedItemsArr(o,"test",!1,"asc"),a.length&&(e.myTestsArr=l.getCompleteSortedCategorizedItemsArr(a,"test",!1,"asc"),c()),e.resumableTestsArr.length&&e.myTestsArr.unshift({categoryId:"-1",categoryName:"Paused Tests",categoryOrder:-1,orderBy:"availFrom",sortOrder:"desc",value:sortFunction(e.resumableTestsArr,"pausedTestOrder","number","asc")}),o.length){var n=e.processAttemptedTests(o,r||[]);e.attemptedTestsArr=e.getSortedAttemptedTestsArr(n,s)}e.setFiltersMocktest()},e.getSortedAttemptedTestsArr=function(e,t){for(var s={},r=[],a=0;a<e.length;a++)s[e[a].id]=e[a];for(var a=0;a<t.length;a++)s[t[a]]&&r.push(s[t[a]]);return r},e.getFilterDefaultObj=function(t){var s={};return s="all"==t?{courses:[],specificExams:[],packTypes:[],courseSpecObj:{},priceFilter:[{low:e.minPriceValue,high:e.maxPriceValue,selected:!0,value:e.minPriceValue+"-"+e.maxPriceValue}]}:{specificExams:[],testTypes:[],testStates:[],testTitle:""}},e.resetFilters=function(t){"all"==t?e.setFiltersForAllTests():e.setFiltersForMyTests(),$("#mocktestPriceSlider_1").slider("refresh"),$("#mocktestPriceSlider_2").slider("refresh"),e.allFiltersTagsArr=[],e.myFiltersTagsArr=[]},e.scrollToFilterResults=function(){var e=$("#js-scholarship-banner").outerHeight()||0;$("html, body").animate({scrollTop:$(".js-mocktest-tabs").offset().top+1-e},500)},e.minPriceValueSelected=0,e.maxPriceValueSelected=e.maxPriceValue,e.manageFilters=function(t,s,r){if(e.filterResultExistsForAll=!1,e.filterResultExistsForMy=!1,e.searchedMyTestsCount=0,e.searchedTestsMap={},"price_1"==t.value){var a=document.getElementById("mocktestPriceSlider_1").value.split(",");e.minPriceValueSelected=a[0],e.maxPriceValueSelected=a[1]}else if("price_2"==t.value){var a=document.getElementById("mocktestPriceSlider_2").value.split(",");e.minPriceValueSelected=a[0],e.maxPriceValueSelected=a[1]}e.setFiltersTags(r)},e.checkIfAllUnselected=function(e){for(var t=!0,s=0;s<e.length;s++)e[s].selected&&(t=!1);return t},e.setFiltersTags=function(t){"my"==t?e.setMyFiltersTags():e.setAllFiltersTags()},e.setFltersForSelectOnly=function(t,s,r){2==s.length&&(s[0].selected=!0);for(var a=0;a<s.length;a++)s[a].selected=s[a].value==t.value;e.setFiltersTags(r)},e.removeFilter=function(t,s){if(t.selected=!1,"priceFilter"==t.type){for(var r=0;r<e.allFiltersTagsArr.length;r++)"priceFilter"==e.allFiltersTagsArr[r].type&&e.allFiltersTagsArr.splice(r,1);$("#mocktestPriceSlider_1").slider("refresh"),$("#mocktestPriceSlider_2").slider("refresh"),e.maxPriceValueSelected=e.maxPriceValue,e.minPriceValueSelected=e.minPriceValue}else"all"==s?e.manageFilters(t,e.filter[t.type],s):e.manageFilters(t,e.myFilter[t.type],s)},e.allFiltersTagsArr=[],e.setAllFiltersTags=function(){if(e.allFiltersTagsArr=[],e.filter.specificExams)for(var t=0;t<e.filter.specificExams.length;t++){var s=e.filter.specificExams[t];s.selected&&(s.type="specificExams",e.allFiltersTagsArr.push(s))}if(e.filter.packTypes)for(var t=0;t<e.filter.packTypes.length;t++){var s=e.filter.packTypes[t];s.selected&&(s.type="packTypes",e.allFiltersTagsArr.push(s))}if(e.minPriceValue!=e.minPriceValueSelected||e.maxPriceValue!=e.maxPriceValueSelected){var s={value:e.minPriceValueSelected+"-"+e.maxPriceValueSelected,selected:!0,type:"priceFilter"};e.allFiltersTagsArr.push(s)}},e.myFiltersTagsArr=[],e.setMyFiltersTags=function(){if(e.myFiltersTagsArr=[],e.myFilter.specificExams)for(var t=0;t<e.myFilter.specificExams.length;t++){var s=e.myFilter.specificExams[t];s.selected&&(s.type="specificExams",e.myFiltersTagsArr.push(s))}if(e.myFilter.testTypes)for(var t=0;t<e.myFilter.testTypes.length;t++){var s=e.myFilter.testTypes[t];s.selected&&(s.type="testTypes",e.myFiltersTagsArr.push(s))}if(e.myFilter.testStates)for(var t=0;t<e.myFilter.testStates.length;t++){var s=e.myFilter.testStates[t];s.selected&&(s.type="testStates",e.myFiltersTagsArr.push(s))}},e.setFiltersMocktest=function(){e.setFiltersForAllTests(),e.setFiltersForMyTests(),e.setMyFiltersTags("all"),e.setMyFiltersTags("my")},e.myFilter={},e.setFiltersForMyTests=function(){e.myFilter=e.getFilterDefaultObj("my"),e.attemptedTestsArr.length&&!e.checkIfObjectAlreadyExist(e.myFilter.testStates,"attempted")&&e.myFilter.testStates.push({value:"Attempted",selected:!1}),e.myTestsArr.length&&!e.checkIfObjectAlreadyExist(e.myFilter.testStates,"not-attempted")&&e.myFilter.testStates.push({value:"Not Attempted",selected:!1});for(var t=0;t<e.attemptedTestsArr.length;t++){var s=e.attemptedTestsArr[t];if(s.specificExams&&s.specificExams.length)for(var r=0;r<s.specificExams.length;r++)s.isQuiz||!s.specificExams||e.checkIfObjectAlreadyExist(e.myFilter.specificExams,s.specificExams[r])||e.myFilter.specificExams.push({value:s.specificExams[r],selected:!1});!s.isQuiz&&s.pattern&&!e.checkIfObjectAlreadyExist(e.myFilter.testTypes,s.pattern.title)&&s.pattern.title?e.myFilter.testTypes.push({value:s.pattern.title,selected:!1}):s.isQuiz||e.checkIfObjectAlreadyExist(e.myFilter.testTypes,"others")||e.myFilter.testTypes.push({value:"others",selected:!1})}for(var t=0;t<e.myTestsArr.length;t++)for(var a=e.myTestsArr[t].value,o=0;o<a.length;o++){var s=a[o]||[];if(s.specificExams&&s.specificExams.length)for(var r=0;r<s.specificExams.length;r++)s.specificExams&&!e.checkIfObjectAlreadyExist(e.myFilter.specificExams,s.specificExams[r])&&e.myFilter.specificExams.push({value:s.specificExams[r],selected:!1});s.pattern&&!e.checkIfObjectAlreadyExist(e.myFilter.testTypes,s.pattern.title)&&s.pattern.title?e.myFilter.testTypes.push({value:s.pattern.title,selected:!1}):e.checkIfObjectAlreadyExist(e.myFilter.testTypes,"others")||e.myFilter.testTypes.push({value:"others",selected:!1})}},e.checkIfObjectAlreadyExist=function(e,t){e=e||[];for(var s=0;s<e.length;s++)if(e[s].value==t&&t)return!0;return!1},e.filter={},e.minPriceValue=0,e.maxPriceValue=0,e.priceValue="",e.setFiltersForAllTests=function(){e.filter=e.getFilterDefaultObj("all");for(var t=0;t<e.allTestsObj.nonProducts.length;t++){var s=e.allTestsObj.nonProducts[t];if(e.minPriceValue=e.minPriceValue>s.cost?s.cost:e.minPriceValue,e.maxPriceValue=e.maxPriceValue<s.cost?s.cost:e.maxPriceValue,s&&s.specificExams&&s.specificExams.length&&!s.isHide)for(var r=0;r<s.specificExams.length;r++)s.specificExams&&!e.checkIfObjectAlreadyExist(e.filter.specificExams,s.specificExams[r])&&e.filter.specificExams.push({value:s.specificExams[r],selected:!1});s&&s.type&&!e.checkIfObjectAlreadyExist(e.filter.packTypes,s.type)&&!s.isHide?e.filter.packTypes.push({value:s.type||"others",selected:!1}):s.type||e.checkIfObjectAlreadyExist(e.filter.packTypes,"others")||e.filter.packTypes.push({value:"others",selected:!1})}for(t=0;t<e.allTestsObj.packs.length;t++){var a=e.allTestsObj.packs[t].value;for(r=0;r<a.length;r++){var s=a[r];if(e.minPriceValue=e.minPriceValue>s.cost?s.cost:e.minPriceValue,e.maxPriceValue=e.maxPriceValue<s.cost?s.cost:e.maxPriceValue,s.specificExams&&s.specificExams.length&&!s.isHide)for(var o=0;o<s.specificExams.length;o++)e.checkIfObjectAlreadyExist(e.filter.specificExams,s.specificExams[o])||e.filter.specificExams.push({value:s.specificExams[o],selected:!1});!s.type||e.checkIfObjectAlreadyExist(e.filter.packTypes,s.type)||s.isHide?s.type||e.checkIfObjectAlreadyExist(e.filter.packTypes,"others")||e.filter.packTypes.push({value:"others",selected:!1}):e.filter.packTypes.push({value:s.type||"others",selected:!1})}}for(t=0;t<e.allTestsObj.comboPacks.length;t++)for(a=e.allTestsObj.comboPacks[t].value,r=0;r<a.length;r++){var s=a[r];if(s&&s.cost&&(e.minPriceValue=e.minPriceValue>s.cost?s.cost:e.minPriceValue,e.maxPriceValue=e.maxPriceValue<s.cost?s.cost:e.maxPriceValue),s&&s.specificExams&&s.specificExams.length&&!s.isHide)for(o=0;o<s.specificExams.length;o++)e.checkIfObjectAlreadyExist(e.filter.specificExams,s.specificExams[o])||e.filter.specificExams.push({value:s.specificExams[o],selected:!1});s&&s.type&&!e.checkIfObjectAlreadyExist(e.filter.packTypes,s.type)&&!s.isHide?e.filter.packTypes.push({value:s.type||"others",selected:!1}):!s||s.type||e.checkIfObjectAlreadyExist(e.filter.packTypes,"others")||e.filter.packTypes.push({value:"others",selected:!1})}e.minPriceValueSelected=e.minPriceValue,e.maxPriceValueSelected=e.maxPriceValue},e.isEnableFilter=!1,e.filterResulteCount=0,e.filterResultExistsForAll=!1,e.filterResultExistsForMy=!1,e.searchedMyTestsCount=0,e.searchedTestsMap={},e.filterTest=function(t,s){if("allTests"==s){var r=e.filterForSpecificExams(e.filter.specificExams,t),a=e.filterForPackTypes(e.filter.packTypes,t),o=e.filterForPrice(e.filter.priceFilter,t),i=!!(r&&a&&o);return t.isShow=i&&!t.isHide,t.isShow&&(e.filterResultExistsForAll=!0),t.isShow}if("myTests"==s){var n=e.filterForTestTitle(t,e.myFilter.testTitle),r=e.filterForSpecificExams(e.myFilter.specificExams,t),l=e.filterForTestTypes(e.myFilter.testTypes,t),c=e.filterForTestStates(e.myFilter.testStates,t,s),i=!!(n&&r&&l&&c);return t.isShow=i,n&&e.myFilter.testTitle&&e.addToArrayForSuggestions(),t.isShow&&(e.filterResultExistsForMy=!0),!e.searchedTestsMap[t.id]&&i&&(e.searchedMyTestsCount+=1,e.searchedTestsMap[t.id]=1),!e.isEnableFilter&&e.myFilter.testTitle?(t.isShow=r&&l&&c,t.isShow):t.isShow}return!1},e.isShowSuggestions=!0,e.setTestTitleForSearch=function(t,s){e.searchedMyTestsCount=0,e.searchedTestsMap={},e.myFilter.testTitle=t,e.arrayForSuggestions=[],e.isShowSuggestions=s,e.isEnableFilter=!0,e.filterResultExistsForMy=!1},e.setTestTitleForSearchOnChange=function(t,s){e.myFilter.testTitle=t,e.arrayForSuggestions=[],e.isShowSuggestions=s,e.isEnableFilter=!1},e.setTestTitleByEnter=function(t,s){13==t.which&&e.setTestTitleForSearch(s,!1)},e.clearMySearch=function(){e.myFilter.testTitle="",e.arrayForSuggestions=[]},e.arrayForSuggestions=[],e.addToArrayForSuggestions=function(){var t={};if(e.arrayForSuggestions=[],e.myFilter.testTitle)for(var s=0;s<e.myTestsArr.length;s++)for(var r=e.myTestsArr[s].value,a=0;a<r.length;a++)t=r[a],e.filterForTestTitle(t,e.myFilter.testTitle)&&!l.checkIfTestAlreadyExistInArr(e.arrayForSuggestions,t.id)&&e.arrayForSuggestions.push(t)},e.showCategory=function(e){e=validateArr(e);for(var t=0;t<e.length;t++)if(e&&e[t]&&e[t].isShow&&!e[t].isHide&&!e[t].isPurchased)return!0},e.showCategoryForMyTests=function(e){e=validateArr(e);for(var t=0;t<e.length;t++)if(e&&e[t]&&e[t].isShow)return!0},e.showComboCategory=function(e,t){e=validateArr(e),t=validateArr(t);for(var s=0;s<e.length;s++)if(e&&e[s]&&e[s].isShow)return!0;for(var s=0;s<t.length;s++)if(t&&t[s]&&t[s].isShow&&t[s].statusClass.search("subs-active")==-1)return!0;return!1},e.showPackCategory=function(e){e=validateArr(e);for(var t=0;t<e.length;t++)if(e&&e[t]&&e[t].isShow&&!e[t].isHide)return!0;return!1},e.searchString=function(e,t){return e.search(t)==-1},e.showCategoryParent=function(e){for(var t=0;t<e.length;t++){var s=e[t].value||[];if(s.length)return!0}return!1},e.filterForTestTitle=function(t,s){return!e.myFilter.testTitle||t.title.toLowerCase().search(s.toLowerCase())!=-1},e.filterForTestStates=function(t,s,r){if(!t||!t.length)return!0;if(e.checkIfAllUnselected(t))return!0;r="attemptedTests"==r?"Attempted":"Not Attempted";for(var a=0;a<t.length;a++)if(t[a].selected&&r==t[a].value)return!0;return!1},e.filterForSpecificExams=function(t,s){if(!t||!t.length)return!0;if(e.checkIfAllUnselected(t))return!0;for(var r=!1,a=0;a<t.length;a++)if(t[a].selected&&s.specificExams&&s.specificExams.indexOf(t[a].value)!=-1){r=!0;break}return r},e.filterForPackTypes=function(t,s){if(!t||!t.length)return!0;if(e.checkIfAllUnselected(t))return!0;for(var r=!1,a=0;a<t.length;a++)if(t[a].selected&&s.type==t[a].value){r=!0;break}return r},e.filterForTestTypes=function(t,s){if(!t||!t.length)return!0;if(e.checkIfAllUnselected(t))return!0;for(var r=!1,a=0;a<t.length;a++)if(t[a].selected&&s.pattern&&s.pattern.title==t[a].value){r=!0;break}return r},e.filterForPrice=function(t,s){return s.cost>=e.minPriceValueSelected&&s.cost<=e.maxPriceValueSelected},e.filterResetAllTests=function(){for(var t=0;t<e.allTestsObj.nonProducts.length;t++)e.allTestsObj.nonProducts[t].isShow=!1},e.processAttemptedTests=function(t,s){for(var r=function(e,t){return e=e<=t?e:t,Math.floor(e/60)+":"+w(e%60)},a=0;a<t.length;a++){for(var o=0;o<s.length;o++)t[a].id==s[o].tid&&(t[a].studentAttemptedDetails={},t[a].studentAttemptedDetails.questionsCount=s[o].attempted,t[a].studentAttemptedDetails.correctQuestions=s[o].correctQuestions,t[a].studentAttemptedDetails.marks=Math.round(100*s[o].marks)/100,t[a].studentAttemptedDetails.time=r(s[o].time,60*t[a].testDetails.time),t[a].studentAttemptedDetails.isAttempted=!0,t[a].show_promotions=s[o].show_promotions,t[a].show_result=s[o].show_result);t[a].attemptedClass=e.getClassForAttemptedTest(t[a]),t[a].promotionsURL="/"+e.curCourseURL+"/tests/"+t[a].id+"/promotions"}return t},e.getClassForAttemptedTest=function(e){var t="";return e.specificExams&&e.specificExams.length&&(t="has-tags"),!e.show_promotions&&e.show_result||(t+=" check-promotions"),e.description&&(t+=" has-syll-info"),t},e.myTestsIdObjMAP={},e.processAllTests=function(){e.allTestsObj.nonProducts=l.resetNonProducts(e.allTestsObj.nonProducts,e.isCoursePage),e.allTestsObj.packs=l.resetPacks(e.allTestsObj.packs,e.isCoursePage),e.allTestsObj.comboPacks=l.resetComboPacks(e.allTestsObj.comboPacks,e.isCoursePage),E()},e.resetAllTestsPacksAndCombos=function(){for(var t=e.allTestsObj.nonProducts.length-1;t>=0;t--)e.allTestsObj.nonProducts[t].isPartOfMyTests&&(e.allTestsObj.nonProducts.splice(t,1),s[r].isPartOfMyTests=!0,s[r].isAlreadyPurchased=!0,s[r].cardClass?s[r].cardClass=s[r].cardClass+" part-of-my-tests":s[r].cardClass="part-of-my-tests");for(var t=e.allTestsObj.packs.length-1;t>=0;t--){for(var s=e.allTestsObj.packs[t].value,r=s.length-1;r>=0;r--)s[r].isPartOfMyTests&&s.splice(r,1);s.length<1&&e.allTestsObj.packs.splice(t,1)}for(var t=e.allTestsObj.comboPacks.length-1;t>=0;t--){for(var s=e.allTestsObj.comboPacks[t].value,r=s.length-1;r>=0;r--)s[r].isPartOfMyTests&&s.splice(r,1);s.length<1&&e.allTestsObj.comboPacks.splice(t,1)}},e.checkIfProductExistsInCombo=function(t){for(var s=e.allTestsObj.comboPacks||[],r=0;r<s.length;r++)for(var a=s[r].value,o=0;o<a.length;o++)for(var i=a[o].items,n=0;n<i.length;n++)i[n].id==t&&(a[o].isPartOfMyTests=!0,a[o].isAlreadyPurchased=!0)},e.checkForProductsWithCoins=function(){t.$broadcast("GET_REMAINING_COINS",{})},e.remCoins=0,e.checkForProductsWithCoinsCallBack=function(t){e.remCoins=t,l.setRemainingCoins(e.remCoins);for(var s=[],r=0;r<e.allTestsObj.nonProducts.length;r++){var a=e.allTestsObj.nonProducts[r];a.cost>0&&(a.cardClass=l.getProductCardClass(a,[],e.isPromotionsPage))}for(r=0;r<e.allTestsObj.packs.length;r++){s=e.isPromotionsPage?e.allTestsObj.packs[r]:e.allTestsObj.packs[r].value;for(var o=0;o<s.length;o++)s[o].cardClass=l.getProductCardClass(s[o],[],e.isPromotionsPage)}for(r=0;r<e.allTestsObj.comboPacks.length;r++)for(s=e.isPromotionsPage?e.allTestsObj.comboPacks[r]:e.allTestsObj.comboPacks[r].value,o=0;o<s.length;o++)s[o].cardClass=l.getProductCardClass(s[o],[],e.isPromotionsPage)},e.closeTBModal=function(){$("#"+H).modal("hide")},e.toggleModal=function(e,t){$("#"+e).modal(t)},e.DOB="",e.rollNoStudent="",e.isStudentInfoUpdatedStatusShow=!1,e.region="",e.regionArr=["Eastern Region","Western Region","Southern Region","Central Region","North Western Region","Northern Region","Madhya Pradesh Region","Karnataka/Kerala Region","North Eastern Region"],e.saveAdmitCardInfo=function(t){if(e.isAllowSkip){var s={specificExamId:e.specificExamIdAdmitCard,skipAppId:!0};o.saveProfile(s,e.syncSkipInfoWithServerSCB,function(){return 0})}if(e.isAllowSkip)return 0;var r=document.getElementsByClassName("birthDay")[0].value;if(!t)return showAlert("Please enter valid roll number.","error","sm",3e3),0;if(!r)return showAlert("Please select valid date of birth.","error","sm",3e3),0;if(!e.region&&"56d6f293995a2d45a8735bb5"==e.courseSelectedForAdmitCardId)return showAlert("Please select valid region.","error","sm",3e3),
0;r=ISODateString(new Date(r));var s={appId:t,dob:r,year:"2016",specificExamId:e.specificExamIdAdmitCard,region:e.region};showLoader("Please Wait. Saving Your Info."),o.saveProfile(s,e.saveAdmitCardInfoSCB)},e.setRegionValue=function(t){e.region=t},e.saveAdmitCardInfoSCB=function(t){if(hideLoader(),t.success)return e.isStudentAppIdUpdated=!0,e.isShowTestInfoForCurExam=!1,e.isStudentInfoUpdatedStatusShow=!1,e.isInvalidDOBOrAppID=!1,forceSessionRefresh(),e.startTestHelper(),0},e.requestTestsState=0,e.requestMoreTests=function(){e.requestMoreTestsSCB=function(t){hideLoader(),e.requestTestsState=1,setLocalStorage(se,1,3),e.isLSExistForReqMoreBlock=getLocalStorage(se)},e.requestMoreTestsFCB=function(t){e.requestTestsState=2,hideLoader(),showAlert(t&&t.message||TBMOCK.API_DEFAULT_ERROR_MESSAGE,"error","large",1e4)},showLoader("Submitting Request, Please Wait."),o.requestMoreTests(e.requestMoreTestsSCB,e.requestMoreTestsFCB)},e.getBannerButtonsClass=function(){var t="";return t=e.isMyTestsAvailable?"cta-take-tests":e.isFreeTestsAvailable?"cta-get-started-for-free":e.isPaidTestsAvailable?"cta-purchase-more-tests":e.isAttemptedTestsAvailable?"cta-review-tests":"cta-request-tests"},e.getMyTestsCount=function(){for(var t=0,s=0;s<e.myTestsArr.length;s++)t+=e.myTestsArr[s].value.length;return t},e.checkForFreeTestsDivDisplay=function(e){if(e&&e.length)for(var t=0;t<e.length;t++)if(e[t].isShow)return!0;return!1},e.getFilteredClass=function(t,s){return!s||e.minPriceValue==e.minPriceValueSelected&&e.maxPriceValue==e.maxPriceValueSelected?!s||e.minPriceValue!=e.minPriceValueSelected&&e.maxPriceValue!=e.maxPriceValueSelected?0==e.getSelectedFiltersCount(t)?"":"filtered":"":"filtered"},e.getSelectedFiltersCount=function(e){if(!e)return 0;for(var t=0,s=0;s<e.length;s++)(e[s].selected||e[s].isSelected)&&(t+=1);return t},e.packToShowInfo={};var H="mtDetailsModal";e.modalToShow="-1",e.MODAL_ENUM={TEST_ADDED:1,ADMIT_CARD:2},e.showPackInfo=function(t){e.packToShowInfo=t,s(function(){$(".js-bundle-details").addClass("in"),$("body").addClass("modal-open")},50)},e.hideBundleDetails=function(){$(".js-bundle-details").removeClass("in"),$("body").removeClass("modal-open")},e.isShowFreeTestsStatus=!1,e.setTestsAddedStatus=function(t){e.isShowFreeTestsStatus=t},e.showFreeTestAddedStatus=function(){return e.isShowFreeTestsStatus},e.checkFOrMobileVerification=function(){e.isMobileVerified=parseInt(document.getElementById("mobile-verification-status").value),e.isMobileVerified||(e.includeMobilVerificationBlock=!0)},e.currentCourseId="",e.currentCourseName="",e.sid="",e.txnId="",e.curCourseURL="",e.isPracticeOnApp=!1,e.appType="",e.hasPractice=0,e.getPHPVariables=function(){document.getElementById("cur-course-id")&&(e.currentCourseId=document.getElementById("cur-course-id").value),document.getElementById("cur-course-title")&&(e.currentCourseName=document.getElementById("cur-course-title").value),document.getElementById("sid")&&(e.sid=document.getElementById("sid").value),""!=getCookie("tb_txnid")&&(e.txnId=getCookie("tb_txnid"),setCookie("tb_txnid",1,-1)),document.getElementById("curCourseURL")&&(e.curCourseURL=document.getElementById("curCourseURL").value||"",l.setCurrentCourseUrl(e.curCourseURL)),document.getElementById("app-link")&&(e.appType=document.getElementById("app-link").value||""),document.getElementById("hasPractice")&&(e.hasPractice=document.getElementById("hasPractice").value||0),l.setCurrentCourseId(e.currentCourseId)},e.hindiTestsScope={stage:1,isHindi:!1,courseName:"",productName:"",productId:"",askForProductChangeArr:[!1]},e.hindiTestsScope.showChangeLanguageModal=function(e){return 0},e.hindiTestsScope.setLanguage=function(t){e.hindiTestsScope.setStage(2),e.hindiTestsScope.isHindi=t},e.hindiTestsScope.setStage=function(t){e.hindiTestsScope.stage=t},e.hindiTestsScope.getCourseName=function(e){e=validateArr(e);for(var t=["57dc1c06995a2d66cc9845f6","57dc1bf1995a2d66cc984595"],s=0;s<e.length;s++)if(t.indexOf(e[s].id)!=-1)return e[s].name||""},e.hindiTestsScope.replaceTests=function(t){var s=function(t){e.toggleModal("langSelectForPacks","hide")},r=function(e){showAlert("Something went wrong, Please check your internet connection and try again.","error","sm",7e3)};t?o.replaceEnglishTestsWithHindi({from:e.hindiTestsScope.productId},s,r):o.replaceEnglishTestsWithHindi({from:e.hindiTestsScope.productId,to:e.hindiTestsScope.productId},s,r)},e.getTransactionInfo=function(e){var t={txn_id:e},s=function(e){for(var t=[],s={pid:"",name:""},r=0;r<e.length;r++)e[r].pid&&(s.pid=e[r].pid),e[r].name&&(s.name=e[r].name),t.push(s);return t},r=function(e){if(e.success){var t=e.data||{},r=void 0!=t.coupons.coupon_code?t.coupons.coupon_code:"",a=void 0!=t.coins.amount?t.coins.amount:0,o=s(t.bundles),i=void 0!=t.payment.pg?t.payment.pg:0;dataLayer.push({txnId:t.txn_id,products:o,subtotal:t.cost,paid:t.payment.amount,coins:a,couponCode:r,page:i}),n.callDataLayerFunction()}},a=function(e){};o.getPaymentLogs(t,r,a)},e.startQuiz=function(e){window.location=e.startURLQuiz},e.viewQuiz=function(e){window.location=e.analysisURLQuiz},e.startTest=function(t){e.testToStart=t,e.showAdmitCardModal(t.showAdmitCardExams)?(e.modalToShow=e.MODAL_ENUM.ADMIT_CARD,s(function(){$("#"+H).modal("show")},1e3)):e.startTestHelper()},e.startTestHelper=function(){var t="/"+e.curCourseURL+"/tests/"+e.testToStart.id;e.resumableTestsMAP[e.testToStart.id]&&!e.testToStart.isQuiz?t+="#/test":e.testToStart.isQuiz&&(t+="#/interface/q"),window.location=t},e.specificExamIdAdmitCard="",e.admitCardSkipCount=0,e.specificExamAdmitCard="",e.courseSelectedForAdmitCardId="",e.showAdmitCardModal=function(t){for(var s={},r=0;r<e.appCourses.length;r++){var a=e.appCourses[r].exam||"";s[a]=e.appCourses[r]}for(var r=0;r<t.length;r++){var a=t[r].id;if(s[a])return e.courseSelectedForAdmitCardId=t[r].id,e.specificExamAdmitCard=t[r].name||"",e.admitCardSkipCount=s[a].skipCount||0,e.specificExamIdAdmitCard=t[r].id||"",!0}return!1},e.isAllowSkip=!1,e.syncSkipInfoWithServer=function(t){e.isAllowSkip=t},e.syncSkipInfoWithServerSCB=function(t){e.startTestHelper()},e.checkForAdmitCardInfo=function(t){for(var s=t.specificExamObjArr||[],r=0;r<s.length;r++)if(e.admitCardInfoMap[s[r].id])return!0;return!1},e.showAddedTestStatus=function(){e.modalToShow=e.MODAL_ENUM.TEST_ADDED,s(function(){$("#"+H).modal("show")},1e3)},e.setTabFromURL=function(){var t=getURLParameterValue("tab");"all"===t?e.manageTabs("all"):"attempted"===t?e.manageTabs("attempted"):"quiz"===t?e.manageTabs("quiz"):e.manageTabs("my")},e.checkForCartProductInURL=function(){var t=getURLParameterValue("pid"),s={};if(t){for(var r=0;r<e.allTestsObj.nonProducts.length;r++)e.allTestsObj.nonProducts[r].id==t&&(s=e.allTestsObj.nonProducts[r]);if(!s.id)for(var r=0;r<e.allTestsObj.packs.length;r++)for(var a=e.allTestsObj.packs[r].value,o=0;o<a.length;o++)a[o].id==t&&(s=a[o]);if(!s.id)for(var r=0;r<e.allTestsObj.comboPacks.length;r++)for(var a=e.allTestsObj.comboPacks[r].value,o=0;o<a.length;o++)a[o].id==t&&(s=a[o]);!s.id&&e.subsArrMap[t]&&(s=e.subsArrMap[t])}if(s&&s.id){var i=[s];e.addToCart(i,!0,e.mycoins,!1)}else if(t){location.protocol+"//"+location.host+location.pathname;setLocalStorageOnLiveTestAdd(t),showAlert("Product with some same tests is already purchased or product not available now","error","sm",7e3)}},e.manageTabs=function(t){e.currentActiveTab=t,"my"==t&&setViewMoreViewLess("#my_test_tab .tests-sections .packs-container"),"attempted"==t&&setViewMoreViewLess("#attempted_test_tab .tests-sections .packs-container"),"quiz"===t&&setViewMoreViewLess("#daily_quiz_tab .tests-sections .packs-container")},e.scrollGetStartedForFree=function(){var t=getAnnBannerHeight();e.manageTabs("all"),$("html, body").animate({scrollTop:$(".js-mocktest-tabs").offset().top-t},500)},e.scrollTakeTests=function(){var t=getAnnBannerHeight(),s=$(".js-mocktest-tabs").outerHeight()||0;e.manageTabs("my"),$("html, body").animate({scrollTop:$("#my_test_tab").offset().top-t-s},500)},e.scrollReviewTests=function(){var t=getAnnBannerHeight(),s=$(".js-mocktest-tabs").outerHeight()||0;e.manageTabs("attempted"),$("html, body").animate({scrollTop:$("#attempted_test_tab").offset().top-t-s},500)},e.scrollPurchaseMoreTests=function(){var t=getAnnBannerHeight(),s=$(".js-mocktest-tabs").outerHeight()||0;e.manageTabs("all"),$("html, body").animate({scrollTop:$(".tests-packs-container").offset().top-t-s},500)},e.getCoinsPayableAmount=function(e){return getRoundedFloat(.7*e,0)},e.subheadingsMap={"557af9de0ea5ce31f052918b":"Just don't take quiz - now read daily news and take quiz on our perfectly designed Current Affairs app","557af9de0ea5ce31f052918a":"Graduate Aptitude Test in Engineering (Civil Engineering)","561664f8cac3ae28e5213e87":"Graduate Aptitude Test in Engineering (Computer Science and Engineering)","55a5784fa7b57b49a29e2125":"Graduate Aptitude Test in Engineering (Electronics and Communication Engineering)","55a57ad3a7b57b49e58559ee":"Graduate Aptitude Test in Engineering (Electrical Engineering)","55a57ad3a7b57b49e58559ed":"Graduate Aptitude Test in Engineering (Mechanical Engineering)","568a751185111b4193101100":"IBPS Clerk, SBI Clerk, SBI Associate Clerk, IBPS RRB Office Assistant and other Clerical Cadre Exams","557569e82a39650f6f395648":"IBPS PO, SBI PO, SBI Associate PO, and other PO/MT Cadre Exams","568a752485111b4193101101":"LIC AAO, NICL AO and other Insurance Exams","569c9730995a2d097081cf8a":"RRB NTPC and other Railways Exams","566947a4a7b57b398faca54b":"SSC MTS, SSC CGL, SSC CHSL & Stenographer Exams","557af9de0ea5ce31f0529187":"Campus Job Placements, MBA/Management Entrance Exams and General Aptitude","578f5618995a2d5b4c3f6e9a":"Get your dream job as BSNL Junior Engineer. The skys the limit to your success","5796d79e9389865c92bf0806":"Get your dream job as reputed RBI Grade B officer. The skys the limit to your success","599d488ce07ce03233deaeb3":"Delhi Police Constable Exams"},e.showDatePickerTB=function(){$(".student-dob").birthdayPicker({monthFormat:"short",maxAge:65,minAge:18})},e.DOB="",e.rollNo="",e.isStudentInfoUpdatedStatusShow=!1,e.updateStudentTestAppId=function(t){var s="2016",r=document.getElementsByClassName("birthDay")[0].value;return""==t?(showAlert("Please enter valid roll number.","error","sm",2e3),0):""==r?(showAlert("Please enter valid date of birth.","error","sm",2e3),0):(r=ISODateString(new Date(r)),void o.updateStudentTestAppIdAndDOB(t,r,s,e.currentCourseId,"Please wait, saving your info.",e.updateStudentTestAppIdSCB,e.updateStudentTestAppIdFCB))},e.isStudentAppIdUpdated=!1,e.isInvalidDOBOrAppID=!1,e.updateStudentTestAppIdSCB=function(t){if(t.success)return e.isStudentAppIdUpdated=!0,e.isShowTestInfoForCurExam=!1,e.isStudentInfoUpdatedStatusShow=!1,e.isInvalidDOBOrAppID=!1,forceSessionRefresh(),e.startTestHelper(),0},e.updateStudentTestAppIdFCB=function(t){e.isInvalidDOBOrAppID=!0},e.getFeaturedBlogPostsSCB=function(t){var s=t.data;e.featuredBlogs=s;for(var r,a,o=(new Date).getTime(),i=0;i<s.length;i++)a=1e3*s[i].date,r=(o-a)/36e5,r<1?s[i].timeStamp="1 hour":r<24?s[i].timeStamp=Math.floor(r)+" hours":r<48?s[i].timeStamp="1 day":s[i].timeStamp=Math.floor(r/24)+" days"},e.getFeaturedBlogPostsFCB=function(e){console.log(e)},e.getBlogPostsSCB=function(t){var s=t.data;e.newsBlogs=s;for(var r,a,o,i=(new Date).getTime(),n=0;n<s.length;n++)a=1e3*s[n].date,r=(i-a)/36e5,r<1?s[n].timeStamp="1 hour":r<24?s[n].timeStamp=Math.floor(r)+" hours":r<48?s[n].timeStamp="1 day":s[n].timeStamp=Math.floor(r/24)+" days",o=removeURLParameter(s[n].img,"resize"),s[n].imgUrl=o+"&w=300"},e.getBlogPostsFCB=function(e){console.log(e)},e.mapCourseBlogUrl=function(t){var s={"557af9de0ea5ce31f052918a":"gate-ce","561664f8cac3ae28e5213e87":"gate-cs","55a5784fa7b57b49a29e2125":"gate-ec","55a57ad3a7b57b49e58559ee":"gate-ee","55a57ad3a7b57b49e58559ed":"gate-me","568a752485111b4193101101":"insurance-exams","55d44abaec7b2f0c210043c1":"placement-aptitude","569c9730995a2d097081cf8a":"railway-rrb","557569e82a39650f6f395648":"bank-po","568a751185111b4193101100":"bank-clerk","566947a4a7b57b398faca54b":"ssc-cgl","58135074adafff45a35a5103":"ssc-je-civil-structural-ce","57ff175ee9f131722fde54d6":"ssc-je-electrical-ee","57fe2e4f03282162c9764bee":"ssc-je-mechanical-me","5796d79e9389865c92bf0806":"rbi","557af9de0ea5ce31f052918b":"current-affairs","578f5618995a2d5b4c3f6e9a":"bsnl-tta","584ff379e9f131060a2edbfd":"bank-so-specialist-officer","5878cdbc995a2d421d498e6f":"coal-india-mt-cil","5878cdd2995a2d421d498ea1":"coal-india-mt-cil","5878cda4995a2d421d498df2":"coal-india-mt-cil","599d488ce07ce03233deaeb3":"other-exams","5a292959df2a2b47cb968c36":"ecil","5a44daa19832316e1e9949aa":"pspcl","5a44dac39832316e1e99569b":"assam-rural-development"};t in s&&(e.courseBlogUrl=s[t])};var K=function(t){e.$parent.$broadcast("COURSE_CHANGED",{courseId:t})},W=function(){e.$parent.$broadcast(C,{isShow:!1})},G=function(t){var s={courseId:t,isEnrolled:!0};e.$parent.$broadcast("COURSE_ENROLLED_DE_ENROLLED",s)},Y=function(t){var s=function(s){K(t),forceSessionRefresh(!0);var r={id:t,name:e.currentCourseName};TBMOCK.UpdateCurrentCourseInStorage(r)},r=function(e){e?showAlert(e.message||"Something went wrong, Please contact at support@testbook.com","error","large",5e3):showAlert("Please check your internet connection or contact at support@testbook.com","error","large",5e3)},a={course:t};o.setCurrentCourse(a,s,r)};e.isEnrollingInCourse=!1;var J=function(t){for(var s=0;s<P.enrollments.length;s++)if(P.enrollments[s].course&&P.enrollments[s].course.id==t&&P.enrollments[s].course.hasOwnProperty("isInactive"))return void(P.enrollments[s].course.isInactive=!1);P.enrollments.push({course:{id:t,name:e.currentCourseName,url:e.curCourseURL}})};e.enrollInCourse=function(t,s){e.isEnrollingInCourse=!0;var r={courses:t},a=function(){e.isEnrollingInCourse=!1,G(e.currentCourseId),showAlert("Successfully enrolled into the course","success","small",5e3),e.isEnrolledInCourse=!0,J(t),s&&s(),forceSessionRefresh(),Y(t)},i=function(e){e&&e.message&&""!==e.message?showAlert(e.message,"error","small",3e3):showAlert("Please check your internet connection or contact at support@testbook.com","error","large",5e3)};o.enrollInCourse(r,a,i)};var X=function(){var t=function(t){t.hasOwnProperty("message")?showAlert(t.message||"Something went wrong please contact at support@testbook.com","error","small",5e3):(P=t.data||{},e.isEnrolledInCourse=p(P.enrollments||[]),e.isEnrolledInCourse&&P.currentCourse&&P.currentCourse.id!==e.currentCourseId&&Y(e.currentCourseId))};"-1"!=e.sid&&TBMOCK.GetStudentFromStorage(t)},Z=JSON.parse($("#course_info")&&$("#course_info").val()||"[]"),ee=function(e,t){for(var s=[],r=0;r<t.length;r+=1)if(s=[],e==t[r].id){for(var a=0;a<t[r].specificExams.length;a++)t[r].specificExams[a].isFreezed&&s.push(t[r].specificExams[a]);return s}return[]};e.init=function(){e.getPHPVariables(),e.setBannerBgImgUrl(),e.specificExamsArr=ee(e.currentCourseId,Z),e.isUpcomingExamExist=A(!0),e.isFreezedExamExist=A(!1),X(),se="req_more_tests_"+e.currentCourseId+"_"+e.sid,document.getElementById("pageName")&&"promotionsPage"==document.getElementById("pageName").value?(e.isPromotionsPage=!0,e.initPromotions()):document.getElementById("pageName")&&"coursePage"==document.getElementById("pageName").value?(e.isCoursePage=!0,e.initCourses()):(e.isMocktestPage=!0,e.initMocktest())},e.takeMeToUrl=function(t,s){var r;e.storeCurrQuizInfoInLS(s),"-1"===e.sid?(r={},r[REDIRECT_URL_KEY]=t,r[COURSE_IDS_KEY]=e.currentCourseId,r[y]="Sign up to take quiz",openSignUpSignInModal(r,!1)):window.location.href=t},e.testimonialsArr=[],e.selectionsArr=[],e.initCourses=function(){e.testimonialsArr=document.getElementById("testimonials")&&JSON.parse(document.getElementById("testimonials").value),e.selectionsArr=document.getElementById("selections")&&JSON.parse(document.getElementById("selections").value),e.mapCourseBlogUrl(e.currentCourseId),showLoader("Loading Tests, Please Wait."),o.getProductDetails(e.currentCourseId,{},e.getProductDetailsSCB),o.getBlogPosts(e.currentCourseId,!0,e.getFeaturedBlogPostsSCB,e.getFeaturedBlogPostsFCB),o.getBlogPosts(e.currentCourseId,!1,e.getBlogPostsSCB,e.getBlogPostsFCB),scrollToLoc()},e.testId="",e.getProductDetailsFCB=function(){hideLoader(),e.isPromotionsPage=!1;var t=window.location.pathname.split("/");"analysis"==getURLParameterValue("from")?(t[t.length-1]="analysis",window.location.href=t.join("/")):(t.splice(t.length-1,1),window.location.href=t.join("/")+"#/solutions")},e.initPromotions=function(){s(function(){W()},0),e.testId=document.getElementById("tid").value||"",showLoader("Loading Tests, Please Wait."),e.isPromotionsPage=!0,l.setPromotionsPageBool(!0),o.getPromotions(e.testId,e.getProductDetailsSCB,e.getProductDetailsFCB)},e.isFreeTestAdded=!1,e.isInit=!1;var te=function(e){try{e()}catch(t){console.log(t)}},se="";e.initMocktest=function(){mocktestPageEvents(),v(e.currentCourseId),e.setTabFromURL(),e.isLSExistForReqMoreBlock=getLocalStorage(se),""!=e.txnId&&(e.isFreeTestAdded=!1,e.testCountAdded=getLocalStorage(TBMOCK.LS_KEY_TXN_TEST_COUNT),e.amountPaid=getLocalStorage(TBMOCK.LS_KEY_TXN_AMOUNT),e.getTransactionInfo(e.txnId),e.showAddedTestStatus(),e.callAfiliate(e.txnId,e.amountPaid),TBAnalytics.hooks.checkoutEnd(e.txnId,e.amountPaid,getLocalStorage(TBMOCK.LS_KEY_TXN_COUPON_USED))),showLoader("Loading Tests, Please Wait."),o.getProductDetails(e.currentCourseId,{},e.getProductDetailsSCB)},e.pushInfoToAfiliates=!1,e.callAfiliate=function(t,s){if(!s)return!1;s=Number(s);var r=function(){goog_report_conversion?goog_report_conversion(s):console.log("No conversion code detected!!!")};te(r);var a;window.TapfiliateObject=a="tap",window[a]=window[a]||function(){(window[a].q=window[a].q||[]).push(arguments)},tap("create","1552-b82d64"),tap("conversion",t,s),e.couponRajaURL=i.trustAsResourceUrl("https://couponraja.go2cloud.org/aff_l?offer_id=261&adv_sub="+t+"&amount="+s),e.cashKaroURL=i.trustAsResourceUrl("https://traqkar.com/p.ashx?o=32&e=36&ect="+s+"&t="+t+"&p="+s),e.couponRaniURL=i.trustAsResourceUrl("//couponkart.go2cloud.org/aff_l?offer_id=176&adv_sub="+t+"&amount="+s),e.pushInfoToAfiliates=!0},e.init(),e.$on("NG_EXAM_INFO_RENDERED",function(){var e=getURLParameterValue("loc");""!==e?scrollToLoc(TB_HEADER_HEIGHT+64):scrollToLoc(TB_HEADER_HEIGHT+64)})}]);
!function(){function a(a){a.prev().addClass("top-card"),a.addClass("swipe-card-right"),setTimeout(function(){a.prev().addClass("active").removeClass("top-card"),a.removeClass("active swipe-card-right")},1e3);var s=a.attr("data-card-t"),t=$('.js-card-specific-scroll span[data-each-id="'+s+'"]');t.removeClass("active"),t.prev().addClass("active")}function s(a){a.next().addClass("top-card"),a.addClass("swipe-card-left"),setTimeout(function(){a.next().addClass("active").removeClass("top-card"),a.removeClass("active swipe-card-left")},1e3);var s=a.attr("data-card-t"),t=$('.js-card-specific-scroll span[data-each-id="'+s+'"]');t.removeClass("active"),t.next().addClass("active")}function t(a){c=$(".js-testimonials .each"),c.first().addClass("top-card"),a.addClass("swipe-card-left"),setTimeout(function(){c.first().addClass("active").removeClass("top-card"),a.removeClass("active swipe-card-left")},1e3);var s=a.attr("data-card-t");$('.js-card-specific-scroll span[data-each-id="'+s+'"]').removeClass("active"),$(".js-card-specific-scroll span:first-child").addClass("active")}function e(a){c=$(".js-testimonials .each"),c.last().addClass("top-card"),a.addClass("swipe-card-right"),setTimeout(function(){c.last().addClass("active").removeClass("top-card"),a.removeClass("active swipe-card-right")},1e3);var s=a.attr("data-card-t");$('.js-card-specific-scroll span[data-each-id="'+s+'"]').removeClass("active"),$(".js-card-specific-scroll span:last-child").addClass("active")}var c=$(".js-testimonials .each"),i=setInterval(function(){var a=$(".js-testimonials .active"),e=$(".js-testimonials .each:last-child");e.hasClass("active")?t(a):s(a)},1e4);$(document).on("click",".js-card-scroll",function(){var c=$(this).attr("data-scroll"),d=$(".js-testimonials .active");$(".js-card-scroll").attr("disabled","disabled"),setTimeout(function(){$(".js-card-scroll").removeAttr("disabled")},1e3),"left"==c&&d.is(":not(:first-child)")?a(d):"left"==c&&d.is(":first-child")&&e(d),"right"==c&&d.is(":not(:last-child)")?s(d):"right"==c&&d.is(":last-child")&&t(d),window.clearInterval(i)}),$(document).on("click",".js-card-specific-scroll span",function(){var a,s=$(this).attr("data-each-id"),t=$('.js-testimonials .each[data-card-t="'+s+'"]'),e=$(".js-testimonials .active"),c=e.attr("data-card-t");a=s<c?"swipe-card-right":"swipe-card-left",$(".js-card-specific-scroll span").removeClass("active").attr("disabled","disabled"),$(this).addClass("active"),t.addClass("top-card"),e.addClass(a),setTimeout(function(){t.addClass("active").removeClass("top-card"),e.removeClass("active "+a),$(".js-card-specific-scroll span").removeAttr("disabled")},1e3),window.clearInterval(i)})}();